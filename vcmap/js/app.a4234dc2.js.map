{"version":3,"file":"js/app.a4234dc2.js","mappings":"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","sources":["webpack://vcmap-web/./src/api/GeneApi.ts","webpack://vcmap-web/./config/app.config.ts","webpack://vcmap-web/./src/api/httpInstance.ts","webpack://vcmap-web/./src/logger/index.ts","webpack://vcmap-web/./src/App.vue","webpack://vcmap-web/./src/App.vue?7ccd","webpack://vcmap-web/./src/components/ChromosomeLabelSVG.vue?ec5e","webpack://vcmap-web/./src/components/ChromosomeLabelSVG.vue","webpack://vcmap-web/./src/components/SyntenyLinesSVG.vue?9a14","webpack://vcmap-web/./src/components/SyntenyLinesSVG.vue","webpack://vcmap-web/./src/components/GapSVG.vue?653d","webpack://vcmap-web/./src/components/GapSVG.vue","webpack://vcmap-web/./src/components/OverviewSyntenyLabelsSVG.vue?572b","webpack://vcmap-web/./src/components/OverviewSyntenyLabelsSVG.vue","webpack://vcmap-web/./src/utils/SVGHelpers.ts","webpack://vcmap-web/./src/composables/useMouseBasePairPos.ts","webpack://vcmap-web/./src/composables/useSyntenyAndDataInteraction.ts","webpack://vcmap-web/./src/components/SectionSVG.vue?1f53","webpack://vcmap-web/./src/components/SectionSVG.vue","webpack://vcmap-web/./src/components/GeneLabelSVG.vue?f6f4","webpack://vcmap-web/./src/components/GeneLabelSVG.vue","webpack://vcmap-web/./src/components/ViewboxTitlesSVG.vue?353d","webpack://vcmap-web/./src/components/ViewboxTitlesSVG.vue","webpack://vcmap-web/./src/composables/useDialog.ts","webpack://vcmap-web/./src/composables/useDetailedPanelZoom.ts","webpack://vcmap-web/./src/models/DatatrackSet.ts","webpack://vcmap-web/./src/models/SyntenyRegion.ts","webpack://vcmap-web/./src/models/GenomicSet.ts","webpack://vcmap-web/./src/models/Label.ts","webpack://vcmap-web/./src/utils/GeneLabelMerger.ts","webpack://vcmap-web/./src/models/SyntenyRegionSet.ts","webpack://vcmap-web/./src/models/GenomicSection.ts","webpack://vcmap-web/./src/models/DatatrackSection.ts","webpack://vcmap-web/./src/models/SyntenySection.ts","webpack://vcmap-web/./src/models/GenomicSectionFactory.ts","webpack://vcmap-web/./src/models/VariantPositions.ts","webpack://vcmap-web/./src/api/VariantApi.ts","webpack://vcmap-web/./src/utils/VariantBuilder.ts","webpack://vcmap-web/./src/utils/SectionBuilder.ts","webpack://vcmap-web/./src/composables/useOverviewPanelSelection.ts","webpack://vcmap-web/./src/models/BackboneSection.ts","webpack://vcmap-web/./src/models/BackboneSet.ts","webpack://vcmap-web/./src/utils/BackboneBuilder.ts","webpack://vcmap-web/./src/models/BackboneSelection.ts","webpack://vcmap-web/./src/components/BackboneSetSVG.vue?0ce3","webpack://vcmap-web/./src/components/BackboneSetSVG.vue","webpack://vcmap-web/./src/api/QtlApi.ts","webpack://vcmap-web/./src/components/OrthologLineSVG.vue?390e","webpack://vcmap-web/./src/components/OrthologLineSVG.vue","webpack://vcmap-web/./src/components/LoadingSpinnerMask.vue","webpack://vcmap-web/./src/components/LoadingSpinnerMask.vue?953d","webpack://vcmap-web/./src/components/GradientLegend.vue?fd2b","webpack://vcmap-web/./src/components/GradientLegend.vue","webpack://vcmap-web/./src/components/SVGViewbox.vue?7862","webpack://vcmap-web/./src/components/SVGViewbox.vue","webpack://vcmap-web/./src/components/OverviewControls.vue?637c","webpack://vcmap-web/./src/components/OverviewControls.vue","webpack://vcmap-web/./src/components/Zoom.vue?8d15","webpack://vcmap-web/./src/components/Zoom.vue","webpack://vcmap-web/./src/components/DetailsControls.vue?1698","webpack://vcmap-web/./src/components/DetailsControls.vue","webpack://vcmap-web/./src/components/LoadDataTrackControls.vue?f121","webpack://vcmap-web/./src/components/LoadDataTrackControls.vue","webpack://vcmap-web/./src/components/HeaderPanel.vue?05ab","webpack://vcmap-web/./src/components/HeaderPanel.vue","webpack://vcmap-web/./src/components/GeneInfo.vue?468d","webpack://vcmap-web/./src/components/GeneInfo.vue","webpack://vcmap-web/./src/components/SelectedDataPanel.vue?d158","webpack://vcmap-web/./src/components/SelectedDataPanel.vue","webpack://vcmap-web/./src/models/Block.ts","webpack://vcmap-web/./src/api/SyntenyApi.ts","webpack://vcmap-web/./src/utils/VCMapErrors.ts","webpack://vcmap-web/./src/views/Main.vue?bd2b","webpack://vcmap-web/./src/views/Main.vue","webpack://vcmap-web/./src/router/index.ts","webpack://vcmap-web/./src/utils/ExternalComponentsHandler.ts","webpack://vcmap-web/./src/main.ts","webpack://vcmap-web/./src/models/Chromosome.ts","webpack://vcmap-web/./src/models/Gene.ts","webpack://vcmap-web/./src/models/SelectedData.ts","webpack://vcmap-web/./src/store/index.ts","webpack://vcmap-web/./src/utils/DataPanelHelpers.ts","webpack://vcmap-web/./src/utils/Formatter.ts","webpack://vcmap-web/./src/models/OrthologLine.ts","webpack://vcmap-web/./src/utils/OrthologHandler.ts","webpack://vcmap-web/./src/utils/SVGConstants.ts","webpack://vcmap-web/./src/utils/Shared.ts","webpack://vcmap-web/./src/version.ts","webpack://vcmap-web/./src/components/VCMapDialog.vue?a7d2","webpack://vcmap-web/./src/components/VCMapDialog.vue","webpack://vcmap-web/webpack/bootstrap","webpack://vcmap-web/webpack/runtime/chunk loaded","webpack://vcmap-web/webpack/runtime/compat get default export","webpack://vcmap-web/webpack/runtime/define property getters","webpack://vcmap-web/webpack/runtime/ensure chunk","webpack://vcmap-web/webpack/runtime/get javascript chunk filename","webpack://vcmap-web/webpack/runtime/get mini-css chunk filename","webpack://vcmap-web/webpack/runtime/global","webpack://vcmap-web/webpack/runtime/hasOwnProperty shorthand","webpack://vcmap-web/webpack/runtime/load script","webpack://vcmap-web/webpack/runtime/make namespace object","webpack://vcmap-web/webpack/runtime/publicPath","webpack://vcmap-web/webpack/runtime/css loading","webpack://vcmap-web/webpack/runtime/jsonp chunk loading","webpack://vcmap-web/webpack/startup"],"sourcesContent":["import logger from \"@/logger\";\nimport Gene from \"@/models/Gene\";\nimport httpInstance from \"./httpInstance\";\n\n/**\n * Expected Gene model returned from the RGD Rest API\n */\ninterface GeneDTO\n{\n  geneRgdId: number;\n  geneSymbol: string;\n  geneName: string;\n  geneType: string;\n  mapKey: number;\n  chr: string;\n  startPos: number;\n  stopPos: number;\n  strand: '+' | '-';\n  orthologs: number[];\n}\n\n/**\n * Converts RGD Gene model to our internal Gene model\n */\nfunction getGeneFromGeneDTO(dto: GeneDTO, speciesName?: string)\n{\n  let formattedOrthologs = null;\n  if (dto.orthologs)\n  {\n    const orthologIds = Object.values(dto.orthologs);\n    formattedOrthologs = orthologIds.flat();\n  }\n\n  return new Gene({\n    mapKey: dto.mapKey,\n    speciesName: speciesName,\n    symbol: dto.geneSymbol,\n    name: dto.geneName,\n    rgdId: dto.geneRgdId,\n    chromosome: dto.chr,\n    start: dto.startPos,\n    stop: dto.stopPos,\n    backboneStart: dto.startPos,\n    backboneStop: dto.stopPos,\n    orthologs: formattedOrthologs ? formattedOrthologs : [],\n  });\n}\n\ninterface OrthologGeneSetDTO\n{\n  gene: GeneDTO,\n  orthologs: {\n    [key: string]: GeneDTO[]\n  }\n}\n\ninterface OrthologsPerMap\n{\n  /** Keyed on map key */\n  [key: string]: Gene[]\n}\n\n/**\n * Converts RGD ortholog genes into our internal Gene model and maps them to a map key\n */\nfunction getOrthologsFromOrthologGeneSetDTO(dto: OrthologGeneSetDTO)\n{\n  const orthologsByMapKey: OrthologsPerMap = {};\n  for (const mapKey in dto)\n  {\n    dto.orthologs[mapKey]?.forEach(orthologGeneDTO => {\n      if (mapKey in orthologsByMapKey)\n      {\n        orthologsByMapKey[mapKey].push(getGeneFromGeneDTO(orthologGeneDTO));\n      }\n      else\n      {\n        orthologsByMapKey[mapKey] = [getGeneFromGeneDTO(orthologGeneDTO)];\n      }\n    });\n  }\n\n  return orthologsByMapKey;\n}\n\nexport default class GeneApi\n{\n  static async getGenesBySymbol(mapKey: Number, speciesName: string, symbolPrefix: String)\n  {\n    const res = await httpInstance.get<GeneDTO[]>(`/vcmap/genes/${mapKey}?symbolPrefix=${symbolPrefix}`);\n    const geneList: Gene[] = res.data.map(dto => getGeneFromGeneDTO(dto, speciesName));\n    return geneList;\n  }\n\n  static async getGenesByRegion(chromosome: String, start: number, stop: number, mapKey: number, speciesName: string, comparativeSpeciesIds: number[])\n  {\n    const roundedStart = Math.round(start);\n    const roundedStop = Math.round(stop);\n    const startTime = Date.now();\n\n    \n\n    // const res = await httpInstance.get<GeneDTO[]>(`/vcmap/genes/${mapKey}/${chromosome}/${roundedStart}/${roundedStop}`);\n    const res = await httpInstance.get<GeneDTO[]>(`/vcmap/genes/${mapKey}/${chromosome}/${roundedStart}/${roundedStop}?orthologMapKeys=${comparativeSpeciesIds.toString()}`);\n    const geneList: Gene[] = res.data.map(dto => getGeneFromGeneDTO(dto, speciesName));\n    logger.debug(`Genes By Region API: ${Date.now() - startTime} ms`, {\n      chromosome,\n      start,\n      stop,\n      mapKey,\n      speciesName,\n      comparativeSpeciesIds,\n    });\n\n    return geneList;\n  }\n\n  static async getGeneOrthologs(mapKey: Number, chromosome: String, start: Number, stop: Number, compMapKeys: Number[])\n  {\n    let mapKeyString = '';\n    for (let index = 0; index < compMapKeys.length; index++)\n    {\n      const key = compMapKeys[index];\n      index == compMapKeys.length -1 ? mapKeyString += key : mapKeyString += key + ',';\n    }\n    const res = await httpInstance.get<OrthologGeneSetDTO[]>(`/vcmap/genes/orthologs/${mapKey}/${chromosome}/${start}/${stop}}?mapKeys=${mapKeyString.toString()}`);\n    \n    const orthologList = new Map<string, OrthologsPerMap>();\n    res.data.forEach(orthologGeneSetDTO => {\n      const orthologs = getOrthologsFromOrthologGeneSetDTO(orthologGeneSetDTO);\n      orthologList.set(orthologGeneSetDTO.gene.geneSymbol, orthologs);\n    });\n    return orthologList;\n  }\n}","/**\n * Example app config. Copy and paste this file into this same directory (<root>/app/config/) \n * and rename it to `app.config.ts`\n *\n * API_BASE_URL: The fully qualified URL (with http scheme) to the RGD API web services (e.g. 'https://dev.rgd.mcw.edu/rdgws')\n */\n\nexport default {\n  API_BASE_URL: 'https://rest.rgd.mcw.edu/rgdws/'\n};\n","import Axios from 'axios';\nimport config from '@/../config/app.config';\nimport logger from '@/logger';\n\nif (!config.API_BASE_URL)\n{\n  logger.warn('API_BASE_URL is not defined in your app configuration');\n}\n\nconst axiosInstance = Axios.create({\n  baseURL: config.API_BASE_URL\n});\n\nexport default axiosInstance;","import { createLogger, VueLogger } from 'vue-logger-plugin';\n\nexport type VCMapLogger = VueLogger & { \n  time: typeof console.time;\n  timeEnd: typeof console.timeEnd;\n};\n\nconst LOG_LEVEL = (process.env.NODE_ENV === 'development') ? 'debug' : 'warn';\n\nconst logger = createLogger({\n  enabled: true,\n  level: LOG_LEVEL,\n}) as VCMapLogger;\n\n\n// Add logger.time methods to our custom logger\nlogger.time = (message: string) => {\n  if (LOG_LEVEL === 'debug')\n    console.time(`[TIME] ${message}`);\n};\nlogger.timeEnd = (message: string) => {\n  if (LOG_LEVEL === 'debug')\n    console.timeEnd(`[TIME] ${message}`);\n};\n\nexport default logger;","<template>\n  <router-view/>\n</template>\n\n<style lang=\"scss\">\n/** Project wide SCSS */\n#app {\n  font-family: Avenir, Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  color: #2c3e50;\n}\n\n.logo\n{\n  height: 4rem;\n}\n\n.version-label\n{\n  font-size: 0.75rem;\n  margin-left: 0.5rem;\n}\n\n.grid\n{\n  &.unpadded\n  {\n    padding: 0;\n    div[class^=\"col-\"]\n    {\n      padding-top: 0.1rem;\n      padding-bottom: 0;\n    }\n  }\n\n  div.bold\n  {\n    font-weight: bold;\n  }\n}\n\n.label.small\n{\n  font: normal 8px sans-serif;\n}\n\n.label.medium\n{\n  font: normal 11px sans-serif;\n}\n\n.label.bold\n{\n  font-style: bold;\n}\n</style>\n","import { render } from \"./App.vue?vue&type=template&id=3db6875f\"\nconst script = {}\n\nimport \"./App.vue?vue&type=style&index=0&id=3db6875f&lang=scss\"\n\nimport exportComponent from \"/home/rgdpub/vcmap-ui/app/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-34a4f939\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = [\"x\", \"y\"]\n\nimport SyntenySection from '@/models/SyntenySection';\n\ninterface Props\n{\n  syntenySection: SyntenySection;\n}\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'ChromosomeLabelSVG',\n  props: {\n    syntenySection: null\n  },\n  setup(__props: any) {\n\n\n\nreturn (_ctx: any,_cache: any) => {\n  return (__props.syntenySection.height > 15)\n    ? (_openBlock(), _createElementBlock(\"text\", {\n        key: 0,\n        class: \"chromosome-label\",\n        x: __props.syntenySection.posX1 + (__props.syntenySection.width / 2),\n        y: __props.syntenySection.posY1 + (__props.syntenySection.height / 2),\n        \"dominant-baseline\": \"middle\",\n        \"text-anchor\": \"middle\"\n      }, _toDisplayString(__props.syntenySection.chromosome), 9, _hoisted_1))\n    : _createCommentVNode(\"\", true)\n}\n}\n\n})","import script from \"./ChromosomeLabelSVG.vue?vue&type=script&lang=ts&setup=true\"\nexport * from \"./ChromosomeLabelSVG.vue?vue&type=script&lang=ts&setup=true\"\n\nimport \"./ChromosomeLabelSVG.vue?vue&type=style&index=0&id=34a4f939&lang=scss&scoped=true\"\n\nimport exportComponent from \"/home/rgdpub/vcmap-ui/app/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-34a4f939\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { unref as _unref, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, Fragment as _Fragment, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-0c3a28ac\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = [\"x1\", \"x2\", \"y1\", \"y2\"]\nconst _hoisted_2 = [\"x1\", \"x2\", \"y1\", \"y2\"]\n\nimport SyntenySection from '@/models/SyntenySection';\nimport SVGConstants from '@/utils/SVGConstants';\n\ninterface Props\n{\n  syntenySection: SyntenySection;\n}\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'SyntenyLinesSVG',\n  props: {\n    syntenySection: null\n  },\n  setup(__props: any) {\n\n\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(_Fragment, null, [\n    (__props.syntenySection.isHovered)\n      ? (_openBlock(), _createElementBlock(\"line\", {\n          key: 0,\n          class: \"synteny-line\",\n          x1: __props.syntenySection.posX1 + __props.syntenySection.width,\n          x2: _unref(SVGConstants).backboneXPosition,\n          y1: __props.syntenySection.posY1,\n          y2: (__props.syntenySection.isInverted) ? __props.syntenySection.posY2 : __props.syntenySection.posY1\n        }, null, 8, _hoisted_1))\n      : _createCommentVNode(\"\", true),\n    (__props.syntenySection.isHovered)\n      ? (_openBlock(), _createElementBlock(\"line\", {\n          key: 1,\n          class: \"synteny-line\",\n          x1: __props.syntenySection.posX1 + __props.syntenySection.width,\n          x2: _unref(SVGConstants).backboneXPosition,\n          y1: __props.syntenySection.posY2,\n          y2: (__props.syntenySection.isInverted) ? __props.syntenySection.posY1 : __props.syntenySection.posY2\n        }, null, 8, _hoisted_2))\n      : _createCommentVNode(\"\", true)\n  ], 64))\n}\n}\n\n})","import script from \"./SyntenyLinesSVG.vue?vue&type=script&lang=ts&setup=true\"\nexport * from \"./SyntenyLinesSVG.vue?vue&type=script&lang=ts&setup=true\"\n\nimport \"./SyntenyLinesSVG.vue?vue&type=style&index=0&id=0c3a28ac&lang=scss&scoped=true\"\n\nimport exportComponent from \"/home/rgdpub/vcmap-ui/app/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-0c3a28ac\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-374645f1\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = [\"x1\", \"x2\", \"y1\", \"y2\"]\n\nimport SyntenySection from '@/models/SyntenySection';\n\ninterface Props\n{\n  gapSection: SyntenySection;\n}\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'GapSVG',\n  props: {\n    gapSection: null\n  },\n  setup(__props: any) {\n\n\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"line\", {\n    class: \"synteny-gap\",\n    x1: __props.gapSection.posX1,\n    x2: __props.gapSection.posX2,\n    y1: __props.gapSection.posY1,\n    y2: __props.gapSection.posY2\n  }, null, 8, _hoisted_1))\n}\n}\n\n})","import script from \"./GapSVG.vue?vue&type=script&lang=ts&setup=true\"\nexport * from \"./GapSVG.vue?vue&type=script&lang=ts&setup=true\"\n\nimport \"./GapSVG.vue?vue&type=style&index=0&id=374645f1&lang=scss&scoped=true\"\n\nimport exportComponent from \"/home/rgdpub/vcmap-ui/app/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-374645f1\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = [\"x1\", \"y1\", \"x2\", \"y2\", \"stroke\"]\nconst _hoisted_2 = [\"x1\", \"y1\", \"x2\", \"y2\", \"stroke\"]\nconst _hoisted_3 = [\"x\", \"y\"]\nconst _hoisted_4 = [\"x\", \"y\"]\n\nimport SyntenySection from \"@/models/SyntenySection\";\n\ninterface Props\n{\n  gaplessBlock: SyntenySection\n}\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'OverviewSyntenyLabelsSVG',\n  props: {\n    gaplessBlock: null\n  },\n  setup(__props: any) {\n\nconst props = __props as {\n  gaplessBlock: SyntenySection\n};\n\nconst LABEL_LINE_LENGTH = 45;\n\n\n\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(_Fragment, null, [\n    _createElementVNode(\"line\", {\n      x1: props.gaplessBlock.startLabel.posX,\n      y1: props.gaplessBlock.startLabel.posY + 1,\n      x2: props.gaplessBlock.startLabel.posX + LABEL_LINE_LENGTH,\n      y2: props.gaplessBlock.startLabel.posY + 1,\n      stroke: props.gaplessBlock.elementColor\n    }, null, 8, _hoisted_1),\n    _createElementVNode(\"line\", {\n      x1: props.gaplessBlock.stopLabel.posX,\n      y1: props.gaplessBlock.stopLabel.posY - 1,\n      x2: props.gaplessBlock.stopLabel.posX + LABEL_LINE_LENGTH,\n      y2: props.gaplessBlock.stopLabel.posY - 1,\n      stroke: props.gaplessBlock.elementColor\n    }, null, 8, _hoisted_2),\n    _createElementVNode(\"text\", {\n      class: \"label small\",\n      \"dominant-baseline\": \"hanging\",\n      x: props.gaplessBlock.startLabel.posX + 2,\n      y: props.gaplessBlock.startLabel.posY + 1.5\n    }, _toDisplayString(props.gaplessBlock.startLabel.text), 9, _hoisted_3),\n    _createElementVNode(\"text\", {\n      class: \"label small\",\n      \"dominant-baseline\": \"auto\",\n      x: props.gaplessBlock.stopLabel.posX + 2,\n      y: props.gaplessBlock.stopLabel.posY - 1.5\n    }, _toDisplayString(props.gaplessBlock.stopLabel.text), 9, _hoisted_4)\n  ], 64))\n}\n}\n\n})","import script from \"./OverviewSyntenyLabelsSVG.vue?vue&type=script&lang=ts&setup=true\"\nexport * from \"./OverviewSyntenyLabelsSVG.vue?vue&type=script&lang=ts&setup=true\"\n\nconst __exports__ = script;\n\nexport default __exports__","/**\n * Helper method to get the coordinates of an event in the SVG viewbox\n */\nexport function getMousePosSVG(svg: SVGSVGElement | null, event: any)\n{\n  if (svg == null)\n  {\n    // For some reason, trying to create an instance of DOMPoint here causes a reference error in our unit tests\n    return { y: 0, x: 0 };\n  }\n\n  let p = svg.createSVGPoint();\n  p.x = event.clientX;\n  p.y = event.clientY;\n  const ctm = svg.getScreenCTM()?.inverse();\n  p = p.matrixTransform(ctm);\n  return p;\n}","import { onMounted, ref } from \"vue\";\nimport { getMousePosSVG } from \"@/utils/SVGHelpers\";\n\nexport default function useMouseBasePairPos() {\n  let svg: SVGSVGElement | null;\n  const mouseYPos = ref<number>();\n\n  onMounted(() => {\n    svg = document.querySelector('svg');\n  });\n  \n  /**\n   * Method to calculate the basepair position by SVG position\n   */\n  const getBasePairPositionFromSVG = (svgY: number, svgStart: number, svgStop: number, basePairStart: number, basePairStop: number) => {\n    mouseYPos.value = svgY;\n    return basePairStart + (svgY - svgStart) * ((basePairStop - basePairStart) / (svgStop - svgStart));\n  };\n\n  /**\n   * Method to calculate the basepair position from a MouseEvent\n   */\n  const getBasePairPositionFromMouseEvent = (event: MouseEvent, svgStart: number, svgStop: number, basePairStart: number, basePairStop: number) => {\n    const mousePos = getMousePosSVG(svg, event);\n    mouseYPos.value = mousePos.y;\n    return basePairStart + (mousePos.y - svgStart) * ((basePairStop - basePairStart) / (svgStop - svgStart));\n  };\n\n  return {\n    getBasePairPositionFromSVG,\n    getBasePairPositionFromMouseEvent,\n    mouseYPos,\n  };\n}","import { GeneDatatrack } from \"@/models/DatatrackSection\";\nimport Gene from \"@/models/Gene\";\nimport { GeneLabel } from \"@/models/Label\";\nimport OrthologLine from \"@/models/OrthologLine\";\nimport SelectedData from \"@/models/SelectedData\";\nimport { VCMapState } from \"@/store\";\nimport { sortGeneList } from \"@/utils/DataPanelHelpers\";\nimport { getSelectedDataAndGeneIdsFromOrthologLine } from \"@/utils/OrthologHandler\";\nimport { Store } from \"vuex\";\n\nexport default function useSyntenyAndDataInteraction(store: Store<VCMapState>) {\n  const setHoverOnGeneLinesAndDatatrackSections = (lines: OrthologLine[], isHovered: boolean) => {\n    if (lines.length > 0) {\n      const line = lines[0];\n      const dataPanelSelected = [line, ...line.chainedOrthologLines].some(l => {\n        return store.state.selectedGeneIds.includes(l.startGene.rgdId) || store.state.selectedGeneIds.includes(l.endGene.rgdId);\n      });\n      const isLineHovered = (isHovered && !dataPanelSelected);\n      [line, ...line.chainedOrthologLines].forEach(l => {\n        l.isHovered = isLineHovered;\n        if (l.startGeneDatatrack) l.startGeneDatatrack.isHovered = isLineHovered;\n        if (l.endGeneDatatrack) l.endGeneDatatrack.isHovered = isLineHovered;\n      });\n    }\n  };\n\n  const onDatatrackSectionClick = (event: any, section: GeneDatatrack, geneList: Map<number, Gene>) => {\n    // NOTE: ignore variant datatrack sections for now\n    if (!section.gene?.rgdId || section.type === 'variant' || section.type === 'qtl') return;\n\n    section.isHovered = false;\n\n    // If clicked section already selected, just reset the selectedGeneId state\n    if (store.state.selectedGeneIds.includes(section.gene?.rgdId || -1)) {\n      store.dispatch('setSelectedGeneIds', []);\n      store.dispatch('setSelectedData', null);\n      return;\n    }\n\n    // If shift key is held, we'll just add to the selections, otherwise, reset first\n    const geneIds: number[] = event.shiftKey ? [...store.state.selectedGeneIds] : [];\n\n    const newSelectedData: SelectedData[] = [];\n\n    if (section.gene) {\n      // Reset hover status of all ortholog lines and datatrack sections\n      if (section.lines.length > 0) {\n        setHoverOnGeneLinesAndDatatrackSections(section.lines, false);\n      }\n\n      // Keep the main gene of the label at the top of the list\n      const geneLabel = section.label ? section.label as GeneLabel : undefined;\n      const mainGene = geneLabel ? geneLabel.mainGene : section.gene;\n      const otherLabelGenes = geneLabel ? geneLabel.genes.filter(g => g.rgdId !== geneLabel.mainGene.rgdId) : [];\n      sortGeneList(otherLabelGenes);\n\n      //\n      // Add orthologs of all genes belonging to the datatrack's gene label to SelectedData\n      [mainGene, ...otherLabelGenes].forEach((gene: Gene) => {\n        newSelectedData.push(new SelectedData(gene.clone(), 'Gene'));\n        geneIds.push(gene.rgdId);\n\n        const geneData = geneList.get(gene.rgdId);\n\n        // Get orthologs from selected gene\n        if (geneData?.orthologs && geneData.orthologs?.length > 0) {\n          const orthoIds = geneData.orthologs;\n          geneIds.push(...orthoIds);\n\n          const orthoData = orthoIds.map((id: number) => {\n            return geneList.get(id);\n          });\n          orthoData.forEach(data => {\n            if (data != null)\n              newSelectedData.push(new SelectedData(data.clone(), 'Gene'));\n          });\n        }\n\n        // Get orthologs from chained ortholog lines\n        if (section.lines.length > 0) {\n          const {\n            selectedData: selectedOrthologs,\n          } = getSelectedDataAndGeneIdsFromOrthologLine(section.lines[0]);\n\n          selectedOrthologs.forEach(ortho => {\n            const gene = ortho.genomicSection as Gene;\n            if (!geneIds.includes(gene.rgdId)) {\n              geneIds.push(gene.rgdId);\n              newSelectedData.push(ortho);\n            }\n          });\n        }\n      });\n    }\n\n    store.dispatch('setSelectedGeneIds', geneIds || []);\n    if (event.shiftKey) {\n      const selectedDataArray = [...(store.state.selectedData || []), ...newSelectedData];\n      store.dispatch('setSelectedData', selectedDataArray);\n    }\n    else {\n      store.dispatch('setSelectedData', newSelectedData);\n    }\n  };\n\n  const onGeneLabelClick = (event: any, label: GeneLabel, geneList: Map<number, Gene>, orthologLines: OrthologLine[]) => {\n    if (store.state.selectedGeneIds.includes(label.mainGene.rgdId)) {\n      store.dispatch('setSelectedGeneIds', []);\n      store.dispatch('setSelectedData', null);\n    }\n    const geneIds: number[] = event.shiftKey ? [...store.state.selectedGeneIds] : [];\n\n    // Keep the main gene of the label at the top of the list\n    const mainGene = label.mainGene;\n    const otherLabelGenes = label.genes.filter(g => g.rgdId !== label.mainGene.rgdId);\n\n    const newSelectedData: SelectedData[] = [];\n    sortGeneList(otherLabelGenes);\n    [mainGene, ...otherLabelGenes].forEach((gene: Gene) => {\n      newSelectedData.push(new SelectedData(gene.clone(), 'Gene'));\n      geneIds.push(gene.rgdId);\n\n      // Retrieve ortholog data\n      const geneData = geneList.get(gene.rgdId);\n\n      if (geneData == null)\n      {\n        return;\n      }\n\n      // Get orthologs from selected gene\n      if (geneData.orthologs && geneData.orthologs.length > 0)\n      {\n        const orthoIds = geneData.orthologs;\n        geneIds.push(...orthoIds);\n\n        const orthoData = orthoIds.map((id: number) => {\n          return geneList.get(id);\n        });\n\n        orthoData.forEach(data => {\n          if (data != null)\n            newSelectedData.push(new SelectedData(data.clone(), 'Gene'));\n        });\n      }\n\n      // Find ortholog line that (if any that belongs to this gene)\n      const lines = orthologLines.filter(l => l.startGene.rgdId === geneData.rgdId || l.endGene.rgdId === geneData.rgdId);\n      // Get orthologs from chained ortholog lines (this will let us pick up non-backbone orthologs of this gene)\n      if (lines != null && lines.length > 0)\n      {\n        const {\n          selectedData: selectedOrthologs,\n        } = getSelectedDataAndGeneIdsFromOrthologLine(lines[0]);\n\n        selectedOrthologs.forEach(ortho => {\n          const gene = ortho.genomicSection as Gene;\n          if (!geneIds.includes(gene.rgdId)) {\n            geneIds.push(gene.rgdId);\n            newSelectedData.push(ortho);\n          }\n        });\n      }\n    });\n\n    store.dispatch('setSelectedGeneIds', geneIds || []);\n    if (event.shiftKey) {\n      const selectedDataArray = [...(store.state.selectedData || []), ...newSelectedData];\n      store.dispatch('setSelectedData', selectedDataArray);\n    } else {\n      store.dispatch('setSelectedData', newSelectedData);\n    }\n  };\n\n  return {\n    setHoverOnGeneLinesAndDatatrackSections,\n    onDatatrackSectionClick,\n    onGeneLabelClick,\n  };\n}","import { defineComponent as _defineComponent } from 'vue'\nimport { openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, unref as _unref, renderList as _renderList, Fragment as _Fragment, createElementBlock as _createElementBlock, createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, normalizeClass as _normalizeClass, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-ef073d0a\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = [\"onMouseenter\", \"onMouseleave\", \"onMousemove\", \"onClick\", \"y\", \"x\", \"width\", \"height\", \"fill\"]\nconst _hoisted_2 = [\"onMouseenter\", \"onMouseleave\", \"onMousemove\", \"y\", \"x\", \"width\", \"height\", \"fill\"]\nconst _hoisted_3 = [\"x\", \"y\"]\nconst _hoisted_4 = [\"x\", \"y\"]\nconst _hoisted_5 = [\"x\", \"y\"]\nconst _hoisted_6 = [\"x\", \"y\"]\nconst _hoisted_7 = [\"x\", \"y\"]\nconst _hoisted_8 = [\"x1\", \"x2\", \"y1\", \"y2\"]\nconst _hoisted_9 = [\"onMouseenter\", \"onMouseleave\", \"onClick\", \"y\", \"x\", \"width\", \"height\", \"fill\", \"fill-opacity\", \"stroke\"]\n\nimport { watch, onMounted, ref } from 'vue';\nimport SelectedData, { SelectedDataType } from '@/models/SelectedData';\nimport SyntenyRegion from '@/models/SyntenyRegion';\nimport SyntenySection from '@/models/SyntenySection';\nimport DatatrackSection, { GeneDatatrack } from '@/models/DatatrackSection';\nimport { computed, toRefs } from '@vue/reactivity';\nimport { useStore } from 'vuex';\nimport { key } from '@/store';\nimport { Formatter } from '@/utils/Formatter';\nimport { VCMapSVGElement } from '@/models/VCMapSVGElement';\nimport ChromosomeLabelSVG from './ChromosomeLabelSVG.vue';\nimport SyntenyLinesSVG from './SyntenyLinesSVG.vue';\nimport GapSVG from './GapSVG.vue';\nimport BackboneSelection from '@/models/BackboneSelection';\nimport OverviewSyntenyLabelsSVG from './OverviewSyntenyLabelsSVG.vue';\nimport { PANEL_SVG_START, PANEL_SVG_STOP } from '@/utils/SVGConstants';\nimport useMouseBasePairPos from '@/composables/useMouseBasePairPos';\nimport GenomicSection from '@/models/GenomicSection';\nimport Gene from '@/models/Gene';\nimport DatatrackSet from '@/models/DatatrackSet';\nimport { getSelectedDataAndGeneIdsFromOrthologLine } from '@/utils/OrthologHandler';\nimport useSyntenyAndDataInteraction from '@/composables/useSyntenyAndDataInteraction';\n\ninterface Props\n{\n  showSyntenyOnHover?: boolean;\n  showStartStop?: boolean;\n  showChromosome?: boolean;\n  selectOnClick?: boolean;\n  region: SyntenyRegion;\n  syntenyHoverSvgY?: number | null;\n  geneList: Map<number, Gene>;\n}\n\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'SectionSVG',\n  props: {\n    showSyntenyOnHover: { type: Boolean },\n    showStartStop: { type: Boolean },\n    showChromosome: { type: Boolean },\n    selectOnClick: { type: Boolean },\n    region: null,\n    syntenyHoverSvgY: null,\n    geneList: null\n  },\n  emits: [\"synteny-hover\"],\n  setup(__props: any, { emit }: { emit: ({\n  (e: 'synteny-hover', svgY: number | null): void\n}), expose: any, slots: any, attrs: any }) {\n\nconst props = __props as {\n  showSyntenyOnHover?: boolean;\n  showStartStop?: boolean;\n  showChromosome?: boolean;\n  selectOnClick?: boolean;\n  region: SyntenyRegion;\n  syntenyHoverSvgY?: number | null;\n  geneList: Map<number, Gene>;\n};\n\nconst HOVER_HIGHLIGHT_COLOR = '#FF7C60';\nconst SELECTED_HIGHLIGHT_COLOR = '#FF4822';\nconst SYNTENY_LABEL_SHIFT = 10;\n\nconst store = useStore(key);\n\nconst { getBasePairPositionFromMouseEvent, getBasePairPositionFromSVG, mouseYPos } = useMouseBasePairPos();\nconst { setHoverOnGeneLinesAndDatatrackSections, onDatatrackSectionClick } = useSyntenyAndDataInteraction(store);\n\n\n\n\n\n//Converts each property in this object to its own reactive prop\ntoRefs(props);\nconst basePairPositionLabel = ref<string>('');\n\nonMounted(() => {\n  highlightSelections(store.state.selectedGeneIds);\n});\n\nwatch([() => store.state.selectedGeneIds, () => props.region], () => {\n  highlightSelections(store.state.selectedGeneIds);\n});\n\nwatch(() => props.syntenyHoverSvgY, () => {\n  // If backbone is not being hovered but another synteny section is emitting a mouse event,\n  // show the bp position on this backbone section\n  if (!isRegionHovered.value && props.syntenyHoverSvgY != null)\n  {\n    updatePositionLabelFromSVG(props.syntenyHoverSvgY);\n  }\n});\n\nconst level1Blocks = computed(() => {\n  return props.region.syntenyBlocks.filter(b => b.chainLevel === 1);\n});\nconst level2Blocks = computed(() => {\n  return props.region.syntenyBlocks.filter(b => b.chainLevel === 2);\n});\nconst level1Gaps = computed(() => {\n  return props.region.syntenyGaps.filter(g => g.chainLevel === 1);\n});\nconst level2Gaps = computed(() => {\n  return props.region.syntenyGaps.filter(g => g.chainLevel === 2);\n});\nconst datatrackSets = computed(() => {\n  return (props.region.datatrackSets);\n});\nconst isRegionHovered = computed(() => {\n  return props.region.syntenyBlocks.some(b => b.isHovered);\n});\n\nconst showBasePairLine = computed(() => {\n  return props.syntenyHoverSvgY != null && mouseYPos.value != null && !props.showStartStop\n    && (isRegionHovered.value || basePairPositionLabel.value !== '');\n});\n\nconst onMouseEnter = (section: SyntenySection | DatatrackSection, type: SelectedDataType) => {\n\n  section.isHovered = true;\n\n  // NOTE: ignore qtl datatracks for now\n  if (section.type === 'qtl') return;\n\n  const genesAreSelected = store.state.selectedGeneIds.length > 0;\n  let selectedDataList: SelectedData[] = [];\n  if (section.type === 'gene')\n  {\n    //\n    // Gene datatrack section\n    const geneSection = section as GeneDatatrack;\n    setHoverOnGeneLinesAndDatatrackSections(geneSection?.lines, true);\n\n    // Only update the selected data panel if no Genes are already selected\n    if (!genesAreSelected)\n    {\n      if (geneSection.lines.length > 0) {\n        const {\n          selectedData: selectedOrthologs,\n        } = getSelectedDataAndGeneIdsFromOrthologLine(geneSection.lines[0]);\n        selectedDataList.push(...selectedOrthologs);\n      }\n      else {\n        selectedDataList.push(new SelectedData(geneSection.gene.clone(), 'Gene'));\n      }\n    }\n  }\n  else\n  {\n    //\n    // Synteny section\n    if (!genesAreSelected)\n      if (section.type === 'variant')\n      {\n        selectedDataList.push(new SelectedData(section, 'variantDensity'));\n      } else\n      {\n        selectedDataList.push(new SelectedData(section, type));\n      }\n  }\n\n  if (selectedDataList.length > 0)\n  {\n    store.dispatch('setSelectedData', selectedDataList);\n  }\n};\n\nconst onMouseLeave = (section: DatatrackSection | SyntenySection) => {\n  emit('synteny-hover', null);\n  basePairPositionLabel.value = '';\n\n  if (section)\n  {\n    section.isHovered = false;\n  }\n  \n  // Only reset data onMouseLeave if there isn't a selected gene\n  if (store.state.selectedGeneIds.length === 0) {\n    store.dispatch('setSelectedData', null);\n  }\n\n  if (section.type === 'gene')\n  {\n    const geneSection = section as GeneDatatrack;\n    setHoverOnGeneLinesAndDatatrackSections(geneSection.lines, false);\n  }\n};\n\nconst onSyntenyBlockClick = (section: GenomicSection) => {\n  const selectedBackboneRegion = store.state.selectedBackboneRegion as BackboneSelection;\n  const backboneChromosome = store.state.chromosome;\n  if (backboneChromosome && section.backboneAlignment)\n  {\n    const basePairStart = section.backboneAlignment.start;\n    const basePairStop = section.backboneAlignment.stop;\n    selectedBackboneRegion.setViewportSelection(basePairStart, basePairStop);\n    store.dispatch('setDetailedBasePairRequest', { start: basePairStart, stop: basePairStop });\n  }\n};\n\nconst getSectionFill = (section: VCMapSVGElement) => {\n  if (section.isSelected) {return SELECTED_HIGHLIGHT_COLOR;}\n  if (section.isHovered) {return HOVER_HIGHLIGHT_COLOR;}\n  return section.elementColor;\n};\n\nconst getDatatrackClass = (datatrackSet: DatatrackSet) => {\n  if (datatrackSet.type === 'variant')\n  {\n    return 'block-section variant';\n  }\n  else\n  {\n    return 'block-section';\n  }\n};\n\nconst highlightSelections = (selectedGeneIds: number[]) => {\n  // Look through the sections and highlight based on selected genes\n  datatrackSets.value.forEach((set) => {\n    if (set.datatracks && set.datatracks.length > 0 && set.datatracks[0].type === 'gene')\n    {\n      // TODO: Feels a bit fragile to tell the type-checker to treat this as GeneDatatrack[]. Maybe there\n      // is a better way to organize our different types of DatatrackSection models to allow Typescript to\n      // \"know\" that this is a GeneDatatrack[] type. We should be aware that \"as\" will not throw an error if\n      // set.datatracks is not of type GeneDatatrack[].\n      (set.datatracks as GeneDatatrack[]).forEach(section => {\n        if (section.gene == null)\n        {\n          return;\n        }\n\n        if (selectedGeneIds.includes(section.gene.rgdId)) \n        {\n          section.isSelected = true;\n        } \n        else \n        {\n          section.isSelected = false;\n        }\n      });\n    }\n  });\n  // Highlight the line if needed, and make sure genes highlighted too\n  // (this ensures backbone and comparitive genes are highlighted, regardless of which is clicked)\n  props.region.orthologLines.forEach((line) => {\n    if (selectedGeneIds.includes(line.backboneGene.rgdId || -1) ||\n        selectedGeneIds.includes(line.offBackboneGene.rgdId || -1)) \n    {\n      line.isSelected = true;\n      if (line.backboneGeneDatatrack) line.backboneGeneDatatrack.isSelected = true;\n      if (line.offBackboneGeneDatatrack) line.offBackboneGeneDatatrack.isSelected = true;\n    } \n    else \n    {\n      line.isSelected = false;\n    }\n  });\n};\n\nconst calculateSectionStartPositionLabel = (section: SyntenySection) => {\n  const hiddenHeight = PANEL_SVG_START - section.posY1;\n  const basePairPerSVG = section.length / section.height;\n  // Subtract or multiple the number of hidden basepairs above the visible window based on inversion\n  const labelBasePair = section.isInverted ? section.speciesStart - (hiddenHeight * basePairPerSVG) : section.speciesStart + (hiddenHeight * basePairPerSVG);\n  return Formatter.convertBasePairToLabel(Math.round(labelBasePair));\n};\n\nconst calculateSectionStopPositionLabel = (section: SyntenySection) => {\n  const hiddenHeight = section.posY2 - PANEL_SVG_STOP;\n  const basePairPerSVG = section.length / section.height;\n  // Subtract or multiple the number of hidden basepairs below the visible window based on inversion\n  const labelBasePair = !section.isInverted ? section.speciesStop - (hiddenHeight * basePairPerSVG) : section.speciesStop + (hiddenHeight * basePairPerSVG);\n  return Formatter.convertBasePairToLabel(Math.round(labelBasePair));\n};\n\nconst updatePositionLabelFromMouseEvent = (event: MouseEvent, blockSection: SyntenySection) => {\n  const basePairPos = getBasePairPositionFromMouseEvent(event, blockSection.posY1, blockSection.posY2, blockSection.speciesStart, blockSection.speciesStop);\n  basePairPositionLabel.value = Formatter.convertBasePairToLabel(basePairPos) || '';\n\n  if (isRegionHovered.value)\n  {\n    // Emit our svg y position so that other synteny sections can see it\n    emit('synteny-hover', mouseYPos.value ?? null);\n  }\n};\n\nconst getBlockFromSVGPosition = (svgY: number) => {\n  // First check the gapless block to see if we even need to loop through the synteny blocks\n  if (props.region.gaplessBlock.posY1 <= svgY && props.region.gaplessBlock.posY2 >= svgY)\n  {\n    // Loop through its synteny blocks to identify which block is at this svg position\n    for (let i = 0; i < props.region.syntenyBlocks.length; i++)\n    {\n      const block = props.region.syntenyBlocks[i];\n      if (block.posY1 <= svgY && block.posY2 >= svgY)\n      {\n        return block;\n      }\n    }\n  }\n\n  return null;\n};\n\nconst updatePositionLabelFromSVG = (svgY: number) => {\n  const blockSection = getBlockFromSVGPosition(svgY);\n  if (blockSection != null)\n  {\n    const basePairPos = getBasePairPositionFromSVG(svgY, blockSection.posY1, blockSection.posY2, blockSection.speciesStart, blockSection.speciesStop);\n    basePairPositionLabel.value = Formatter.convertBasePairToLabel(basePairPos) || '';\n  }\n  else\n  {\n    basePairPositionLabel.value = '';\n  }\n};\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(_Fragment, null, [\n    (__props.showStartStop && __props.region.gaplessBlock.startLabel.isVisible)\n      ? (_openBlock(), _createBlock(OverviewSyntenyLabelsSVG, {\n          key: 0,\n          \"gapless-block\": __props.region.gaplessBlock\n        }, null, 8, [\"gapless-block\"]))\n      : _createCommentVNode(\"\", true),\n    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(level1Gaps), (gapSection, index) => {\n      return (_openBlock(), _createBlock(GapSVG, {\n        key: index,\n        \"gap-section\": gapSection\n      }, null, 8, [\"gap-section\"]))\n    }), 128)),\n    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(level2Gaps), (gapSection, index) => {\n      return (_openBlock(), _createBlock(GapSVG, {\n        key: index,\n        \"gap-section\": gapSection\n      }, null, 8, [\"gap-section\"]))\n    }), 128)),\n    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(level1Blocks), (blockSection, index) => {\n      return (_openBlock(), _createElementBlock(_Fragment, { key: index }, [\n        _createElementVNode(\"rect\", {\n          class: \"block-section\",\n          onMouseenter: ($event: any) => (onMouseEnter(blockSection, 'trackSection')),\n          onMouseleave: ($event: any) => (onMouseLeave(blockSection)),\n          onMousemove: ($event: any) => (updatePositionLabelFromMouseEvent($event, blockSection)),\n          onClick: ($event: any) => (__props.selectOnClick ? onSyntenyBlockClick(blockSection) : () => {}),\n          y: blockSection.posY1,\n          x: blockSection.posX1,\n          width: blockSection.width,\n          height: blockSection.height,\n          fill: getSectionFill(blockSection),\n          \"fill-opacity\": 1\n        }, null, 40, _hoisted_1),\n        (__props.showChromosome)\n          ? (_openBlock(), _createBlock(ChromosomeLabelSVG, {\n              key: 0,\n              \"synteny-section\": blockSection\n            }, null, 8, [\"synteny-section\"]))\n          : _createCommentVNode(\"\", true)\n      ], 64))\n    }), 128)),\n    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(level2Blocks), (blockSection, index) => {\n      return (_openBlock(), _createElementBlock(_Fragment, { key: index }, [\n        _createElementVNode(\"rect\", {\n          class: \"level-2 block-section\",\n          onMouseenter: ($event: any) => (onMouseEnter(blockSection, 'trackSection')),\n          onMouseleave: ($event: any) => (onMouseLeave(blockSection)),\n          onMousemove: ($event: any) => (updatePositionLabelFromMouseEvent($event, blockSection)),\n          y: blockSection.posY1,\n          x: blockSection.posX1,\n          width: blockSection.width,\n          height: blockSection.height,\n          fill: getSectionFill(blockSection),\n          \"fill-opacity\": 1\n        }, null, 40, _hoisted_2),\n        (__props.showChromosome)\n          ? (_openBlock(), _createBlock(ChromosomeLabelSVG, {\n              key: 0,\n              \"synteny-section\": blockSection\n            }, null, 8, [\"synteny-section\"]))\n          : _createCommentVNode(\"\", true)\n      ], 64))\n    }), 128)),\n    (__props.region && __props.showSyntenyOnHover)\n      ? (_openBlock(true), _createElementBlock(_Fragment, { key: 1 }, _renderList(__props.region.syntenyBlocks, (blockSection, index) => {\n          return (_openBlock(), _createBlock(SyntenyLinesSVG, {\n            key: index,\n            \"synteny-section\": blockSection\n          }, null, 8, [\"synteny-section\"]))\n        }), 128))\n      : _createCommentVNode(\"\", true),\n    (!__props.showStartStop && __props.region.gaplessBlock.startLabel.isVisible && __props.region.gaplessBlock.height > 10 && __props.region.syntenyBlocks.some((section) => section.isHovered))\n      ? (_openBlock(), _createElementBlock(_Fragment, { key: 2 }, [\n          (__props.region.gaplessBlock.posY1 < _unref(PANEL_SVG_START) && __props.region.gaplessBlock.posY2 > _unref(PANEL_SVG_START))\n            ? (_openBlock(), _createElementBlock(\"text\", {\n                key: 0,\n                class: \"label small\",\n                x: __props.region.gaplessBlock.posX1 - SYNTENY_LABEL_SHIFT,\n                y: _unref(PANEL_SVG_START) + 10\n              }, _toDisplayString(calculateSectionStartPositionLabel(__props.region.gaplessBlock)), 9, _hoisted_3))\n            : (_openBlock(), _createElementBlock(\"text\", {\n                key: 1,\n                class: \"label small\",\n                \"dominant-baseline\": \"hanging\",\n                x: __props.region.gaplessBlock.posX1 - SYNTENY_LABEL_SHIFT,\n                y: __props.region.gaplessBlock.posY1\n              }, _toDisplayString(__props.region.gaplessBlock.startLabel.text), 9, _hoisted_4)),\n          (__props.region.gaplessBlock.posY2 > _unref(PANEL_SVG_STOP) && __props.region.gaplessBlock.posY1 < _unref(PANEL_SVG_STOP))\n            ? (_openBlock(), _createElementBlock(\"text\", {\n                key: 2,\n                class: \"label small\",\n                x: __props.region.gaplessBlock.posX1 - SYNTENY_LABEL_SHIFT,\n                y: _unref(PANEL_SVG_STOP) - 10\n              }, _toDisplayString(calculateSectionStopPositionLabel(__props.region.gaplessBlock)), 9, _hoisted_5))\n            : (_openBlock(), _createElementBlock(\"text\", {\n                key: 3,\n                class: \"label small\",\n                \"dominant-baseline\": \"auto\",\n                x: __props.region.gaplessBlock.posX1 - SYNTENY_LABEL_SHIFT,\n                y: __props.region.gaplessBlock.posY2\n              }, _toDisplayString(__props.region.gaplessBlock.stopLabel.text), 9, _hoisted_6))\n        ], 64))\n      : _createCommentVNode(\"\", true),\n    (_unref(showBasePairLine))\n      ? (_openBlock(), _createElementBlock(_Fragment, { key: 3 }, [\n          _createElementVNode(\"text\", {\n            class: \"label small\",\n            \"text-anchor\": \"end\",\n            \"dominant-baseline\": \"middle\",\n            x: __props.region.gaplessBlock.posX1 - 1,\n            y: _unref(mouseYPos)\n          }, _toDisplayString(basePairPositionLabel.value), 9, _hoisted_7),\n          _createElementVNode(\"line\", {\n            class: \"position-label\",\n            x1: __props.region.gaplessBlock.posX1,\n            x2: __props.region.gaplessBlock.posX1 + __props.region.gaplessBlock.width,\n            y1: _unref(mouseYPos),\n            y2: _unref(mouseYPos)\n          }, null, 8, _hoisted_8)\n        ], 64))\n      : _createCommentVNode(\"\", true),\n    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(datatrackSets), (datatrackSet, index) => {\n      return (_openBlock(), _createElementBlock(_Fragment, { key: index }, [\n        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(datatrackSet.datatracks, (datatrack, index) => {\n          return (_openBlock(), _createElementBlock(\"rect\", {\n            key: index,\n            class: _normalizeClass(getDatatrackClass(datatrackSet)),\n            onMouseenter: ($event: any) => (onMouseEnter(datatrack, 'Gene')),\n            onMouseleave: ($event: any) => (onMouseLeave(datatrack)),\n            onClick: ($event: any) => (_unref(onDatatrackSectionClick)($event, datatrack, __props.geneList)),\n            y: datatrack.posY1,\n            x: datatrack.posX1,\n            width: datatrack.width,\n            height: datatrack.height,\n            fill: getSectionFill(datatrack),\n            \"fill-opacity\": datatrack.opacity,\n            stroke: getSectionFill(datatrack)\n          }, null, 42, _hoisted_9))\n        }), 128))\n      ], 64))\n    }), 128))\n  ], 64))\n}\n}\n\n})","import script from \"./SectionSVG.vue?vue&type=script&lang=ts&setup=true\"\nexport * from \"./SectionSVG.vue?vue&type=script&lang=ts&setup=true\"\n\nimport \"./SectionSVG.vue?vue&type=style&index=0&id=ef073d0a&lang=scss&scoped=true\"\n\nimport exportComponent from \"/home/rgdpub/vcmap-ui/app/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-ef073d0a\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { toDisplayString as _toDisplayString, unref as _unref, normalizeClass as _normalizeClass, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-b354cb24\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = [\"x\", \"y\"]\n\nimport { useStore } from 'vuex';\nimport { key } from '@/store';\nimport { GeneLabel } from '@/models/Label';\nimport Gene from '@/models/Gene';\nimport SelectedData from '@/models/SelectedData';\nimport useSyntenyAndDataInteraction from '@/composables/useSyntenyAndDataInteraction';\nimport OrthologLine from '@/models/OrthologLine';\n\ninterface Props\n{\n  label: GeneLabel;\n  geneList: Map<number, Gene>;\n  orthologLines: OrthologLine[];\n}\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'GeneLabelSVG',\n  props: {\n    label: null,\n    geneList: null,\n    orthologLines: null\n  },\n  setup(__props: any) {\n\nconst store = useStore(key);\n\n\n\nconst { onGeneLabelClick } = useSyntenyAndDataInteraction(store);\n\n/**\n * TODO: Documenting a situation that results in some slightly confusing UX that we should\n * consider improving.\n * \n * This isn't in Redmine but probably should be once we merge the performance-fixes branch in.\n * \n * Scenario:\n * + The label for 2 datatrack sections overlap\n * + Our gene label merge logic makes one of their labels visible and adds both genes to the gene list of that label\n * + Clicking on the label results in both genes showing in the SelectedDataPanel and the label text becoming bold (good!)\n * + Clicking on either one of the individual datatrack sections results in only that gene showing in the SelectedDataPanel (also good!),\n *    BUT, the label text is bold and it still shows \"(2)\" next to it. As a user, this makes me think there should be 2 genes showing\n *    in the SelectedDataPanel (slightly confusing)\n * \n * I wasn't quite sure where to document this at. I'm putting this here since there is some logic in this component that directly\n * affects the text of the GeneLabel depending on what genes are selected. Maybe we adjust the label text to only say the name of the \n * selected datatrack gene, or maybe we don't make the label text bold in this scenario... either way, documenting this use-case so that\n * we can improve this in the future.\n */\n\nconst getLabelText = (label: GeneLabel) => {\n  const numCombinedGenes = label.genes.length;\n  const selectedGeneIds = store.state.selectedGeneIds;\n  let labelText = label.text;\n\n  //\n  // If selected gene Ids are found within this GeneLabel but it isn't the gene in the label text, switch the label\n  // text to the name of the selected gene as long as it isn't an LOC gene. I believe the main reason for this logic\n  // is if a user selects a gene and it has an orthologc\n  if (!selectedGeneIds.includes(label.mainGene.rgdId) && selectedGeneIds.some((id) => label.rgdIds.includes(id)))\n  {\n    const altGenesForLabel = label.genes.filter((gene) => selectedGeneIds.includes(gene.rgdId));\n    for (let i = 0; i < altGenesForLabel.length; i++) {\n      // TODO: Feels a bit like a code smell to be changing the label text here from what the model says it should be. \n      // Not sure if we really need to address it though. Could be confusing to debug.\n      labelText = formatTextForMultiGeneLabel(altGenesForLabel[i].symbol, numCombinedGenes);\n      if (!labelText.startsWith('LOC'))\n      {\n        break;\n      }\n    }\n  }\n  else\n  {\n    // FIXME: Address these magic numbers, use a BBox measurement (https://stackoverflow.com/questions/3311126/svg-font-metrics)?\n    if (numCombinedGenes > 1)\n    {\n      labelText = formatTextForMultiGeneLabel(label.text, numCombinedGenes);\n    }\n    else\n    {\n      if (labelText.length > 9)\n      {\n        labelText = label.text.substring(0, 10) + '...';\n      }\n    }\n  }\n  return labelText;\n};\n\nconst onMouseEnter = (label: GeneLabel) => {\n  label.isHovered = true;\n\n  // If there are selected genes, don't update the selected data panel\n  if (store.state.selectedGeneIds.length === 0) {\n    const newSelectedData = label.genes.map((gene) => {\n      return new SelectedData(gene.clone(), 'Gene');\n    });\n    store.dispatch('setSelectedData', newSelectedData);\n  }\n};\n\nconst onMouseLeave = (label: GeneLabel) => {\n  label.isHovered = false;\n  \n  // Only reset data onMouseLeave if there isn't a selected gene\n  if (store.state.selectedGeneIds.length === 0) {\n    store.dispatch('setSelectedData', null);\n  }\n};\n\nconst isLabelSelected = (label: GeneLabel) => {\n  const selectedGeneIds = store.state.selectedGeneIds;\n  const combinedLabelGeneIds = label.rgdIds;\n  return (selectedGeneIds.some((id) => combinedLabelGeneIds.includes(id)) || label.isHovered);\n};\n\nconst formatTextForMultiGeneLabel = (symbol: string, numGenes: number) => {\n  const geneSymbolText = numGenes > 9 ? symbol.substring(0, 7) : symbol.substring(0, 8);\n  return `${geneSymbolText}...(${numGenes})`;\n};\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"text\", {\n    onClick: _cache[0] || (_cache[0] = ($event: any) => (_unref(onGeneLabelClick)($event, __props.label, __props.geneList, __props.orthologLines))),\n    onMouseenter: _cache[1] || (_cache[1] = ($event: any) => (onMouseEnter(__props.label))),\n    onMouseleave: _cache[2] || (_cache[2] = ($event: any) => (onMouseLeave(__props.label))),\n    class: _normalizeClass((isLabelSelected(__props.label) ? 'bold-label' : 'label small')),\n    x: (__props.label.posX + 5),\n    y: (__props.label.posY),\n    \"dominant-baseline\": \"middle\",\n    \"text-anchor\": \"start\"\n  }, _toDisplayString(getLabelText(__props.label)), 43, _hoisted_1))\n}\n}\n\n})","import script from \"./GeneLabelSVG.vue?vue&type=script&lang=ts&setup=true\"\nexport * from \"./GeneLabelSVG.vue?vue&type=script&lang=ts&setup=true\"\n\nimport \"./GeneLabelSVG.vue?vue&type=style&index=0&id=b354cb24&lang=scss&scoped=true\"\n\nimport exportComponent from \"/home/rgdpub/vcmap-ui/app/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-b354cb24\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { unref as _unref, createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, normalizeClass as _normalizeClass, createCommentVNode as _createCommentVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-3f7ac275\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = [\"width\", \"height\"]\nconst _hoisted_2 = [\"x\", \"width\", \"height\"]\nconst _hoisted_3 = [\"x\", \"y\"]\nconst _hoisted_4 = [\"x\", \"y\"]\nconst _hoisted_5 = [\"x\", \"y\"]\nconst _hoisted_6 = [\"x\", \"y\"]\nconst _hoisted_7 = [\"x\", \"y\"]\nconst _hoisted_8 = [\"x\", \"y\", \"transform\"]\nconst _hoisted_9 = [\"x\", \"y\"]\nconst _hoisted_10 = [\"x\", \"y\", \"transform\"]\n\nimport SVGConstants from '@/utils/SVGConstants';\nimport SyntenyRegionSet from '@/models/SyntenyRegionSet';\nimport BackboneSet from '@/models/BackboneSet';\nimport { getDetailedPanelXPositionForDatatracks } from '@/utils/Shared';\n\ninterface Props {\n  overviewBackboneSet?: BackboneSet;\n  overviewSyntenySets: SyntenyRegionSet[];\n  detailedBackboneSet?: BackboneSet;\n  detailedSyntenySets: SyntenyRegionSet[];\n}\n\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'ViewboxTitlesSVG',\n  props: {\n    overviewBackboneSet: null,\n    overviewSyntenySets: null,\n    detailedBackboneSet: null,\n    detailedSyntenySets: null\n  },\n  setup(__props: any) {\n\nconst TITLE_ROTATION = -30;\n\n\n\nfunction rotateString(degree: number, x: number, y: number): string\n{\n  return `rotate(${degree} ${x} ${y})`;\n}\n\nfunction getSyntenyDatatrackXPos(setOrder: number, datatrackSetIdx: number) {\n  const posX1 = getDetailedPanelXPositionForDatatracks(setOrder, datatrackSetIdx);\n  const xPos = posX1 + SVGConstants.dataTrackWidth / 2;\n  return xPos;\n}\n\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(_Fragment, null, [\n    _createElementVNode(\"rect\", {\n      class: \"panel\",\n      x: \"0\",\n      width: _unref(SVGConstants).overviewPanelWidth,\n      height: _unref(SVGConstants).panelTitleHeight\n    }, null, 8, _hoisted_1),\n    _createElementVNode(\"rect\", {\n      class: \"panel\",\n      x: _unref(SVGConstants).overviewPanelWidth,\n      width: _unref(SVGConstants).detailsPanelWidth,\n      height: _unref(SVGConstants).panelTitleHeight\n    }, null, 8, _hoisted_2),\n    _createElementVNode(\"text\", {\n      class: \"label medium bold\",\n      x: _unref(SVGConstants).overviewTitleXPosition,\n      y: _unref(SVGConstants).panelTitleYPosition\n    }, \"Overview\", 8, _hoisted_3),\n    _createElementVNode(\"text\", {\n      class: \"label medium bold\",\n      x: _unref(SVGConstants).selectedBackboneXPosition - 5,\n      y: _unref(SVGConstants).panelTitleYPosition\n    }, \"Detailed\", 8, _hoisted_4),\n    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(__props.overviewSyntenySets, (syntenySet, index) => {\n      return (_openBlock(), _createElementBlock(_Fragment, { key: index }, [\n        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(syntenySet.titleLabels, (label, index) => {\n          return (_openBlock(), _createElementBlock(\"text\", {\n            key: index,\n            class: _normalizeClass(`label small ${label.addClass}`),\n            x: label.posX,\n            y: label.posY\n          }, _toDisplayString(label.text), 11, _hoisted_5))\n        }), 128))\n      ], 64))\n    }), 128)),\n    (__props.overviewBackboneSet)\n      ? (_openBlock(true), _createElementBlock(_Fragment, { key: 0 }, _renderList(__props.overviewBackboneSet.titleLabels, (label, index) => {\n          return (_openBlock(), _createElementBlock(\"text\", {\n            key: index,\n            class: _normalizeClass(`label small ${label.addClass}`),\n            x: label.posX,\n            y: label.posY\n          }, _toDisplayString(label.text), 11, _hoisted_6))\n        }), 128))\n      : _createCommentVNode(\"\", true),\n    (__props.detailedBackboneSet)\n      ? (_openBlock(), _createElementBlock(_Fragment, { key: 1 }, [\n          (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(__props.detailedBackboneSet.titleLabels, (label, index) => {\n            return (_openBlock(), _createElementBlock(\"text\", {\n              key: index,\n              class: _normalizeClass(`label small ${label.addClass}`),\n              x: label.posX - 5,\n              y: label.posY\n            }, _toDisplayString(label.text), 11, _hoisted_7))\n          }), 128)),\n          (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(__props.detailedBackboneSet.datatrackSets, (datatrackSet, index) => {\n            return (_openBlock(), _createElementBlock(_Fragment, { key: index }, [\n              (datatrackSet.datatracks.length > 0)\n                ? (_openBlock(), _createElementBlock(\"text\", {\n                    key: 0,\n                    class: \"label small\",\n                    x: (datatrackSet.datatracks[0].posX1 + datatrackSet.datatracks[0].posX2) / 2,\n                    y: _unref(SVGConstants).panelTitleHeight - 20,\n                    transform: rotateString(TITLE_ROTATION, (datatrackSet.datatracks[0].posX1 + datatrackSet.datatracks[0].posX2) / 2, _unref(SVGConstants).panelTitleHeight - 20)\n                  }, _toDisplayString(datatrackSet.getTrackTypeDisplayName()), 9, _hoisted_8))\n                : _createCommentVNode(\"\", true)\n            ], 64))\n          }), 128))\n        ], 64))\n      : _createCommentVNode(\"\", true),\n    (__props.detailedSyntenySets.length)\n      ? (_openBlock(true), _createElementBlock(_Fragment, { key: 2 }, _renderList(__props.detailedSyntenySets, (syntenySet, index) => {\n          return (_openBlock(), _createElementBlock(_Fragment, { key: index }, [\n            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(syntenySet.titleLabels, (label, index) => {\n              return (_openBlock(), _createElementBlock(\"text\", {\n                key: index,\n                class: _normalizeClass(`label small ${label.addClass}`),\n                x: label.posX - 5,\n                y: label.posY\n              }, _toDisplayString(label.text), 11, _hoisted_9))\n            }), 128)),\n            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(syntenySet.regions[0].datatrackSets, (datatrackSet, index) => {\n              return (_openBlock(), _createElementBlock(\"text\", {\n                key: index,\n                class: \"label small\",\n                x: getSyntenyDatatrackXPos(syntenySet.order, index),\n                y: _unref(SVGConstants).panelTitleHeight - 20,\n                transform: rotateString(TITLE_ROTATION, getSyntenyDatatrackXPos(syntenySet.order, index), _unref(SVGConstants).panelTitleHeight - 20)\n              }, _toDisplayString(datatrackSet.getTrackTypeDisplayName()), 9, _hoisted_10))\n            }), 128))\n          ], 64))\n        }), 128))\n      : _createCommentVNode(\"\", true)\n  ], 64))\n}\n}\n\n})","import script from \"./ViewboxTitlesSVG.vue?vue&type=script&lang=ts&setup=true\"\nexport * from \"./ViewboxTitlesSVG.vue?vue&type=script&lang=ts&setup=true\"\n\nimport \"./ViewboxTitlesSVG.vue?vue&type=style&index=0&id=3f7ac275&lange=scss&scoped=true&lang=css\"\n\nimport exportComponent from \"/home/rgdpub/vcmap-ui/app/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-3f7ac275\"]])\n\nexport default __exports__","import { DialogTheme } from '@/utils/Types';\nimport { ref } from 'vue';\nimport { useLogger } from 'vue-logger-plugin';\n\n/**\n * Composable that holds all of our logic related to the VCMapDialog and whether or not it should be shown\n */\nexport default function useDialog() {\n  const $log = useLogger();\n\n  const showDialog = ref(false);\n  const dialogHeader = ref('');\n  const dialogMessage = ref('');\n  const showDialogBackButton = ref(false);\n  const dialogTheme = ref<DialogTheme>('normal');\n\n  const onError = (err: any, userMessage: string, showBackButton: boolean, title?: string) => {\n    $log.error(err);\n    dialogHeader.value = title ?? 'Error';\n    dialogMessage.value = userMessage;\n    showDialogBackButton.value = showBackButton;\n    dialogTheme.value = 'error';\n    showDialog.value = true;\n  };\n\n  return {\n    onError,\n    dialogHeader,\n    dialogMessage,\n    showDialog,\n    showDialogBackButton,\n    dialogTheme,\n  };\n}","import { onMounted, ref } from \"vue\";\nimport { getMousePosSVG } from '@/utils/SVGHelpers';\nimport { Store } from \"vuex\";\nimport { VCMapState } from \"@/store\";\nimport SVGConstants, {PANEL_SVG_START, PANEL_SVG_STOP} from \"@/utils/SVGConstants\";\nimport { useLogger } from \"vue-logger-plugin\";\n\nexport default function useDetailedPanelZoom(store: Store<VCMapState>) {\n  const $log = useLogger();\n\n  let inSelectMode = false;\n  let startingPoint: DOMPoint | { y: number, x: number };\n  const startDetailedSelectionY = ref<number>();\n  const stopDetailedSelectionY = ref<number>();\n  let svg: SVGSVGElement | null;\n\n  onMounted(() => {\n    svg = document.querySelector('svg');\n  });\n\n  const getDetailedSelectionStatus = () => {\n    return inSelectMode;\n  };\n\n  const detailedSelectionHandler = (event: any, isOverviewPanelSelecting: boolean) => {\n    if (store.state.isOverviewPanelUpdating || store.state.isDetailedPanelUpdating || isOverviewPanelSelecting)\n    {\n      // Don't allow zoom until both panels are done updating\n      return;\n    }\n\n    const selectedRegion = store.state.selectedBackboneRegion;\n    if (selectedRegion && !selectedRegion.viewportSelection)\n    {\n      $log.warn('Cannot zoom on the detailed panel without a selection in the overview');\n      return;\n    }\n\n    if (!inSelectMode) {\n      inSelectMode = true;\n      startingPoint = getMousePosSVG(svg, event);\n      startDetailedSelectionY.value = startingPoint.y;\n      return;\n    }\n\n    completeZoomSelection();\n  };\n\n  const initZoomSelection = (event: any) => {\n    if (store.state.isOverviewPanelUpdating || store.state.isDetailedPanelUpdating)\n    {\n      // Don't allow zoom until both panels are done updating\n      return;\n    }\n\n    if (!store.state.detailedBasePairRange)\n    {\n      $log.warn('Cannot zoom on the detailed panel without a selection in the overview');\n      return;\n    }\n\n    inSelectMode = true;\n    startingPoint = getMousePosSVG(svg, event);\n    startDetailedSelectionY.value = startingPoint.y;\n  };\n\n  const updateZoomSelection = (event: any) => {\n    if (!inSelectMode) return;\n\n    const currentSVGPoint = getMousePosSVG(svg, event);\n\n    if (currentSVGPoint.y < startingPoint.y)\n    {\n      // We are moving above the starting point\n      startDetailedSelectionY.value = currentSVGPoint.y;\n      stopDetailedSelectionY.value = startingPoint.y;\n    }\n    else\n    {\n      // We are moving below the starting point\n      stopDetailedSelectionY.value = currentSVGPoint.y;\n    }\n  };\n\n  const cancelDetailedSelection = () => {\n    if (inSelectMode) {\n      inSelectMode = false;\n      // Clear selection box\n      startDetailedSelectionY.value = undefined;\n      stopDetailedSelectionY.value = undefined;\n    }\n  };\n\n  const completeZoomSelection = () => {\n    if (!inSelectMode) return;\n\n    inSelectMode = false;\n    const toastCount = store.state.selectionToastCount;\n\n    if (startDetailedSelectionY.value != null && stopDetailedSelectionY.value != null && store.state.detailedBasePairRange)\n    {\n      const svgHeight = PANEL_SVG_STOP - PANEL_SVG_START;\n      const bpVisibleWindowLength = Math.abs(store.state.detailedBasePairRange.stop - store.state.detailedBasePairRange.start);\n      const pixelsPerBpRatio = svgHeight / bpVisibleWindowLength;\n      // Calculate start/stop base pairs based on bp to height ratio in the detailed panel\n      const basePairStart = Math.floor((startDetailedSelectionY.value - SVGConstants.panelTitleHeight) / pixelsPerBpRatio)\n          + store.state.detailedBasePairRange.start;\n\n      const basePairStop = Math.floor((stopDetailedSelectionY.value - SVGConstants.panelTitleHeight) / pixelsPerBpRatio)\n          + store.state.detailedBasePairRange.start;\n\n      $log.log(`Requesting zoom to (${basePairStart}, ${basePairStop}) from Y:(${startDetailedSelectionY.value}, ${stopDetailedSelectionY.value})`);\n      store.dispatch('setSelectionToastCount', toastCount + 1);\n      store.dispatch('setDetailedBasePairRequest', { start: basePairStart, stop: basePairStop });\n      // store.dispatch('setDetailedBasePairRange', { start: basePairStart, stop: basePairStop });\n    }\n\n    // Clear selection box\n    startDetailedSelectionY.value = undefined;\n    stopDetailedSelectionY.value = undefined;\n  };\n\n  return {\n    detailedSelectionHandler,\n    startDetailedSelectionY,\n    stopDetailedSelectionY,\n    initZoomSelection,\n    updateZoomSelection,\n    cancelDetailedSelection,\n    completeZoomSelection,\n    getDetailedSelectionStatus\n  };\n}","import DatatrackSection, { DatatrackSectionType } from \"./DatatrackSection\";\n\nexport default class DatatrackSet\n{\n  datatracks: DatatrackSection[] = [];\n  type: DatatrackSectionType;\n\n  constructor(datatracks: DatatrackSection[], type: DatatrackSectionType)\n  {\n    this.datatracks = datatracks;\n    this.type = type;\n  }\n\n  public addDatatrackSections(datatrackSections: DatatrackSection[])\n  {\n    this.datatracks = this.datatracks.concat(datatrackSections);\n  }\n\n  public clearDatatrackSections()\n  {\n    this.datatracks.splice(0, this.datatracks.length);\n  }\n\n  public getTrackTypeDisplayName()\n  {\n    switch (this.type)\n    {\n      case 'gene':\n        return 'Genes';\n      case 'variant':\n        return 'Variants';\n    }\n  }\n}\n\n","import SyntenySection from './SyntenySection';\nimport DatatrackSection, { DatatrackSectionType } from './DatatrackSection';\nimport DatatrackSet from './DatatrackSet';\nimport { GeneLabel } from './Label';\nimport OrthologLine from './OrthologLine';\nimport { GenomicSectionFactory } from './GenomicSectionFactory';\nimport { Gap } from \"@/models/Block\";\nimport Gene from './Gene';\nimport { isGenomicDataInViewport } from '@/utils/Shared';\nimport logger from '@/logger';\n\ninterface SyntenyRegionParams\n{\n  species: string;\n  mapName: string;\n  gaplessBlock: SyntenySection;\n  genes?: Gene[];\n}\n\n//This model is used to store data for a syntenic region off-backbone\nexport default class SyntenyRegion\n{\n  // TODO: Can this instead be a reference to our Block model from the synteny tree?\n  gaplessBlock: SyntenySection;             // The full block representing this region (no gaps)\n  syntenyGaps: SyntenySection[] = [];       // synteny gaps occupying this region\n  syntenyBlocks: SyntenySection[] = [];     // synteny blocks occupying this region\n  datatrackSets: DatatrackSet[] = [];       // Set of DatatrackSections belonging to this SytenyRegion\n  orthologLines: OrthologLine[] = [];       // OrthologLines belonging to this SyntenyRegion\n  species: string = '';                     // species that this region is from\n  mapName: string = '';\n  geneDatatrackLabels: GeneLabel[] = [];    // array of Label objects associated with the datatrackSections\n  genes: Gene[] = [];                       // All genes associated with this SyntenyRegion (the block that this region represents) -- note: will be empty for overview SyntenyRegions since genes aren't needed\n\n  constructor(params: SyntenyRegionParams)\n  {\n    this.species = params.species;\n    this.mapName = params.mapName;\n    this.gaplessBlock = params.gaplessBlock;\n    this.genes = params.genes ? params.genes.map(g => g.clone()) : [];\n  }\n\n  public addSyntenyGaps(syntenyGap: SyntenySection[])\n  {\n    this.syntenyGaps.length > 0 ? this.syntenyGaps = this.syntenyGaps.concat(syntenyGap) : this.syntenyGaps = syntenyGap;\n    this.syntenyGaps.sort((a, b) => a.posY1 - b.posY1);\n  }\n\n  public addSyntenyBlocks(syntenyBlock: SyntenySection[])\n  {\n    this.syntenyBlocks.length > 0 ? this.syntenyBlocks = this.syntenyBlocks.concat(syntenyBlock) : this.syntenyBlocks = syntenyBlock;\n    this.syntenyBlocks.sort((a, b) => a.posY1 - b.posY1);\n  }\n\n  /**\n   * Add datatrack sections to this region. If the datatrack sections are genes, the gene labels will be re-processed.\n   */\n  public addDatatrackSections(datatrackSection: DatatrackSection[], datatrackSetIdx: number, type: DatatrackSectionType)\n  {\n    this.datatrackSets[datatrackSetIdx] && this.datatrackSets[datatrackSetIdx].datatracks.length > 0 ?\n      this.datatrackSets[datatrackSetIdx].addDatatrackSections(datatrackSection) : this.datatrackSets[datatrackSetIdx] = new DatatrackSet(datatrackSection, type);\n  }\n\n  // TODO: Wonder if we should move this method back out of this class to a utils file? It might help make each of these\n  // SyntenyRegion objects a bit lighter...\n  public splitBlockWithGaps(factory: GenomicSectionFactory, gaps: Gap[])\n  {\n    // Do the following:\n    // 1. Filter out any gaps that do not match the chain level of this block\n    //   NOTE: This ensures we don't split up level 1 blocks with level 2 gaps, etc... things get weird above level 1.\n    //     There can be overlapping gaps and gaps inside of other gaps that would make the logic a bit more complicated.\n    //     We'd possibly need to filter out any gaps that are inside of other gaps or combine overlapping gaps into one \n    //     larger gap...\n    // 2. Filter out any gaps that are not in the viewport (detailed panel)\n    // 3. Sort gaps in order of backbone position\n    //   NOTE: This is really important for inverted blocks. The code below is\n    //     is written in a way that expects the gaps to go in order of how they \n    //     align against the backbone\n    logger.time(`Sort gaps for splitBlockWithGaps`);\n    const sortedGaps = [...gaps]\n      .filter(g => {\n        return g.chainLevel === this.gaplessBlock.chainLevel\n          && isGenomicDataInViewport(g, this.gaplessBlock.windowBasePairRange.start, this.gaplessBlock.windowBasePairRange.stop);\n      })\n      .sort((a, b) => a.backboneStart - b.backboneStart);\n    logger.timeEnd(`Sort gaps for splitBlockWithGaps`);\n\n    logger.log(` splitBlockWithGaps: filtered ${gaps.length} down gaps to ${sortedGaps.length}`);\n\n    this.syntenyBlocks = [];\n    this.syntenyGaps = [];\n\n    const block = this.gaplessBlock;\n\n    // TODO: Should we start rendering individual gap sections again? Pros/cons?\n    const gapsLine = factory.createSyntenySection({\n      start: block.speciesStart,\n      stop: block.speciesStop,\n      backboneAlignment: block.backboneAlignment,\n      type: 'gap',\n      orientation: '+',\n      chainLevel: block.chainLevel,\n    });\n    this.syntenyGaps.push(gapsLine);\n\n    if (sortedGaps.length === 0)\n    {\n      // No gaps to split block with...\n      this.syntenyBlocks.push(block);\n      return;\n    }\n\n    let lastGapBackboneStop = 0;\n    let lastGapSpeciesStop = 0;\n    sortedGaps.forEach((gap, index) => {\n      const blockBackboneStart = block.backboneAlignment.start;\n      const gapBackboneStart = gap.backboneStart;\n    \n      const orientedGapStart = (block.isInverted) ? gap.stop : gap.start;\n      const orientedGapStop = (block.isInverted) ? gap.start : gap.stop;\n    \n      if (index === 0 && (gapBackboneStart <= blockBackboneStart))\n      {\n        // Block starts off with a gap\n        lastGapBackboneStop = gap.backboneStop;\n        lastGapSpeciesStop = orientedGapStop;\n      }\n      else if (index === 0)\n      {\n        //First gap start not before block start, so create block section and then gap section\n        const blockSyntenicSection = factory.createSyntenySection({\n          start: block.speciesStart, // Should be oriented correctly regardless of inversion since it was taken into account during gapless block creation\n          stop: orientedGapStart,\n          backboneAlignment: { start: block.backboneAlignment.start, stop: gap.backboneStart },\n          type: 'block',\n          orientation: block.orientation,\n          chainLevel: block.chainLevel,\n        });\n    \n        this.syntenyBlocks.push(blockSyntenicSection);\n    \n        lastGapBackboneStop = gap.backboneStop;\n        lastGapSpeciesStop = orientedGapStop;\n      }\n      else if (lastGapBackboneStop && lastGapSpeciesStop && gap.backboneStart >= lastGapBackboneStop)\n      {\n        // Next gap start is after last processed section stop, so create block section and then gap section\n        const blockSyntenicSection = factory.createSyntenySection({\n          start: lastGapSpeciesStop, // Should be oriented correctly regardless of inversion, since previous processed section would take it into account\n          stop: orientedGapStart,\n          backboneAlignment: { start: lastGapBackboneStop, stop: gap.backboneStart, },\n          type: 'block',\n          orientation: block.orientation,\n          chainLevel: block.chainLevel,\n        });\n        this.syntenyBlocks.push(blockSyntenicSection);\n        lastGapBackboneStop = gap.backboneStop;\n        lastGapSpeciesStop = orientedGapStop;\n      }\n      else\n      {\n        const lastGap = gaps[gaps.length - 1];\n    \n        if (lastGap && lastGap.backboneStop > gap.backboneStart && lastGap.backboneStop > gap.backboneStop)\n        {\n          // current gap is encompassed by last gap (safe-guard)\n          return;\n        }\n    \n        // TODO: Unsure if anything ever makes it here... may need to investigate\n        const blockSyntenicSection = factory.createSyntenySection({\n          start: lastGap.stop, // Should be oriented correctly regardless of inversion, since previous processed section would take it into account\n          stop: gap.start,\n          backboneAlignment: { start: lastGap.backboneStop, stop: gap.backboneStart, },\n          type: 'block',\n          orientation: block.orientation,\n          chainLevel: block.chainLevel,\n        });\n    \n        this.syntenyBlocks.push(blockSyntenicSection);\n      }\n    });\n    \n    // Check to see if the gapless block ends with a gap. If not, then create and process the last synteny block\n    const finalGap = sortedGaps[sortedGaps.length - 1];\n    if (finalGap && finalGap.backboneStop < block.backboneAlignment.stop)\n    {\n      const blockSyntenicSection = factory.createSyntenySection({\n        start: block.isInverted ? finalGap.start : finalGap.stop,\n        stop: block.speciesStop, // Should be oriented correctly regardless of inversion since it was taken into account during gapless block creation\n        backboneAlignment: { start: finalGap.backboneStop, stop: block.backboneAlignment.stop, },\n        type: 'block',\n        orientation: block.orientation,\n        chainLevel: block.chainLevel,\n      });\n    \n      this.syntenyBlocks.push(blockSyntenicSection);\n    }\n  }\n}","import Label from \"./Label\";\nimport SpeciesMap from \"./SpeciesMap\";\n\n/**\n * Represents a Set of Genomic Data\n */\nexport abstract class GenomicSet\n{\n  speciesName: string;\n  mapName: string;\n  titleLabels: Label[] = [];\n  mapKey: number;\n\n  constructor(speciesName?: string, map?: SpeciesMap)\n  {\n    this.speciesName = speciesName ?? '';\n    this.mapName = map?.name ?? '';\n    this.mapKey = map?.key ?? 0;\n  }\n\n  protected abstract createTitleLabels(): void;\n}","import Gene from './Gene';\n\ninterface LabelParams\n{\n  posX: number;\n  posY: number;\n  text: string;\n  isVisible?: boolean;\n  addClass?: string;\n}\n\nexport default class Label\n{\n  posX: number = 0;\n  posY: number = 0;\n  text: string = '';\n  isVisible: boolean = true;\n  isHovered: boolean = false;\n  addClass: string = \"\";\n\n  constructor(params: LabelParams)\n  {\n    this.posX = params.posX;\n    this.posY = params.posY;\n    this.text = params.text;\n    this.isVisible = params.isVisible ?? this.isVisible;\n    this.addClass = params.addClass ?? this.addClass;\n  }\n}\n\nexport class GeneLabel extends Label\n{\n  genes: Gene[];\n  rgdIds: number[];\n\n  constructor(params: LabelParams, genes: Gene[])\n  {\n    super(params);\n    this.genes = genes;\n    this.rgdIds = genes.map(g => g.rgdId);\n    if (this.genes.length > 0)\n    {\n      this.text = this.genes[0].symbol;\n    }\n  }\n\n  /**\n   * Returns the \"main\" gene that belongs to this GeneLabel\n   */\n  public get mainGene()\n  {\n    // FIXME: Probably shouldn't arbitrarily rely on the first gene in label being the one that it represents...\n    return this.genes[0] ?? null;\n  }\n}\n\nexport type IntermediateGeneLabel = {\n  gene: Gene,\n  posY: number,\n  posX: number,\n};","import logger from '@/logger';\nimport Gene from '@/models/Gene';\nimport { GeneLabel, IntermediateGeneLabel } from '../models/Label';\nimport { PANEL_SVG_START } from './SVGConstants';\n\nconst OVERLAP_SIZE = 8;\nconst LOC_PREFIX = 'loc';\n\nexport function mergeAndCreateGeneLabels(possibleLabels: IntermediateGeneLabel[])\n{\n  const geneLabels: GeneLabel[] = [];\n\n  logger.debug(` Merge gene labels [processing ${possibleLabels.length}]`);\n  // Sort the labels by their SVG Y position\n  possibleLabels.sort((a, b) => a.posY - b.posY);\n\n  for (let i = 0; i < possibleLabels.length; i++)\n  {\n    const curLabel = possibleLabels[i];\n    // If label is too close to top of detailed panel, move it down a bit\n    if (Math.abs(curLabel.posY - PANEL_SVG_START) < OVERLAP_SIZE)\n    {\n      curLabel.posY = curLabel.posY + OVERLAP_SIZE;\n    }\n\n    let mainGene = curLabel.gene;\n    const overlappingGenes: Gene[] = [];\n\n    // If there are more labels after this one...\n    if (i < possibleLabels.length - 1)\n    {\n      // Get nearest overlapping labels\n      for (let j = i + 1; j < possibleLabels.length; j++)\n      {\n        const potentialOverlappingLabel = possibleLabels[j];\n        if (labelsOverlap(curLabel, potentialOverlappingLabel))\n        {\n          // If the current label is an LOC gene or is smaller than the overlapping label, use the overlapping label\n          // as the visible label\n          if (!potentialOverlappingLabel.gene.symbol.toLowerCase().startsWith(LOC_PREFIX) \n            && (curLabel.gene.symbol.toLowerCase().startsWith(LOC_PREFIX) || curLabel.gene.size < potentialOverlappingLabel.gene.size))\n          {\n            overlappingGenes.push(mainGene);\n            mainGene = potentialOverlappingLabel.gene;\n          }\n          else\n          {\n            // Add the overlapping label's genes to this label and hide it\n            overlappingGenes.push(potentialOverlappingLabel.gene);\n          }\n\n          // If last label has been looked at, skip outer for-loop to the end\n          // (so that it does not get set to \"visible\" at the beginning of the next iteration)\n          if (j === possibleLabels.length - 1)\n          {\n            i = j;\n          }\n        }\n        else\n        {\n          // Move outer for-loop to next label that doesn't overlap\n          i = j - 1; // j - 1 since i will iterate by 1 at the end of the outer for-loop causing the next curLabel to be at index \"j\"\n          break;\n        }\n      }\n    }\n\n    geneLabels.push(new GeneLabel({\n      posX: curLabel.posX,\n      posY: curLabel.posY,\n      text: mainGene.symbol,\n      isVisible: true,\n    }, [mainGene, ...overlappingGenes]));\n  }\n\n  return geneLabels;\n}\n\nfunction labelsOverlap(label1: IntermediateGeneLabel, label2: IntermediateGeneLabel)\n{\n  return Math.abs(label1.posY - label2.posY) < OVERLAP_SIZE;\n}","import SVGConstants from \"@/utils/SVGConstants\";\nimport { GenomicSet } from \"./GenomicSet\";\nimport Label, { GeneLabel, IntermediateGeneLabel } from \"./Label\";\nimport SyntenyRegion from \"./SyntenyRegion\";\nimport SyntenySection from \"./SyntenySection\";\nimport DatatrackSet from \"./DatatrackSet\";\nimport { mergeAndCreateGeneLabels } from \"@/utils/GeneLabelMerger\";\nimport { calculateDetailedPanelSVGYPositionBasedOnBackboneAlignment, getDetailedPanelXPositionForDatatracks, getDetailedPanelXPositionForSynteny, isGenomicDataInViewport } from \"@/utils/Shared\";\nimport SpeciesMap from \"./SpeciesMap\";\nimport logger from \"@/logger\";\n\nconst LEVEL_2_WIDTH_MULTIPLIER = 0.75;\n\nfunction getOverviewPanelXPosition(order: number)\n{\n  return (order * -80) + SVGConstants.backboneXPosition;\n}\n\n/**\n * Model for representing a set of SyntenyRegions for the same species and map\n */\nexport default class SyntenyRegionSet extends GenomicSet\n{\n  regions: SyntenyRegion[] = [];\n  order: number = 1;\n  renderType: 'overview' | 'detailed' = 'overview';\n  geneLabels: GeneLabel[] = [];\n  // TODO: figure out if this is this best place for this,\n  // because it's only relevant to variant density\n  maxVariantCount?: number;\n  variantBinSize?: number;\n\n  constructor(speciesName: string, map: SpeciesMap, regions: SyntenyRegion[], order: number, renderType: 'overview' | 'detailed')\n  {\n    super(speciesName, map);\n    this.regions = regions;\n    this.order = order;\n    this.renderType = renderType;\n\n    this.setRegionXPositionsBasedOnOrder();\n    this.createTitleLabels();\n    this.sortBasePairLabels();\n    \n    if (renderType === 'detailed')\n    {\n      logger.time(`Create Gene Labels`);\n      this.generateGeneLabels();\n      logger.timeEnd(`Create Gene Labels`);\n    }\n  }\n\n  private generateGeneLabels()\n  {\n    // Get:\n    // + X position based on where the gene datatrack set is positioned in the regions\n    // + window start base pair (backbone)\n    // + window stop base pair (backbone)\n    // TODO: The backbone window start/stop should probably be more accessible at this level in some way\n    let xPos: number | null = null;\n    let visibleBackboneStart: number | null = null;\n    let visibleBackboneStop: number | null = null;\n    for (let i = 0; i < this.regions.length; i++)\n    {\n      if (visibleBackboneStart == null || visibleBackboneStop == null)\n      {\n        visibleBackboneStart = this.regions[i].gaplessBlock.windowStart;\n        visibleBackboneStop = this.regions[i].gaplessBlock.windowStop;\n      }\n\n      for (let j = 0; j < this.regions[i].datatrackSets.length; j++)\n      {\n        if (this.regions[i].datatrackSets[j].type === 'gene')\n        {\n          xPos = getDetailedPanelXPositionForDatatracks(this.order, j) + SVGConstants.dataTrackWidth;\n          break;\n        }\n      }\n\n      if (xPos != null && visibleBackboneStart != null && visibleBackboneStop != null)\n      {\n        break;\n      }\n    }\n\n    if (xPos == null || visibleBackboneStart == null || visibleBackboneStop == null)\n    {\n      logger.debug(`(SyntenyRegionSet) generateGeneLabels: xPos || visibleBackboneStart || visibleBackboneStop is null after iterating through DatatrackSets`);\n      logger.debug(`  ${xPos}, ${visibleBackboneStart}, ${visibleBackboneStop}`);\n      return;\n    }\n\n    // Create gene labels for all genes that are contained in the viewport\n    const filteredGenes = this.regions.map(r => r.genes)\n      .flat()\n      // Using '!' to declare visibleBackboneStart and visibleBackboneStop are never null at this point\n      // Typescript seems to not be able to pick this up inside of an anonymous function\n      .filter(g => isGenomicDataInViewport(g, visibleBackboneStart!, visibleBackboneStop!));\n\n    logger.time(`Create intermediate labels`);\n    // Create intermediate gene labels for all genes in the viewport:\n    const intermediateLabels: IntermediateGeneLabel[] = [];\n    for (let i = 0; i < filteredGenes.length; i++)\n    {\n      const g = filteredGenes[i];\n      const yPos = calculateDetailedPanelSVGYPositionBasedOnBackboneAlignment(g.backboneStart, \n        g.backboneStop, visibleBackboneStart, visibleBackboneStop);\n      intermediateLabels.push({\n        gene: g,\n        posY: yPos,\n        posX: xPos,\n      });\n    }\n    logger.timeEnd(`Create intermediate labels`);\n\n    this.geneLabels = mergeAndCreateGeneLabels(intermediateLabels);\n  }\n\n  public addRegions(regions: SyntenyRegion[])\n  {\n    this.regions.length > 0 ? this.regions = this.regions.concat(regions) : this.regions = regions;\n    this.setRegionXPositionsBasedOnOrder();\n  }\n\n  protected createTitleLabels()\n  {\n    const speciesLabel = new Label({\n      posX: (this.renderType === 'overview') ? getOverviewPanelXPosition(this.order) : getDetailedPanelXPositionForSynteny(this.order),\n      posY: SVGConstants.trackLabelYPosition,\n      text: this.speciesName,\n    });\n\n    const mapLabel = new Label({\n      posX: (this.renderType === 'overview') ? getOverviewPanelXPosition(this.order) : getDetailedPanelXPositionForSynteny(this.order),\n      posY: SVGConstants.trackMapLabelYPosition,\n      text: this.mapName,\n      addClass: 'smaller',\n    });\n\n    this.titleLabels = [speciesLabel, mapLabel];\n  }\n\n  private setRegionXPositionsBasedOnOrder()\n  {\n    if (this.regions.length > 0)\n    {\n      this.regions.forEach(region => {\n        this.setGaplessSyntenyBlockXPositions(region.gaplessBlock);\n        this.setSyntenyBlockXPositions(region.syntenyBlocks);\n        this.setSyntenyGapXPositions(region.syntenyGaps);\n        this.setDatatrackSectionXPositions(region.datatrackSets);\n      });\n    }\n  }\n\n  private setSyntenyGapXPositions(sections: SyntenySection[])\n  {\n    sections.forEach(section => {\n      let blockPosX1: number = 0;\n      if (this.renderType === 'overview')\n      {\n        blockPosX1= getOverviewPanelXPosition(this.order);\n      }\n      else if (this.renderType === 'detailed')\n      {\n        blockPosX1 = getDetailedPanelXPositionForSynteny(this.order);\n      }\n\n      const posX = blockPosX1 + (SVGConstants.trackWidth / 2);\n      section.posX1 = posX;\n      section.posX2 = posX;\n      section.width = 0;\n    });\n  }\n\n  private setSyntenyBlockXPositions(sections: SyntenySection[])\n  {\n    sections.forEach(section => {\n      if (this.renderType === 'overview')\n      {\n        section.posX1 = getOverviewPanelXPosition(this.order);\n      }\n      else if (this.renderType === 'detailed')\n      {\n        section.posX1 = getDetailedPanelXPositionForSynteny(this.order);\n      }\n\n      let trackWidth = SVGConstants.trackWidth;\n      // Level 2 blocks should appear slimmer\n      if (section.chainLevel === 2)\n      {\n        section.posX1 = section.posX1 + ((SVGConstants.trackWidth * (1 - LEVEL_2_WIDTH_MULTIPLIER)) / 2);\n        trackWidth = trackWidth * LEVEL_2_WIDTH_MULTIPLIER;\n      }\n\n      section.posX2 = section.posX1 + trackWidth;\n      section.width = Math.abs(section.posX2 - section.posX1);\n    });\n  }\n\n  private setGaplessSyntenyBlockXPositions(section: SyntenySection)\n  {\n    this.setSyntenyBlockXPositions([section]);\n    section.startLabel.posX = section.posX2;\n    section.stopLabel.posX = section.posX2;\n  }\n\n  private setDatatrackSectionXPositions(datatrackSets: DatatrackSet[])\n  {\n    // TODO: Skip for overview since datatracks are only shown in Detailed Panel?\n    datatrackSets.forEach((set, index) => {\n      let posX1 = 0;\n      if (this.renderType === 'overview')\n      {\n        posX1 = getOverviewPanelXPosition(this.order);\n      }\n      else if (this.renderType === 'detailed')\n      {\n        posX1 = getDetailedPanelXPositionForDatatracks(this.order, index);\n      }\n\n      set.datatracks.forEach((section) => {\n        section.posX1 = posX1;\n\n        section.posX2 = section.posX1 + SVGConstants.dataTrackWidth;\n        // set the label x position if there is one\n        if (section.label)\n        {\n          section.label.posX = section.posX2;\n        }\n        section.width = Math.abs(section.posX2 - section.posX1);\n      });\n    });\n  }\n\n  private sortBasePairLabels()\n  {\n    const labelPosX = getOverviewPanelXPosition(this.order) + SVGConstants.trackWidth;\n    const labelPairs = this.regions.map((region) =>{\n      return {startLabel: region.gaplessBlock.startLabel, stopLabel: region.gaplessBlock.stopLabel};\n    });\n    labelPairs.sort((a, b) =>\n        (Math.abs(b.startLabel.posY - b.stopLabel.posY)) - Math.abs((a.startLabel.posY - a.stopLabel.posY)));\n    for (let i = 0; i < labelPairs.length; i++)\n    {\n      const labelPair = labelPairs[i];\n      labelPair.startLabel.posX = labelPosX;\n      labelPair.stopLabel.posX = labelPosX;\n      if (Math.abs(labelPair.stopLabel.posY - labelPair.startLabel.posY) > 14)\n      {\n        labelPair.startLabel.isVisible = true;\n        labelPair.stopLabel.isVisible = true;\n        continue;\n      }\n    }\n  }\n\n  public get geneDatatrackSetIndex()\n  {\n    for (let i = 0; i < this.regions.length; i++)\n    {\n      for (let j = 0; j < this.regions[i].datatrackSets.length; j++)\n      {\n        if (this.regions[i].datatrackSets[j].type === 'gene')\n        {\n          return j;\n        }\n      }\n    }\n\n    return 0;\n  }\n}","import SVGConstants, { PANEL_SVG_START, PANEL_SVG_STOP } from \"@/utils/SVGConstants\";\nimport { SVGShape, VCMapSVGElement } from \"./VCMapSVGElement\";\nimport { DatatrackSectionType } from \"./DatatrackSection\";\n\nexport type RenderType = 'overview' | 'detailed';\ntype GenomicSectionType = 'gap' | DatatrackSectionType;\n\nexport type BackboneAlignment = {\n  start: number;\n  stop: number;\n};\n\nexport type WindowBasePairRange = {\n  start: number;\n  stop: number;\n};\n\nexport type GenomicSectionParams = {\n  speciesName: string;\n  mapName: string;\n  chromosome: string;\n  start: number;\n  stop: number;\n  type: GenomicSectionType;\n  color: string;\n  backboneAlignment: BackboneAlignment;\n  windowBasePairRange: WindowBasePairRange;\n  renderType: RenderType;\n};\n\n/**\n * Represents an individual Genomic Section of data. \n * This could be an off-backbone syntenic section (block or gap), a backbone section, a datatrack section, etc...\n */\nexport default abstract class GenomicSection implements VCMapSVGElement\n{\n  // VCMapSVGElement props\n  posX1: number = 0;\n  posX2: number = 0;\n  posY1: number = 0;\n  posY2: number = 0;\n  height: number = 0;\n  width: number = 0;\n  shape: SVGShape = 'rect';\n  representation: string = '';\n  isHovered: boolean = false;\n  isSelected: boolean = false;\n  elementColor: string = '';\n  opacity: number = 1;\n\n  // GenomicSection props\n  speciesName: string;\n  mapName: string;\n  chromosome: string;\n  speciesStart: number = 0;  // start basepair of the section on its original species\n  speciesStop: number = 0;   // stop basepair of the section on its original species\n  type: GenomicSectionType = 'block'; // TODO: see if we can remove this prop\n  backboneAlignment: BackboneAlignment;\n  windowBasePairRange: WindowBasePairRange;\n  renderType: RenderType;\n  \n  constructor(params: GenomicSectionParams)\n  {\n    this.speciesName = params.speciesName;\n    this.mapName = params.mapName;\n    this.chromosome = params.chromosome;\n    this.speciesStart = params.start;\n    this.speciesStop = params.stop;\n    this.type = params.type;\n    this.backboneAlignment = params.backboneAlignment;\n    this.windowBasePairRange = params.windowBasePairRange;\n    this.renderType = params.renderType;\n\n    this.calculateYPositionsBasedOnBackboneAlignment();\n\n    // Set color and shape of VCMapSVGElement\n    this.elementColor = params.color;\n    if (params.type === 'block' || params.type === 'gene' || params.type === 'qtl')\n    {\n      this.shape = 'rect';\n    }\n    else\n    {\n      this.shape = 'line';\n    }\n  }\n\n  /**\n   * Length of this genomic section (in basepairs)\n   */\n  public get length()\n  {\n    return Math.abs(this.speciesStop - this.speciesStart);\n  }\n\n  public get backboneAlignmentLength()\n  {\n    return Math.abs(this.backboneAlignment.stop - this.backboneAlignment.start);\n  } \n\n  /**\n   * Ratio of backbone basepairs to this section's basepairs\n   * e.g. if this section is 50bp and aligns against a backbone region that is 100bp long, the ratio would be 2\n   */\n  public get blockRatio()\n  {\n    return Math.abs(this.backboneAlignment.stop - this.backboneAlignment.start) / this.length;\n  }\n\n  /**\n   * SVG start position of the visible part of the backbone\n   */\n  public get windowSVGStart()\n  {\n    return (this.renderType === 'overview') ? PANEL_SVG_START + SVGConstants.overviewTrackPadding : PANEL_SVG_START;\n  }\n\n  /**\n   * SVG stop position of the visible part of the backbone\n   */\n  public get windowSVGStop()\n  {\n    return (this.renderType === 'overview') ? PANEL_SVG_STOP - SVGConstants.overviewTrackPadding : PANEL_SVG_STOP;\n  }\n\n  /**\n   * SVG middle position of the visible part of the backbone\n   */\n  public get windowSVGMiddle()\n  {\n    return this.windowSVGStart + ((this.windowSVGStop - this.windowSVGStart) / 2);\n  }\n\n  /**\n   * Backbone start basepair at top of the visible window\n   */\n  public get windowStart()\n  {\n    return this.windowBasePairRange.start;\n  }\n\n  /**\n   * Backbone stop basepair at the bottom of the visible window\n   */\n  public get windowStop()\n  {\n    return this.windowBasePairRange.stop;\n  }\n\n  public adjustYPositionsBasedOnVisibleStartAndStop(visibleBackboneBasePairRange: WindowBasePairRange)\n  {\n    this.windowBasePairRange = visibleBackboneBasePairRange;\n    this.calculateYPositionsBasedOnBackboneAlignment();\n  }\n\n  /**\n   * Function determines the start and stop SVG positions of this genomic section by using the ratio of known windowStart and svgStart\n   */\n  private calculateYPositionsBasedOnBackboneAlignment()\n  {\n    // NOTE: Caching these function calls to avoid extra functions on the call stack\n    const windowSVGStop = this.windowSVGStop, windowSVGStart = this.windowSVGStart;\n    const windowStop = this.windowStop, windowStart = this.windowStart;\n\n    const svgLength = windowSVGStop - windowSVGStart;\n    const bpVisibleWindowLength = Math.abs(windowStop - windowStart);\n    const bpToSVGRatio = bpVisibleWindowLength / svgLength;\n\n    // Calculate the start and stop SVG positions of this backbone section\n    const basepairDiff = Math.abs(windowStart - this.backboneAlignment.start);\n    const svgDiff = basepairDiff / bpToSVGRatio;\n\n    if (this.backboneAlignment.start < windowStart)\n    {\n      this.posY1 = windowSVGStart - svgDiff;\n    }\n    else if (this.backboneAlignment.start > windowStart)\n    {\n      this.posY1 = windowSVGStart + svgDiff;\n    }\n    else if (this.backboneAlignment.start === windowStart)\n    {\n      this.posY1 = windowSVGStart;\n    }\n\n    this.posY2 = this.posY1 + (this.backboneAlignmentLength / bpToSVGRatio);\n\n    this.height = Math.abs(this.posY2 - this.posY1);\n  }\n}","import Gene from './Gene';\nimport Label from './Label';\nimport GenomicSection, { BackboneAlignment, GenomicSectionParams, RenderType, WindowBasePairRange } from \"./GenomicSection\";\nimport OrthologLine from './OrthologLine';\n\nexport type DatatrackSectionType = 'gene' | 'block' | 'qtl' | 'variant';\n\nexport interface LoadedGene\n{\n  genes: {\n    [speciesName:string]: GeneDatatrack[]\n  }\n  backboneOrtholog?: GeneDatatrack,\n}\n\ntype DatatrackSectionParams = GenomicSectionParams;\n\nexport default class DatatrackSection extends GenomicSection\n{\n  label?: Label;\n\n  constructor(params: DatatrackSectionParams)\n  {\n    super(params);\n  }\n}\n\nexport class GeneDatatrack extends DatatrackSection\n{\n  gene: Gene; // gene that this datatrack represents\n  lines: OrthologLine[] = [];\n\n  constructor(gene: Gene, start: number, stop: number, backboneAlignment: BackboneAlignment, speciesName: string,\n              mapName: string, chromosome: string, windowBasePairRange: WindowBasePairRange, renderType: RenderType)\n  {\n    super({\n      start: start,\n      stop: stop,\n      backboneAlignment: backboneAlignment,\n      speciesName: speciesName,\n      mapName: mapName,\n      chromosome: chromosome,\n      windowBasePairRange: windowBasePairRange,\n      renderType: renderType,\n      type: 'gene',\n      color: '#00000',\n    });\n\n    this.gene = gene.clone();\n    this.opacity = 0.7;\n  }\n}\n\nexport class VariantDensity extends DatatrackSection\n{\n  variantCount: number; // number of variants contained within the datatrack section\n  constructor(variantCount: number, maxCount: number, start: number, stop: number, backboneAlignment: BackboneAlignment, speciesName: string, mapName: string, chromosome: string, windowBasePairRange: WindowBasePairRange, renderType: RenderType)\n  {\n    super({\n      start: start,\n      stop: stop,\n      backboneAlignment: backboneAlignment,\n      speciesName: speciesName,\n      mapName: mapName,\n      chromosome: chromosome,\n      windowBasePairRange: windowBasePairRange,\n      renderType: renderType,\n      type: 'variant',\n      color: '#FFFFFF',\n    });\n    this.variantCount = variantCount;\n    // NOTE: setting the color is very preliminary, this will likely change\n    // and I want to add a lot more structure around it.\n    // Only change the color if there are variants for this section, otherwise leave as white\n    if (maxCount !== 0)\n    {\n      this.setSectionColor(maxCount);\n    }\n  }\n\n  setSectionColor(maxCount: number) {\n    const blueVal = Math.round(((maxCount - this.variantCount) / maxCount) * 255);\n    const redVal = Math.round((this.variantCount / maxCount) * 255);\n    let redHex = redVal.toString(16);\n    redHex = redHex.length === 1 ? `0${redHex}` : redHex;\n    let blueHex = blueVal.toString(16);\n    blueHex = blueHex.length === 1 ? `0${blueHex}` : blueHex;\n    this.elementColor = `#${redHex}00${blueHex}`;\n  }\n\n}\n","import Chromosome from './Chromosome';\nimport Label from './Label';\nimport { Formatter } from '@/utils/Formatter';\nimport GenomicSection, { BackboneAlignment, RenderType, WindowBasePairRange } from './GenomicSection';\n\nexport type SyntenySectionType = 'block' | 'gap';\nexport type Orientation = '+' | '-';\n\ntype SyntenySectionParams = {\n  speciesName: string;\n  mapName: string;\n  start: number;\n  stop: number;\n  backboneAlignment: BackboneAlignment;\n  windowBasePairRange: WindowBasePairRange;\n  type: SyntenySectionType;\n  orientation: '+' | '-';\n  chromosome: string;\n  chainLevel: number;\n  isGapless?: boolean;\n  renderType: RenderType;\n}\n\nexport default class SyntenySection extends GenomicSection\n{\n  startLabel!: Label;            // start basepair label\n  stopLabel!: Label;             // stop basepair label\n  threshold?: number = 0;        // threshold level this object was created at\n  orientation: Orientation = '+';  // orientation of the synteny block\n  chainLevel: number = 0;        // level of the chain that this section is on\n  isInverted: boolean = false;\n\n  constructor(params: SyntenySectionParams)\n  {\n    super({\n      speciesName: params.speciesName,\n      mapName: params.mapName,\n      start: params.start,\n      stop: params.stop,\n      type: params.type,\n      color: Chromosome.getColor(params.chromosome),\n      backboneAlignment: params.backboneAlignment,\n      windowBasePairRange: params.windowBasePairRange,\n      renderType: params.renderType,\n      chromosome: params.chromosome,\n    });\n\n    this.orientation = params.orientation;\n    this.isInverted = (params.orientation === '-');\n    this.chainLevel = params.chainLevel;\n\n    // Only build these section labels for gapless blocks to display in overview panel\n    if (params.isGapless)\n    {\n      this.createSyntenySectionLabels();\n    }\n  }\n\n  private createSyntenySectionLabels()\n  {\n    this.startLabel = new Label({\n      posX: this.posX2,\n      posY: this.posY1,\n      text: Formatter.convertBasePairToLabel(this.speciesStart) || '',\n      isVisible: false,\n    });\n    this.stopLabel = new Label({\n      posX: this.posX2,\n      posY: this.posY2,\n      text: Formatter.convertBasePairToLabel(this.speciesStop) || '',\n      isVisible: false,\n    });\n  }\n}","import { GeneDatatrack, VariantDensity } from \"./DatatrackSection\";\nimport Gene from \"./Gene\";\nimport { WindowBasePairRange, RenderType, BackboneAlignment } from \"./GenomicSection\";\nimport SyntenySection, { Orientation, SyntenySectionType } from \"./SyntenySection\";\n\n/**\n * Factory class used for more easily creating different types of GenomicSections with the same\n * species, chromosome, windowBasePairRange, and renderType data\n */\nexport class GenomicSectionFactory\n{\n  speciesName: string;\n  mapName: string;\n  chromosome: string;\n  windowBasePairRange: WindowBasePairRange;\n  renderType: RenderType;\n\n  constructor(speciesName: string, mapName: string, chromosome: string, windowBasePairRange: WindowBasePairRange, renderType: RenderType)\n  {\n    this.speciesName = speciesName;\n    this.mapName = mapName;\n    this.chromosome = chromosome;\n    this.windowBasePairRange = windowBasePairRange;\n    this.renderType = renderType;\n  }\n\n  /**\n   * Creates a SyntenySection\n   */\n  createSyntenySection(params: {start: number, stop: number, backboneAlignment: BackboneAlignment, type: SyntenySectionType, orientation: Orientation, chainLevel: number, isGapless?: boolean})\n  {\n    const {\n      start,\n      stop,\n      backboneAlignment,\n      type,\n      orientation,\n      chainLevel,\n      isGapless,\n    } = params;\n\n    return new SyntenySection({\n      speciesName: this.speciesName,\n      mapName: this.mapName,\n      chromosome: this.chromosome,\n      windowBasePairRange: this.windowBasePairRange,\n      renderType: this.renderType,\n      start: start,\n      stop: stop,\n      backboneAlignment: backboneAlignment,\n      type: type,\n      orientation: orientation,\n      chainLevel: chainLevel,\n      isGapless: isGapless,\n    });\n  }\n\n  /** \n   * Creates a GeneDatatrackSection\n   */\n  createGeneDatatrackSection(params: {gene: Gene, start: number, stop: number, backboneAlignment: BackboneAlignment}): GeneDatatrack\n  {\n    const {\n      gene,\n      start,\n      stop,\n      backboneAlignment,\n    } = params;\n\n    return new GeneDatatrack(gene, start, stop, backboneAlignment, this.speciesName, this.mapName, this.chromosome, this.windowBasePairRange, this.renderType);\n  }\n\n  /**\n   * Creates a new VariantDensity datatrack section\n   */\n  createVariantDensitySection(variantCount: number, maxCount: number, start: number, stop: number, backboneAlignment: BackboneAlignment): VariantDensity\n  {\n    return new VariantDensity(variantCount, maxCount, start, stop, backboneAlignment, this.speciesName, this.mapName, this.chromosome, this.windowBasePairRange, this.renderType);\n  }\n}","interface VariantPositionsParams\n{\n  mapKey: number;\n  speciesName? : string;\n  chromosome: string;\n  positions: number[];\n  blockStart: number;\n  blockStop: number\n  backboneStart: number;\n  backboneStop: number;\n}\n\nexport default class VariantPositions\n{\n  mapKey: number;\n  speciesName: string = '';\n  chromosome: string = '';\n  positions: number[] = [];\n  blockStart: number;\n  blockStop: number;\n  backboneStart: number;\n  backboneStop: number;\n\n  constructor(params: VariantPositionsParams)\n  {\n    this.mapKey = params.mapKey;\n    this.speciesName = params.speciesName ?? this.speciesName;\n    this.chromosome = params.chromosome;\n    this.positions = params.positions;\n    this.blockStart = params.blockStart;\n    this.blockStop = params.blockStop;\n    this.backboneStart = params.backboneStart;\n    this.backboneStop = params.backboneStop;\n  }\n}","import httpInstance from './httpInstance';\n\nexport default class VariantApi\n{\n  static async getVariants(chr: string, start: number, stop: number, mapKey: number)\n  {\n    const variantStartPositions = await httpInstance.get<any>(`/vcmap/variants/position/${chr}/${start}/${stop}/${mapKey}`);\n\n    return variantStartPositions.data;\n  }\n}","import { GenomicSectionFactory } from \"@/models/GenomicSectionFactory\";\nimport { BackboneAlignment } from \"@/models/GenomicSection\";\nimport VariantPositions from \"@/models/VariantPositions\";\nimport VariantApi from \"@/api/VariantApi\";\nimport Species from \"@/models/Species\";\nimport BackboneSection from \"@/models/BackboneSection\";\nimport { VariantDensity } from \"@/models/DatatrackSection\";\nimport { processAlignmentsOfGeneInsideOfViewport, processAlignmentsOfGeneOutsideOfViewport } from \"./Shared\";\nimport Block from \"@/models/Block\";\n\nconst NUM_BINS = 100; // For whole window per species\nconst MIN_BIN_SIZE = 10000; // Smallest size for a variant density datatrack (in species base pairs)\n\nexport function createVariantDatatracks(factory: GenomicSectionFactory, positions: number[],\n  sequenceStart: number, sequenceStop: number, backboneStart: number, backboneStop: number,\n  invertedBlock: boolean, targetBlock?: Block): {datatracks: VariantDensity[], maxCount: number, binSize: number}\n{\n  const seqLength = sequenceStop - sequenceStart;\n  const backboneWindowStart = factory.windowBasePairRange.start;\n  const backboneWindowStop = factory.windowBasePairRange.stop;\n\n  // NOTE: to make sure counts are consistent within an off-backbone species, just go off the backbone size\n  const binSize = Math.max(Math.round((backboneWindowStop - backboneWindowStart) / NUM_BINS), MIN_BIN_SIZE);\n  // But then need to translate this \"binSize\" to what it would be for the backbone to increment backbone alignments\n  const backboneBinSize = Math.round(((backboneStop - backboneStart) / seqLength) * binSize);\n\n  // Ensure at least one bin for every section\n  const numBinsForSection = Math.max(Math.round(seqLength / binSize), 1);\n  const variantCounts: number[] = new Array(numBinsForSection).fill(0);\n  let binStart = sequenceStart;\n\n  for (let i = 0; i < positions.length; i++)\n  {\n    const binIdx = Math.min(Math.floor((positions[i] - sequenceStart) / binSize), numBinsForSection - 1);\n    variantCounts[binIdx]++;\n  }\n  const maxCount = getMaxVariantCount(variantCounts);\n  const variantDatatracks = [];\n  let backboneBinStart = 0;\n  let backboneBinStop = 0;\n  // NOTE: if the block is inverted, we'll start at the backboneStop\n  // and decrement the backboneBinStarts\n  if (invertedBlock) {\n    backboneBinStop = backboneStop;\n  } else {\n    backboneBinStart = backboneStart;\n  }\n  binStart = sequenceStart;\n  // NOTE: building the datatrack sections is really slow when zoomed in, so I should only build\n  // tracks for visible portions, and then keep track of the max counts for the overall color scale\n  for (let i = 0; i < variantCounts.length; i++)\n  {\n    const binStop = Math.min(binStart + binSize, sequenceStop);\n    if (invertedBlock) {\n      backboneBinStart = Math.max(backboneBinStop - backboneBinSize, backboneStart);\n    } else {\n      backboneBinStop = Math.min(backboneBinStart + backboneBinSize, backboneStop);\n    }\n    const backboneAlignment = getBackboneAlignment(binStart, binStop, backboneBinStart, backboneBinStop,\n      backboneWindowStart, backboneWindowStop, targetBlock);\n    if (isSectionInView(backboneAlignment.start, backboneAlignment.stop, backboneWindowStart, backboneWindowStop))\n    {\n      const newVariant = factory.createVariantDensitySection(variantCounts[i], maxCount, binStart, binStop, backboneAlignment);\n      newVariant.adjustYPositionsBasedOnVisibleStartAndStop(factory.windowBasePairRange);\n      variantDatatracks.push(newVariant);\n    }\n    binStart += binSize;\n    invertedBlock ? backboneBinStop -= backboneBinSize : backboneBinStart += backboneBinSize;\n  }\n\n  return {datatracks: variantDatatracks, maxCount: maxCount, binSize: binSize};\n}\n\n\nexport async function buildVariantPositions(chromosome: string, bpStart: number, bpStop: number,\n  backboneStart: number, backboneStop: number, mapKey: number)\n{\n  const positions = await VariantApi.getVariants(chromosome, bpStart, bpStop, mapKey);\n  return new VariantPositions({\n      mapKey: mapKey,\n      chromosome: chromosome,\n      positions: positions,\n      blockStart: bpStart,\n      blockStop: bpStop,\n      backboneStart: backboneStart,\n      backboneStop: backboneStop,\n  });\n}\n\nexport function backboneVariantTrackBuilder(species: Species, variantPositions: VariantPositions, backboneSection: BackboneSection)\n{\n  const factory = new GenomicSectionFactory(\n    species.name,\n    species.activeMap.name,\n    backboneSection.chromosome,\n    backboneSection.windowBasePairRange,\n    backboneSection.renderType\n  );\n\n  const variantDatatracks = createVariantDatatracks(\n    factory,\n    variantPositions.positions,\n    variantPositions.backboneStart,\n    variantPositions.backboneStop,\n    variantPositions.backboneStart,\n    variantPositions.backboneStop,\n    false\n  );\n\n  return variantDatatracks;\n}\n\n// NOTE: variant counts arrays can be really big so Math.max doesn't work\nexport function getMaxVariantCount(counts: number[]) {\n  // NOTE variants counts won't be negative, so setting initial max to 0 instead of -Infinity\n  let max = 0;\n  for (let i = 0; i < counts.length; i++)\n  {\n    if (counts[i] > max)\n    {\n      max = counts[i];\n    }\n  }\n\n  return max;\n}\n\nfunction isSectionInView(start: number, stop: number, backboneStart: number, backboneStop: number)\n{\n  return (start > backboneStart && start < backboneStop)\n    || (stop < backboneStop && stop > backboneStart)\n    || (start < backboneStart && stop > backboneStop);\n}\n\nfunction getBackboneAlignment(binStart: number, binStop: number,\n  backboneStart: number, backboneStop: number, backboneWindowStart: number,\n  backboneWindowStop: number, targetBlock?: Block): BackboneAlignment\n{\n  if (targetBlock) {\n    if (isSectionInView(targetBlock.backboneStart, targetBlock.backboneStop, backboneWindowStart, backboneWindowStop)) {\n      return processAlignmentsOfGeneInsideOfViewport(binStart, binStop, targetBlock);\n    } else {\n      return processAlignmentsOfGeneOutsideOfViewport(binStart, binStop, targetBlock);\n    }\n  } else {\n    return { start: backboneStart, stop: backboneStop};\n  }\n}","import Species from '@/models/Species';\nimport Chromosome from '@/models/Chromosome';\nimport SyntenyRegion from '@/models/SyntenyRegion';\nimport { GeneDatatrack } from '@/models/DatatrackSection';\nimport Gene from '@/models/Gene';\nimport SyntenyRegionSet from '@/models/SyntenyRegionSet';\nimport { GenomicSectionFactory } from '@/models/GenomicSectionFactory';\nimport Block from \"@/models/Block\";\nimport { RenderType } from '@/models/GenomicSection';\nimport { Orientation } from '@/models/SyntenySection';\nimport { getThreshold } from './Shared';\nimport { createVariantDatatracks } from './VariantBuilder';\nimport logger from '@/logger';\n\n/**\n * Create the off-backbone visual elements representing the large level 1 synteny\n * blocks.\n * \n * @param syntenyData\n *   The reactive ref to the Main prop that stores our comparative genomic data\n *     we will use to build the off-backbone representations.\n * @param comparativeSpecies\n *   List of the comparative species, in the order we want the Datatracks created.\n * @param backboneChr\n *   The backbone chromosome.\n * \n * @returns\n *   SyntenyRegionSets representing the off-backbone synteny data in the overview panel\n */\nexport async function createOverviewSyntenicRegionSets(syntenyData: Map<number, Block[]>, comparativeSpecies: Species[],\n    backboneChr: Chromosome): Promise<SyntenyRegionSet[]>\n{\n  const syntenyRegionSets: SyntenyRegionSet[] = [];\n\n  // TODO: This code is extremely similar to building synteny blocks WITH datatracks, need to reorganize this...\n  let setOrder = 1;\n  syntenyData.forEach((blocks, mapKey) => {\n    const currSpecies = comparativeSpecies.find((compSpecies) => compSpecies.activeMap.key == mapKey);\n    if (!currSpecies) return;\n\n    const processedSyntenicRegions: SyntenyRegion[] = [];\n    for (let blockIdx = 0; blockIdx < blocks.length; blockIdx++)\n    {\n      const blockInfo = blocks[blockIdx];\n      //const blockGaps = blockInfo.gaps;\n      const blockChrStr = blockInfo.chromosome.chromosome;\n\n\n      // Create a factory for the creation of our \"Regions\" (Blocks, Gaps, etc)\n      const factory = new GenomicSectionFactory(currSpecies.name, currSpecies.activeMap.name, blockChrStr,\n        {start: 0, stop: backboneChr.seqLength}, 'overview'\n      );\n\n      // Create the SyntenySection representing the gapless block\n      // Note: It's important to set start/stop based on orientation here as processing\n      //   further down the chain relies on it.\n      // TODO: this code makes me wonder if we cannot revisit the relationship between:\n      //    SyntenyRegion / SyntenySection / GenomicSection\n      const gaplessBlockSection = factory.createSyntenySection({\n        start: (blockInfo.orientation === '-') ? blockInfo.stop : blockInfo.start,\n        stop: (blockInfo.orientation === '-') ? blockInfo.start : blockInfo.stop,\n        backboneAlignment: {start: blockInfo.backboneStart, stop: blockInfo.backboneStop},\n        type: 'block',\n        orientation: blockInfo.orientation,\n        chainLevel: blockInfo.chainLevel,\n        isGapless: true,\n      });\n      // Create the SyntenyRegion that covers the extent of the Block\n      // NOTE: This might extend beyond the visible window, but we will try to only create\n      //   any \"gappy\" GenomicSection blocks within the visible range to minimize DOM nodes\n      //   that will ultimately be added to the DOM via the SVG.\n      const currSyntenicRegion = new SyntenyRegion({\n        species: currSpecies.name,\n        mapName: currSpecies.activeMap.name,\n        gaplessBlock: gaplessBlockSection,\n      });\n      // FIXME: Create a single visible block (ignoring gap data)\n      currSyntenicRegion.syntenyBlocks.push(gaplessBlockSection);\n\n      processedSyntenicRegions.push(currSyntenicRegion);\n    }\n    syntenyRegionSets.push(new SyntenyRegionSet(currSpecies.name, currSpecies.activeMap, processedSyntenicRegions, setOrder, 'overview'));\n    setOrder++;\n  });\n\n  return syntenyRegionSets;\n}\n\n/**\n * This function uses our Synteny Data to create the DetailedPanel view of a region on\n * the Backbone chromosome. This traverses our data given the specified window of visible\n * basepairs on the Backbone, and creates a \"SyntenicRegionSet\" for each \"Species\".\n * \n * @param syntenyData\n *     The reactive ref to the Main prop that stores our comparative genomic data\n *     we will use to build the off-backbone representations.\n * @param comparativeSpecies\n *     List of the comparative species, in the order we want the Datatracks created.\n * @param backboneStart\n *     The start of the visible range (in the backbone basepair coordinate scale).\n * @param backboneStop\n *     The stop of the visible range (in the backbone basepair coordinate scale).\n *\n * @returns\n *     The processed SyntenicRegionSets for each species.\n */\nexport async function createSyntenicRegionSets(syntenyData: Map<number, Block[]>, comparativeSpecies: Species[],\n  backboneStart: number, backboneStop: number): Promise<SyntenyRegionSet[]>\n{\n  const syntenyRegionSets: SyntenyRegionSet[] = [];\n\n  // Process each species of our synteny Tree separately\n  if (syntenyData && syntenyData.size > 0)\n  {\n    let pos = 1;\n    syntenyData.forEach((speciesSyntenyData, mapKey) => {\n      // NOTE: In the future we are going to have to address how we will allow the\n      //   possibility of a Species with >1 \"active\" map. For example, loading multiple\n      //   assemblies for one Species to allow comparing assembly differences...\n      const species = comparativeSpecies.find((species) => { return species.activeMap.key == mapKey; });\n      if (!species)\n      {\n        logger.error(`Cannot find Species object for mapKey ${mapKey}!!`);\n        return;\n      }\n\n      const syntenyRegionSet = syntenicSectionBuilder(speciesSyntenyData, species, pos,\n          backboneStart, backboneStop, 'detailed');\n\n      logger.log(`Completed build of Synteny for ${syntenyRegionSet?.mapName}, with ${syntenyRegionSet?.regions.length} regions`);\n\n      // Add this to our final Array\n      if (syntenyRegionSet) syntenyRegionSets.push(syntenyRegionSet);\n      pos++;\n    });\n  }\n\n  return syntenyRegionSets;\n}\n\n\n/**\n * Builds SyntenyRegions made up of SyntenySections (blocks/gaps) and DatatrackSections (genes, etc)\n * \n * @param speciesSyntenyData\n *   An array of synteny Blocks belonging to a particular species\n * @param species\n *   The comparative Species model\n * @param setOrder\n *   The position that this list of SyntenyRegions will hold in the panel (1 is first SyntenyRegionSet, 2 is the 2nd, etc)\n * @param viewportStart\n *   The backbone start position of the viewport (otherwise known as the overview or detailed panel)\n * @param viewportStop\n *   The backbone stop position of the viewport (otherwise known as the overview or detailed panel)\n * @param renderType\n *   The type of RegionSet to create (overview or detailed).\n * @returns\n *   The renderable version of speciesSyntenyData represented as an array of type SyntenyRegion[]\n */\nfunction syntenicSectionBuilder(speciesSyntenyData: Block[], species: Species, setOrder: number,\n    viewportStart: number,  viewportStop: number, renderType: RenderType)\n{\n  const processedSyntenicRegions: SyntenyRegion[] = [];\n\n  const currSpecies = species;\n  const processVariantDensity = speciesSyntenyData.some((block) => block.variantPositions && block.variantPositions.positions.length > 0);\n  let regionMaxCount = 0;\n  let regionBinSize = 0;\n  // const allGeneLabels: Label[] = [];\n\nlogger.debug(`About to loop over ${speciesSyntenyData.length} Blocks...`);\n  // Step 1: Create syntenic sections for each VISIBLE block\n  for (let index = 0; index < speciesSyntenyData.length; index++)\n  {\n    const blockInfo = speciesSyntenyData[index];\n    const blockGaps = blockInfo.gaps;\n    const blockGenes = blockInfo.genes;\n    const blockChrStr = blockInfo.chromosome.chromosome;\n    const blockVariantPositions = blockInfo.variantPositions;\n\n    // Create a factory for the creation of our \"Regions\" (Blocks, Gaps, etc)\n    const factory = new GenomicSectionFactory(currSpecies.name, currSpecies.activeMap.name, blockChrStr,\n        { start: viewportStart, stop: viewportStop }, renderType\n    );\n\n    // Create the SyntenySection representing the gapless block\n    // Note: It's important to set start/stop based on orientation here as processing\n    //   further down the chain relies on it.\n    // TODO: this code makes me wonder if we cannot revisit the relationship between:\n    //    SyntenyRegion / SyntenySection / GenomicSection\nlogger.time('createSyntenySectionAndRegion');\n    const gaplessBlockSection = factory.createSyntenySection({\n      start: (blockInfo.orientation === '-') ? blockInfo.stop : blockInfo.start,\n      stop: (blockInfo.orientation === '-') ? blockInfo.start : blockInfo.stop,\n      backboneAlignment: { start: blockInfo.backboneStart, stop: blockInfo.backboneStop },\n      type: 'block',\n      orientation: blockInfo.orientation,\n      chainLevel: blockInfo.chainLevel,\n      isGapless: true,\n    });\n    // Create the SyntenyRegion that covers the extent of the Block\n    // NOTE: This might extend beyond the visible window, but we will try to only create\n    //   any \"gappy\" GenomicSection blocks within the visible range to minimize DOM nodes\n    //   that will ultimately be added to the DOM via the SVG.\n    const currSyntenicRegion = new SyntenyRegion({\n      species: currSpecies.name,\n      mapName: currSpecies.activeMap.name,\n      gaplessBlock: gaplessBlockSection,\n      genes: blockGenes,\n    });\nlogger.timeEnd('createSyntenySectionAndRegion');\n\n    // Step 2: Split the gapless Block into multiple GenomicSections based on gaps.\nlogger.time(\"splitBlockWithGaps\");\n    logger.log(`Splitting block w/ ${blockGaps.length} gaps`);\n    currSyntenicRegion.splitBlockWithGaps(factory, blockGaps);\nlogger.timeEnd(\"splitBlockWithGaps\");\n\n    // Check if there are variants and build those data tracks\n    if (blockVariantPositions && processVariantDensity)\n    {\n      const variantDatatracks = createVariantDatatracks(factory, blockVariantPositions.positions,\n        blockInfo.start, blockInfo.stop, blockInfo.backboneStart, blockInfo.backboneStop, blockInfo.isBlockInverted(), blockInfo);\n      currSyntenicRegion.addDatatrackSections(variantDatatracks.datatracks, 0, 'variant');\n      regionBinSize = variantDatatracks.binSize;\n      if (variantDatatracks.maxCount > regionMaxCount)\n      {\n        regionMaxCount = variantDatatracks.maxCount;\n      }\n    }\n\n    // Step 3: For each (now processed) block, create a SyntenySection for each gene\n    if (blockGenes && blockGenes.length > 0)\n    {\n      // Filter all genes to only those that are visible\nlogger.time(\"  filterVisibleGenes\");\n      const visibleGenes = blockGenes.filter((gene) => {\n        if (!gene.backboneStart || !gene.backboneStop) return false;\n\n        return (gene.backboneStart <= viewportStop \n          && gene.backboneStop >= viewportStart\n          // Skip any genes that are deemed too small for rendering\n          && Math.abs(gene.backboneStop - gene.backboneStart) >= getThreshold(viewportStop - viewportStart));\n      });\nlogger.timeEnd(\"  filterVisibleGenes\");\n\n// logger.debug(\"Step 3: Create Syntenic Sections for each gene\")\n      // Step 3.1: Pass block data and gene data to gene processing pipeline\n      // NOTE: We might want to instead associate block data with gene data, store data in an array, and pass all gene\n      //   data at once for processing in order to avoid multiple passes of gene data for initial processing and then finding orthologs\nlet timerLabel = `  syntenicDataTrackBuilder(${visibleGenes.length})`;\nlogger.time(timerLabel);\n      // const processedGeneInfo = {genomicData: [], orthologLines: [], geneIds: []};\n// logger.log('Visible Gene list: ', visibleGenes);\n      const processedGeneInfo = syntenicDatatrackBuilder(factory, visibleGenes, blockInfo.orientation);\n// FIXME: I have a theory that the \"Gene\" object used to create the GeneDataTrack may be too heavy and not need references\n//   for things like the Block it is owned by. Would like to explore this next potentially...\nlogger.timeEnd(timerLabel);\n\n      // Get the index for the gene data track set, otherwise default to 0\ntimerLabel = `  addDatatrackSections(${processedGeneInfo.length})`;\nlogger.time(timerLabel);\n      // let geneTrackIdx = currSyntenicRegion.datatrackSets.findIndex((set) => set.type === 'gene');\n      // geneTrackIdx = geneTrackIdx === -1 ? 0 : geneTrackIdx;\n      // currSyntenicRegion.addDatatrackSections(processedGeneInfo, geneTrackIdx, 'gene');\n\n      // Add gene datatrack sections (this will always be the last datatrack set)\n      const idx = currSyntenicRegion.datatrackSets.length;\n      currSyntenicRegion.addDatatrackSections(processedGeneInfo, idx, 'gene');\nlogger.timeEnd(timerLabel);\n     } else {\n      // Add empty gene datatrack section so every region as one\n      const idx = currSyntenicRegion.datatrackSets.length;\n      currSyntenicRegion.addDatatrackSections([], idx, 'gene');\n     }\n\n    processedSyntenicRegions.push(currSyntenicRegion);\n  }\n\n  // Adjust variant datatrack colors now that all are processed\n  if (processVariantDensity && regionMaxCount > 0)\n  {\n    for (let i = 0; i < processedSyntenicRegions.length; i++)\n    {\n      const variantIdx = processedSyntenicRegions[i].datatrackSets.findIndex((set) => set.type === 'variant');\n      if (variantIdx !== -1)\n      {\n        processedSyntenicRegions[i].datatrackSets[variantIdx].datatracks.forEach((track: any) =>{\n            track.setSectionColor(regionMaxCount);\n        });\n      }\n    }\n  }\n\n  // Finished creating this Set:\nlogger.time(\"createSyntenyRegionSet\");\n  const regionSet = new SyntenyRegionSet(currSpecies.name, currSpecies.activeMap, processedSyntenicRegions, setOrder, renderType);\n  regionSet.maxVariantCount = regionMaxCount;\n  regionSet.variantBinSize = regionBinSize;\nlogger.timeEnd(\"createSyntenyRegionSet\");\n  return regionSet;\n}\n\n\n// TODO: Generalize away from genes and make more generic (can we build sections for both genes and variants using this method?)\n/**\n * Builds DatatrackSections for genomic data passed (such as genes) for a given block.\n *\n * @param factory\n *   GenomicSectionFactory to be used for generating the DatatrackSections\n * @param genomicData\n *   Array of Genes that will be converted to DatatrackSections\n * @param orientation\n *   Orientation of the block that the gene belongs to\n *\n * @returns\n *   List of DatatrackSections mapped for the given block.\n */\nfunction syntenicDatatrackBuilder(factory: GenomicSectionFactory, genomicData: Gene[], orientation: Orientation)\n{\n  // For each gene, build a GeneDatatrackSection element\n  const processedGenomicData: GeneDatatrack[] = [];\n\nlet createStart = 0, pushStart = 0, createTotal = 0.0, pushTotal = 0.0;\n\n  for (let idx = 0, len = genomicData.length; idx < len; idx++) {\n    // Get backbone equivalents for gene data, or skip\n    const genomicElement: Gene = genomicData[idx];\n    if (genomicElement.backboneStart === null || genomicElement.backboneStop === null)\n    {\n      logger.error(`Genomic Element ${genomicElement.symbol} sent to render without a backbone alignment`);\n      continue;\n    }\n\ncreateStart = performance.now();\n    // Create DatatrackSection for each gene (account for inversion in start/stops)\n    const geneDatatrackSection = factory.createGeneDatatrackSection({\n      gene: genomicElement,\n      start: (orientation === '-') ? genomicElement.stop : genomicElement.start,\n      stop: (orientation === '-') ? genomicElement.start : genomicElement.stop,\n      backboneAlignment: {\n        start: genomicElement.backboneStart,\n        stop: genomicElement.backboneStop\n      }\n    });\ncreateTotal += (performance.now() - createStart);\n\npushStart = performance.now();\n    processedGenomicData.push(geneDatatrackSection);\npushTotal += (performance.now() - pushStart);\n  }\n\nlogger.debug(`    Create total: ${createTotal}`);\nlogger.debug(`    Push total: ${pushTotal}`);\n\n  return processedGenomicData;\n}\n\n/**\n * TODO: Documentation\n */\n// function convertSyntenicDataToBackboneData(genomicObject: SyntenyComponent | Gene, syntenyRegion: SyntenyRegion): BackboneAlignment\n// {\n//   const syntenySections = syntenyRegion.sortedSyntenicBlocksAndGaps;\n//   const isInverted = syntenyRegion.gaplessBlock.isInverted;\n//\n//   // Orient gene start/stop based on synteny block orientation\n//   const geneStart = syntenyRegion.gaplessBlock.isInverted ? genomicObject.stop : genomicObject.start;\n//   const geneStop = syntenyRegion.gaplessBlock.isInverted ? genomicObject.start : genomicObject.stop;\n//\n//   // Find which block this gene starts in and determine a starting backbone position based on that block's \"backbone bp/block bp\" ratio\n//   let startingSection: SyntenySection | null = null;\n//   let endingSection: SyntenySection | null = null;\n//   for (let i = 0; i < syntenySections.length; i++)\n//   {\n//     if (startingSection && endingSection)\n//     {\n//       break;\n//     }\n//\n//     if (isInverted)\n//     {\n//       if (geneStart <= syntenySections[i].speciesStart && geneStart >= syntenySections[i].speciesStop)\n//       {\n//         startingSection = syntenySections[i];\n//       }\n//\n//       // The ending section is when the gene stop\n//       if (geneStop <= syntenySections[i].speciesStart && geneStop >= syntenySections[i].speciesStop)\n//       {\n//         endingSection = syntenySections[i];\n//       }\n//     }\n//     else\n//     {\n//       if (geneStart >= syntenySections[i].speciesStart && geneStart <= syntenySections[i].speciesStop)\n//       {\n//         startingSection = syntenySections[i];\n//       }\n//\n//       if (geneStop >= syntenySections[i].speciesStart && geneStop <= syntenySections[i].speciesStop)\n//       {\n//         endingSection = syntenySections[i];\n//       }\n//     }\n//   }\n//\n//   let backboneStart;\n//   let backboneStop;\n//\n//   if (startingSection)\n//   {\n//     const geneStartDiff = isInverted ? startingSection.speciesStart - geneStart : geneStart - startingSection.speciesStart;\n//     const startBackboneDiff = Math.max(geneStartDiff, 0) * startingSection.blockRatio;\n//     backboneStart = startingSection.backboneAlignment.start + startBackboneDiff;\n//   }\n//   else\n//   {\n//     // Default to top of first section\n//     backboneStart = syntenySections[0].backboneAlignment.start;\n//   }\n//\n//   if (endingSection)\n//   {\n//     const geneStopDiff = isInverted ? geneStop - endingSection.speciesStop : endingSection.speciesStop - geneStop;\n//     const stopBackboneDiff = Math.max(geneStopDiff, 0) * endingSection.blockRatio;\n//     backboneStop = endingSection.backboneAlignment.stop - stopBackboneDiff;\n//   }\n//   else\n//   {\n//     // Default to end of last section\n//     backboneStop = syntenySections[syntenySections.length - 1].backboneAlignment.stop;\n//   }\n//\n//   return {\n//     start: backboneStart,\n//     stop: backboneStop,\n//   };\n// }\n\n/**\n * TODO: Remove if no longer needed for reference\n */\n// function orthologLineBuilder(masterProcessedGenes: Map<number, LoadedGene>, processedSpecies: string, currGene: GeneDatatrack)\n// {\n//   const orthologLines: OrthologLine[] = [];\n//   currGene.gene.orthologs.forEach((rgdId: number) => {\n//     const loadedGene = masterProcessedGenes.get(rgdId);\n//     if (loadedGene && loadedGene.backboneOrtholog != null)\n//     {\n//       const orthologLine = new OrthologLine({\n//         backboneGene: loadedGene.backboneOrtholog, \n//         comparativeGene: currGene,\n//       });\n//       orthologLines.push(orthologLine);\n//     }\n//   });\n\n//   return orthologLines;\n// }","import { onMounted, ref } from \"vue\";\nimport { getMousePosSVG } from '@/utils/SVGHelpers';\nimport { Store } from \"vuex\";\nimport { VCMapState } from \"@/store\";\nimport BackboneSection from \"@/models/BackboneSection\";\nimport constants, {PANEL_SVG_START, PANEL_SVG_STOP} from \"@/utils/SVGConstants\";\n\nexport default function useOverviewPanelSelection(store: Store<VCMapState>) {\n  let inSelectMode = false;\n  let startingPoint: DOMPoint | { y: number, x: number };\n  const startOverviewSelectionY = ref<number>();\n  const stopOverviewSelectionY = ref<number>();\n  let svg: SVGSVGElement | null;\n\n  onMounted(() => {\n    svg = document.querySelector('svg');\n  });\n\n  const getOverviewSelectionStatus = () => {\n    return inSelectMode;\n  };\n\n  const overviewSelectionHandler = (event: any, isDetailedPanelSelecting: boolean, overviewBackbone?: BackboneSection) => {\n    if (store.state.isOverviewPanelUpdating || store.state.isDetailedPanelUpdating || isDetailedPanelSelecting)\n    {\n      // Don't allow a selection until both panels are done updating\n      return;\n    }\n\n    if (!inSelectMode) {\n      inSelectMode = true;\n      startingPoint = getMousePosSVG(svg, event);\n      startOverviewSelectionY.value = startingPoint.y;\n      return;\n    }\n\n    completeOverviewSelection(overviewBackbone);\n  };\n\n  const initOverviewSelection = (event: any) => {\n    if (store.state.isOverviewPanelUpdating || store.state.isDetailedPanelUpdating)\n    {\n      // Don't allow a selection until both panels are done updating\n      return;\n    }\n\n    inSelectMode = true;\n    startingPoint = getMousePosSVG(svg, event);\n\n    startOverviewSelectionY.value = startingPoint.y;\n  };\n\n  const updateOverviewSelection = (event: any) => {\n    if (!inSelectMode) return;\n\n    const currentSVGPoint = getMousePosSVG(svg, event);\n\n    if (currentSVGPoint.y < startingPoint.y)\n    {\n      // We are moving above the starting point\n      startOverviewSelectionY.value = currentSVGPoint.y;\n      stopOverviewSelectionY.value = startingPoint.y;\n    }\n    else\n    {\n      // We are moving below the starting point\n      stopOverviewSelectionY.value = currentSVGPoint.y;\n    }\n  };\n\n  const cancelOverviewSelection = () => {\n    if (inSelectMode) {\n      inSelectMode = false;\n      // Clear selection box\n      startOverviewSelectionY.value = undefined;\n      stopOverviewSelectionY.value = undefined;\n    }\n\n  };\n\n  const completeOverviewSelection = (overviewBackbone?: BackboneSection) => {\n    if (!inSelectMode || !overviewBackbone || !store.state.chromosome) return;\n\n    inSelectMode = false;\n    const toastCount = store.state.selectionToastCount;\n\n    if (startOverviewSelectionY.value != null && stopOverviewSelectionY.value != null)\n    {\n      const svgHeight = PANEL_SVG_STOP - PANEL_SVG_START - (2 * constants.overviewTrackPadding);\n      const bpVisibleWindowLength = store.state.chromosome.seqLength;\n      const pixelsPerBpRatio = svgHeight / bpVisibleWindowLength;\n      let basePairStart = Math.floor((startOverviewSelectionY.value - PANEL_SVG_START  - constants.overviewTrackPadding) / pixelsPerBpRatio);\n      let basePairStop = Math.floor((stopOverviewSelectionY.value - PANEL_SVG_START  - constants.overviewTrackPadding) / pixelsPerBpRatio);\n\n      // never emit base pair range outside of the backbone chromosome start/stop\n      if (basePairStart < 0) {\n        basePairStart = 0;\n      }\n      if (basePairStop > store.state.chromosome.seqLength) {\n        basePairStop = store.state.chromosome.seqLength;\n      }\n\n      const selectedBackboneRegion = store.state.selectedBackboneRegion;\n      if (selectedBackboneRegion && selectedBackboneRegion.setViewportSelection)\n      {\n        selectedBackboneRegion.setViewportSelection(basePairStart, basePairStop);\n        //store.dispatch('setBackboneSelection', selectedBackboneRegion);\n        store.dispatch('setSelectionToastCount', toastCount + 1);\n        store.dispatch('setDetailedBasePairRequest', { start: basePairStart, stop: basePairStop });\n      }\n    }\n\n    // Clear selection box\n    startOverviewSelectionY.value = undefined;\n    stopOverviewSelectionY.value = undefined;\n  };\n\n  return {\n    overviewSelectionHandler,\n    startOverviewSelectionY,\n    stopOverviewSelectionY,\n    initOverviewSelection,\n    updateOverviewSelection,\n    cancelOverviewSelection,\n    completeOverviewSelection,\n    getOverviewSelectionStatus\n  };\n}","import Label from './Label';\nimport SVGConstants from '@/utils/SVGConstants';\nimport { Formatter } from '@/utils/Formatter';\nimport Chromosome from './Chromosome';\nimport Gene from '@/models/Gene';\nimport GenomicSection, { RenderType, WindowBasePairRange } from './GenomicSection';\nimport Species from './Species';\n\nexport type BackboneSectionParams = {\n  start: number;\n  stop: number;\n  windowBasePairRange: WindowBasePairRange;\n  chromosome: string;\n  species: Species;\n  renderType: RenderType;\n  createLabels?: boolean;\n}\n\nexport default class BackboneSection extends GenomicSection\n{\n  labels: Label[] = []; // BP labels for the backbone section\n  renderType: RenderType = 'overview';\n  hasLabels: boolean = false;\n  backboneGenes?: Gene[]; // All Genes that fit within this backbone section\n\n  constructor(params: BackboneSectionParams)\n  {\n    super({\n      speciesName: params.species.name,\n      mapName: params.species.activeMap.name,\n      chromosome: params.chromosome,\n      start: params.start,\n      stop: params.stop,\n      type: 'block',\n      color: Chromosome.getColor(params.chromosome ?? ''),\n      backboneAlignment: {\n        start: params.start,\n        stop: params.stop,\n      },\n      windowBasePairRange: params.windowBasePairRange,\n      renderType: params.renderType,\n    });\n\n    this.renderType = params.renderType;\n    this.hasLabels = params.createLabels ?? false;\n\n    if (this.hasLabels)\n    {\n      this.createLabels();\n    }\n  }\n\n  public setBackboneGenes(backboneGenes: Gene[])\n  {\n    this.backboneGenes = backboneGenes.map(g => g.clone());\n  }\n\n  private createLabels()\n  {\n    let startBPLabel: Label;\n    let stopBPLabel: Label;\n\n    if (this.renderType === 'overview')\n    {\n      startBPLabel = new Label({\n        posX: SVGConstants.backboneXPosition - (SVGConstants.trackWidth / 2 ),\n        posY: this.windowSVGStart - 3,\n        text: Formatter.convertBasePairToLabel(this.windowStart) ?? ''\n      });\n\n      stopBPLabel = new Label({\n        posX: SVGConstants.backboneXPosition - (SVGConstants.trackWidth / 2 ),\n        posY: this.windowSVGStop + 7,\n        text: Formatter.convertBasePairToLabel(this.windowStop) ?? ''\n      });\n    }\n    else\n    {\n      startBPLabel = new Label({\n        posX: SVGConstants.selectedBackboneXPosition - (SVGConstants.trackWidth / 2 ),\n        posY: this.windowSVGStart + 10,\n        text: Formatter.convertBasePairToLabel(this.windowStart) ?? ''\n      });\n\n      stopBPLabel = new Label({\n        posX: SVGConstants.selectedBackboneXPosition - (SVGConstants.trackWidth / 2 ),\n        posY: this.windowSVGStop - 10,\n        text: Formatter.convertBasePairToLabel(this.windowStop) ?? ''\n      });\n    }\n    \n    this.labels = [startBPLabel, stopBPLabel];\n  }\n}","import { ProcessedGenomicData } from \"@/utils/BackboneBuilder\";\nimport SVGConstants from \"@/utils/SVGConstants\";\nimport { mergeAndCreateGeneLabels } from \"@/utils/GeneLabelMerger\";\nimport BackboneSection from \"./BackboneSection\";\nimport DatatrackSection, { DatatrackSectionType } from \"./DatatrackSection\";\nimport DatatrackSet from \"./DatatrackSet\";\nimport { GenomicSet } from \"./GenomicSet\";\nimport Label, { GeneLabel, IntermediateGeneLabel } from \"./Label\";\nimport { calculateDetailedPanelSVGYPositionBasedOnBackboneAlignment, getDetailedPanelXPositionForBackboneDatatracks, isGenomicDataInViewport } from \"@/utils/Shared\";\nimport SpeciesMap from \"./SpeciesMap\";\nimport logger from \"@/logger\";\n\n/**\n * Model for representing a set of Backbone sections and its datatrack sections\n */\nexport default class BackboneSet extends GenomicSet\n{\n  backbone: BackboneSection;\n  datatrackSets: DatatrackSet[] = [];\n  geneLabels: GeneLabel[] = [];\n  // TODO: figure out if this is this best place for this,\n  // because it's only relevant to variant density\n  maxVariantCount?: number;\n  variantBinSize?: number;\n\n  constructor(backboneSection: BackboneSection, map: SpeciesMap, processedGenomicData?: ProcessedGenomicData)\n  {\n    super(backboneSection.speciesName, map);\n\n    this.backbone = backboneSection;\n    if (processedGenomicData?.datatracks)\n    {\n      this.datatrackSets.push(new DatatrackSet(processedGenomicData.datatracks, 'gene'));\n    }\n    if (processedGenomicData && processedGenomicData.datatracks.length > 0)\n    {\n      this.backbone.setBackboneGenes(processedGenomicData.genes);\n    }\n    this.setBackboneXPositions();\n    this.createTitleLabels();\n    this.setDatatrackXPositions();\n\n    if (this.backbone.renderType === 'detailed')\n    {\n      logger.time(`Create Backbone Gene Labels`);\n      this.generateGeneLabels();\n      logger.timeEnd(`Create Backbone Gene Labels`);\n    }\n  }\n\n  protected createTitleLabels()\n  {\n    const speciesLabel = new Label({\n      posX: this.backbone.posX1,\n      posY: SVGConstants.trackLabelYPosition,\n      text: this.speciesName ?? 'Unknown',\n    });\n\n    const mapLabel = new Label({\n      posX: this.backbone.posX1,\n      posY: SVGConstants.trackMapLabelYPosition,\n      text: this.mapName ?? 'Unknown',\n      addClass: 'smaller',\n    });\n\n    this.titleLabels = [speciesLabel, mapLabel];\n  }\n\n  private setBackboneXPositions()\n  {\n    // Calculate X positions of this backbone section\n    if (this.backbone.renderType === 'overview')\n    {\n      this.backbone.posX1 = SVGConstants.backboneXPosition;\n      this.backbone.posX2 = this.backbone.posX1 + SVGConstants.trackWidth;\n    }\n    else if (this.backbone.renderType === 'detailed')\n    {\n      this.backbone.posX1 = SVGConstants.selectedBackboneXPosition;\n      this.backbone.posX2 = this.backbone.posX1 + SVGConstants.trackWidth;\n    }\n\n    this.backbone.width = Math.abs(this.backbone.posX2 - this.backbone.posX1);\n  }\n\n  private setDatatrackXPositions()\n  {\n    this.datatrackSets.forEach((set, index) => {\n      set.datatracks.forEach((section) => {\n        section.posX1 = getDetailedPanelXPositionForBackboneDatatracks(this.backbone.posX2, index);\n        //section.posX1 = this.backbone.posX2 + (SVGConstants.backboneDatatrackXOffset) * (index + 1) + (SVGConstants.backboneDatatrackXOffset * index);\n        section.posX2 = section.posX1 + SVGConstants.dataTrackWidth;\n        section.width = SVGConstants.dataTrackWidth;\n        if (section.label)\n        {\n          section.label.posX = section.posX2;\n        }\n      });\n    });\n  }\n\n  private generateGeneLabels()\n  {\n    if (this.backbone.backboneGenes == null || this.backbone.backboneGenes.length === 0)\n    {\n      return;\n    }\n\n    //\n    // First, create our intermediate gene-labels before passing them to the label merge processing:\n\n    // Get X position based on where the gene datatrack set is positioned\n    let xPos: number | null = null;\n    for (let i = 0; i < this.datatrackSets.length; i++)\n    {\n      if (this.datatrackSets[i].type === 'gene')\n      {\n        xPos = getDetailedPanelXPositionForBackboneDatatracks(this.backbone.posX2, i) + SVGConstants.dataTrackWidth;\n        break;\n      }\n    }\n\n    if (xPos == null)\n    {\n      logger.debug(`(BackboneSet) generateGeneLabels: xPos is null after iterating through DatatrackSets`);\n      return;\n    }\n\n    const filteredGenes = this.backbone.backboneGenes\n      .filter(g => isGenomicDataInViewport(g, this.backbone.windowSVGStart, this.backbone.windowStop));\n\n    logger.time(`Create intermediate labels`);\n    // Create intermediate gene labels for all genes in the viewport:\n    const intermediateLabels: IntermediateGeneLabel[] = [];\n    for (let i = 0; i < filteredGenes.length; i++)\n    {\n      const g = filteredGenes[i];\n      const yPos = calculateDetailedPanelSVGYPositionBasedOnBackboneAlignment(g.backboneStart, \n        g.backboneStop, this.backbone.windowStart, this.backbone.windowStop);\n      intermediateLabels.push({\n        gene: g,\n        posY: yPos,\n        posX: xPos,\n      });\n    }\n    logger.timeEnd('Create intermediate labels');\n\n    //\n    // Create the visible gene labels from our intermediate labels (apply merging logic as appropriate)\n    this.geneLabels = mergeAndCreateGeneLabels(intermediateLabels);\n  }\n\n  public addNewDatatrackSetToEnd(datatrackSections: DatatrackSection[], type: DatatrackSectionType)\n  {\n    this.datatrackSets.push(new DatatrackSet(datatrackSections, type));\n    this.setDatatrackXPositions();\n  }\n\n  public addNewDatatrackSetToStart(datatrackSections: DatatrackSection[], type: DatatrackSectionType)\n  {\n    this.datatrackSets.unshift(new DatatrackSet(datatrackSections, type));\n    this.setDatatrackXPositions();\n    this.updateGeneLabelXPositions();\n  }\n\n  public addToDatatrackSet(datatrackSections: DatatrackSection[], datatrackSetIdx: number)\n  {\n    this.datatrackSets[datatrackSetIdx].addDatatrackSections(datatrackSections);\n    this.setDatatrackXPositions();\n  }\n\n  public removeDatatrackSet(datatrackSetIdx: number)\n  {\n    this.datatrackSets.splice(datatrackSetIdx, 1);\n    this.setDatatrackXPositions();\n    this.updateGeneLabelXPositions();\n  }\n\n  public updateGeneLabelXPositions()\n  {\n    if (this.backbone.backboneGenes == null || this.backbone.backboneGenes.length === 0)\n    {\n      return;\n    }\n\n    // Get X position based on where the gene datatrack set is positioned\n    let xPos: number | null = null;\n    for (let i = 0; i < this.datatrackSets.length; i++)\n    {\n      if (this.datatrackSets[i].type === 'gene')\n      {\n        xPos = getDetailedPanelXPositionForBackboneDatatracks(this.backbone.posX2, i) + SVGConstants.dataTrackWidth;\n        break;\n      }\n    }\n\n    if (xPos == null)\n    {\n      logger.debug(`(BackboneSet) updateGeneLabelXPositions: xPos is null after iterating through DatatrackSets`);\n      return;\n    }\n\n    for (let i = 0; i < this.geneLabels.length; i++)\n    {\n      this.geneLabels[i].posX = xPos;\n    }\n  }\n\n  public get geneDatatrackSetIndex()\n  {\n    for (let i = 0; i < this.datatrackSets.length; i++)\n    {\n      if (this.datatrackSets[i].type === 'gene')\n      {\n        return i;\n      }\n    }\n\n    return 0;\n  }\n}","import BackboneSection from \"@/models/BackboneSection\";\nimport Chromosome from \"@/models/Chromosome\";\nimport Species from \"@/models/Species\";\nimport Gene from \"@/models/Gene\";\nimport DatatrackSection from \"@/models/DatatrackSection\";\nimport BackboneSet from \"@/models/BackboneSet\";\nimport { RenderType } from \"@/models/GenomicSection\";\nimport { GenomicSectionFactory } from \"@/models/GenomicSectionFactory\";\nimport { getThreshold } from \"./Shared\";\nimport SpeciesMap from \"@/models/SpeciesMap\";\nimport logger from \"@/logger\";\n\nexport interface ProcessedGenomicData\n{\n  datatracks: DatatrackSection[],\n  genes: Gene[],\n}\n\n/**\n * Creates a BackboneSection model\n */\nexport function createBackboneSection(species: Species, chromosome: Chromosome, startPos: number, stopPos: number,\n                                      renderType: RenderType)\n{\n  return new BackboneSection({\n    chromosome: chromosome.chromosome,\n    species: species,\n    start: startPos,\n    stop: stopPos,\n    windowBasePairRange: {\n      start: startPos,\n      stop: stopPos,\n    },\n    renderType: renderType,\n    createLabels: true,\n  });\n}\n\nexport function backboneDatatrackBuilder(species: Species, genomicData: Gene[], backboneSection: BackboneSection)\n{\n  // const masterGeneMap = new Map<number, LoadedGene>();\n  const processedGenomicData: ProcessedGenomicData = {\n    datatracks: [],\n    genes: genomicData,\n  };\n\n  // Create all gene datatrack sections with same species, chromosome, visible window range, etc\n  const factory = new GenomicSectionFactory(\n    species.name,\n    species.activeMap.name, \n    backboneSection.chromosome, \n    backboneSection.windowBasePairRange, \n    backboneSection.renderType\n  );\n\n  const visibleBPRange = backboneSection.windowBasePairRange.stop - backboneSection.windowBasePairRange.start;\n  let filteredGeneCount = 0;\n  // NOTE: Intentionally using a basic for loop here to avoid extra functions on the call stack\n  for (let i = 0, len = genomicData.length; i < len; i++)\n  {\n    const genomicElement = genomicData[i];\n\n    // Skip any genes that are deemed too small for rendering\n    if (Math.abs(genomicElement.stop - genomicElement.start) < getThreshold(visibleBPRange))\n    {\n      filteredGeneCount++;\n      continue;\n    }\n\n    const geneDatatrackSection = factory.createGeneDatatrackSection({\n      gene: genomicElement,\n      start: genomicElement.start,\n      stop: genomicElement.stop,\n      backboneAlignment: { start: genomicElement.start, stop: genomicElement.stop },\n    });\n    processedGenomicData.datatracks.push(geneDatatrackSection);\n  }\n\n  logger.debug(`Filtered out gene count for backbone: ${filteredGeneCount}`);\n  return { backboneSection, processedGenomicData };\n}\n\nexport function createBackboneSet(backbone: BackboneSection, backboneMap: SpeciesMap, genomicData?: ProcessedGenomicData)\n{\n  return new BackboneSet(backbone, backboneMap, genomicData);\n}","import SVGConstants, {PANEL_SVG_START, PANEL_SVG_STOP} from \"@/utils/SVGConstants\";\nimport Chromosome from \"@/models/Chromosome\";\n\nexport interface BasePairRange\n{\n  start: number;\n  stop: number;\n}\n\nexport class SelectedRegion\n{\n  svgYPoint: number; // The Y position on the backbone SVG\n  svgHeight: number; // The height of the selection on the backbone SVG\n  basePairStart: number;\n  basePairStop: number;\n\n  constructor(svgYPoint: number, svgHeight: number, basePairStart: number, basePairStop: number)\n  {\n    this.svgYPoint = svgYPoint;\n    this.svgHeight = svgHeight;\n    this.basePairStart = basePairStart;\n    this.basePairStop = basePairStop;\n  }\n\n  public get length()\n  {\n    return this.basePairStop - this.basePairStart;\n  }\n}\n\nexport default class BackboneSelection\n{\n  chromosome: Chromosome;\n  //viewport selection is the current viewport selection range\n  viewportSelection?: SelectedRegion;\n\n  constructor(chromosome: Chromosome, viewportSelection?: SelectedRegion)\n  {\n    this.chromosome = chromosome;\n    this.viewportSelection = viewportSelection;\n  }\n\n  /**\n   * Change the position start / stop position of the Detailed panel.\n   * @param visibleStart\n   *   The new start position of the detailed panel (in the Backbone bp coordinate system).\n   * @param visibleStop\n   *   The new stop position of the detailed panel (in the Backbone bp coordinate system).\n   */\n  public setViewportSelection(visibleStart: number, visibleStop: number)\n  {\n    // Protect any bad inputs\n    // TODO: log this, so the upstream code can be corrected...\n    visibleStart = (visibleStart < 0) ? 0 : Math.floor(visibleStart);\n    visibleStop = (visibleStop > this.chromosome.seqLength) ? this.chromosome.seqLength : Math.ceil(visibleStop);\n\n    const overviewHeight = PANEL_SVG_STOP - PANEL_SVG_START - (SVGConstants.overviewTrackPadding * 2);\n    const bpOverviewLength = this.chromosome.seqLength;\n    const pixelsPerBpRatio = overviewHeight / bpOverviewLength;\n\n    const innerSVGYPoint = (visibleStart * pixelsPerBpRatio) + SVGConstants.overviewTrackYPosition;\n    const svgHeight = (visibleStop - visibleStart) * pixelsPerBpRatio;\n\n    this.viewportSelection = new SelectedRegion(innerSVGYPoint, svgHeight, visibleStart, visibleStop);\n    return this.viewportSelection;\n  }\n}\n","import { defineComponent as _defineComponent } from 'vue'\nimport { unref as _unref, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, toDisplayString as _toDisplayString, renderList as _renderList, Fragment as _Fragment, normalizeClass as _normalizeClass, createElementVNode as _createElementVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-76051490\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = [\"fill\", \"x\", \"y\", \"width\", \"height\"]\nconst _hoisted_2 = [\"x\", \"y\"]\nconst _hoisted_3 = [\"x\", \"y\"]\nconst _hoisted_4 = [\"onMouseenter\", \"onMouseleave\", \"onClick\", \"y\", \"x\", \"width\", \"height\", \"fill\", \"fill-opacity\", \"stroke\"]\nconst _hoisted_5 = [\"x\", \"y\", \"width\", \"height\"]\nconst _hoisted_6 = [\"x\", \"y\"]\nconst _hoisted_7 = [\"x\", \"y\"]\nconst _hoisted_8 = [\"x\", \"y\"]\nconst _hoisted_9 = [\"x1\", \"x2\", \"y1\", \"y2\"]\n\nimport BackboneSelection from '@/models/BackboneSelection';\nimport SelectedData, { SelectedDataType } from '@/models/SelectedData';\nimport { computed, toRefs } from '@vue/reactivity';\nimport { ref, watch, onMounted } from 'vue';\nimport { useStore } from 'vuex';\nimport SVGConstants from '@/utils/SVGConstants';\nimport { key } from '@/store';\nimport { Formatter } from '@/utils/Formatter';\nimport BackboneSection from '@/models/BackboneSection';\nimport BackboneSet from '@/models/BackboneSet';\nimport Gene from '@/models/Gene';\nimport DatatrackSection, { GeneDatatrack } from '@/models/DatatrackSection';\nimport DatatrackSet from '@/models/DatatrackSet';\nimport { VCMapSVGElement } from '@/models/VCMapSVGElement';\nimport useMouseBasePairPos from '@/composables/useMouseBasePairPos';\nimport { getSelectedDataAndGeneIdsFromOrthologLine } from '@/utils/OrthologHandler';\nimport useSyntenyAndDataInteraction from '@/composables/useSyntenyAndDataInteraction';\n\ninterface Props\n{\n  showDataOnHover?: boolean;\n  backboneSet: BackboneSet;\n  syntenyHoverSvgY?: number | null;\n  geneList: Map<number, Gene>;\n  \n}\n\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'BackboneSetSVG',\n  props: {\n    showDataOnHover: { type: Boolean },\n    backboneSet: null,\n    syntenyHoverSvgY: null,\n    geneList: null\n  },\n  emits: [\"synteny-hover\"],\n  setup(__props: any, { emit }: { emit: ({\n  (e: 'synteny-hover', svgY: number | null): void\n}), expose: any, slots: any, attrs: any }) {\n\nconst props = __props as {\n  showDataOnHover?: boolean;\n  backboneSet: BackboneSet;\n  syntenyHoverSvgY?: number | null;\n  geneList: Map<number, Gene>;\n  \n};\n\nconst INNER_SELECTION_EXTRA_WIDTH = 4;\nconst HOVER_HIGHLIGHT_COLOR = '#FF7C60';\nconst SELECTED_HIGHLIGHT_COLOR = '#FF4822';\n\nconst store = useStore(key);\n\nconst { getBasePairPositionFromMouseEvent, getBasePairPositionFromSVG, mouseYPos, } = useMouseBasePairPos();\nconst { setHoverOnGeneLinesAndDatatrackSections, onDatatrackSectionClick } = useSyntenyAndDataInteraction(store);\n\n\n\n\n\nconst backbone = computed(() => {\n  return props.backboneSet.backbone;\n});\n\nconst datatrackSets = computed(() => {\n  return (props.backboneSet.datatrackSets);\n});\n\nconst isDetailed = computed(() => {\n  return props.backboneSet.backbone.renderType === 'detailed';\n});\n\nconst showBasePairLine = computed(() => {\n  return props.syntenyHoverSvgY != null && mouseYPos.value != null && isDetailed.value;\n});\n\n//Converts each property in this object to its own reactive prop\ntoRefs(props);\nlet selectedRegion = ref<BackboneSelection>();\nif (store.state.chromosome)\n{\n  selectedRegion.value = store.state.selectedBackboneRegion ?? new BackboneSelection(store.state.chromosome);\n}\nconst basePairPositionLabel = ref<string>('');\n\nwatch(() => store.state.selectedBackboneRegion, (newVal: BackboneSelection | null) => {\n  // Watch for possible clear out of the selected backbone region\n  if (!isDetailed.value && newVal == null && store.state.chromosome != null)\n  {\n    selectedRegion.value = new BackboneSelection(store.state.chromosome);\n  }\n  else if (!isDetailed.value && newVal != null)\n  {\n    selectedRegion.value = newVal;\n  }\n}, { deep: true });\n\nwatch([() => store.state.selectedGeneIds, () => props.backboneSet], () => {\n  highlightSelections(store.state.selectedGeneIds);\n});\n\nwatch(() => props.syntenyHoverSvgY, () => {\n  // If backbone is not being hovered but another synteny section is emitting a mouse event,\n  // show the bp position on this backbone section\n  if (!props.backboneSet.backbone.isHovered && props.syntenyHoverSvgY != null)\n  {\n    updatePositionLabelFromSVG(props.syntenyHoverSvgY);\n  }\n});\n\nonMounted(() => {\n  highlightSelections(store.state.selectedGeneIds);\n});\n\nconst onMouseEnter = (section: BackboneSection | DatatrackSection, type: SelectedDataType) => {\n  \n  if (section)\n  {\n    section.isHovered = true;\n  }\n\n  // NOTE: disable selected data for qtls for now\n  if (section.type === 'qtl')\n  {\n    return;\n  }\n\n  // Only set selected data if there are no selected genes\n  if (store.state.selectedGeneIds.length === 0 && section.type === 'gene')\n  {\n    const selectedDataList: SelectedData[] = [];\n    const geneSection = section as GeneDatatrack;\n    setHoverOnGeneLinesAndDatatrackSections(geneSection?.lines, true);\n\n    if (geneSection.lines.length > 0)\n    {\n      const {\n        selectedData: selectedOrthologs,\n      } = getSelectedDataAndGeneIdsFromOrthologLine(geneSection.lines[0]);\n      selectedDataList.push(...selectedOrthologs);\n    }\n    else\n    {\n      selectedDataList.push(new SelectedData(geneSection.gene.clone(), 'Gene'));\n    }\n\n    store.dispatch('setSelectedData', selectedDataList);\n  }\n  else if (store.state.selectedGeneIds.length === 0)\n  {\n    if (section.type === 'variant')\n    {\n      const selectedData = new SelectedData(section, 'variantDensity');\n      store.dispatch('setSelectedData', [selectedData]);\n    }\n    else\n    {\n      // BackboneSection\n      const selectedData = new SelectedData(section, type);\n      store.dispatch('setSelectedData', [selectedData]);\n    }\n  }\n};\n\nconst onMouseLeave = (section: BackboneSection | DatatrackSection) => {\n  emit('synteny-hover', null);\n\n  if (section && section.isHovered == true)\n  {\n    section.isHovered = false;\n  }\n\n  // NOTE: disable selected data for qtls and variants for now\n  if (section.type === 'qtl' || section.type === 'variant')\n  {\n    return;\n  }\n\n  if (section.type === 'gene')\n  {\n    const geneSection = section as GeneDatatrack;\n    setHoverOnGeneLinesAndDatatrackSections(geneSection?.lines, false);\n  }\n\n  // Only reset selected data if there are no selected genes\n  if (store.state.selectedGeneIds.length === 0)\n  {\n    store.dispatch('setSelectedData', null);\n  }\n};\n\nconst getSectionFill = (section: VCMapSVGElement) => {\n  if (section.isSelected) {return SELECTED_HIGHLIGHT_COLOR;}\n  if (section.isHovered) {return HOVER_HIGHLIGHT_COLOR;}\n  return section.elementColor;\n};\n\nconst getSectionClass = (datatrackSet: DatatrackSet) => {\n  if (datatrackSet.type === 'variant')\n  {\n    return 'section clickable variant';\n  }\n  else\n  {\n    return 'section clickable';\n  }\n};\n\nconst highlightSelections = (selectedGeneIds: number[]) => {\n  // Look through the backbone gene datatracks and highlight based on selected genes\n  (datatrackSets.value[props.backboneSet.geneDatatrackSetIndex]?.datatracks as GeneDatatrack[])\n    .forEach(section => {\n      if (section.gene == null)\n      {\n        return;\n      }\n\n      if (selectedGeneIds.includes(section.gene.rgdId)) \n      {\n        section.isSelected = true;\n      } \n      else \n      {\n        section.isSelected = false;\n      }\n    });\n};\n\nconst updatePositionLabelFromMouseEvent = (event: MouseEvent) => {\n  const basePairPos = getBasePairPositionFromMouseEvent(event, backbone.value.windowSVGStart, backbone.value.windowSVGStop, backbone.value.windowStart, backbone.value.windowStop);\n  basePairPositionLabel.value = Formatter.convertBasePairToLabel(basePairPos) || '';\n\n  if (props.backboneSet.backbone.isHovered)\n  {\n    // Emit our svg y position so that other synteny sections can see it\n    emit('synteny-hover', mouseYPos.value ?? null);\n  }\n};\n\nconst updatePositionLabelFromSVG = (svgY: number) => {\n  const basePairPos = getBasePairPositionFromSVG(svgY, backbone.value.windowSVGStart, backbone.value.windowSVGStop, backbone.value.windowStart, backbone.value.windowStop);\n  basePairPositionLabel.value = Formatter.convertBasePairToLabel(basePairPos) || '';\n};\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(_Fragment, null, [\n    (_unref(backbone))\n      ? (_openBlock(), _createElementBlock(\"rect\", {\n          key: 0,\n          \"data-test\": \"track-section-svg\",\n          class: \"section\",\n          onMouseenter: _cache[0] || (_cache[0] = () => onMouseEnter(_unref(backbone), 'backbone')),\n          onMouseleave: _cache[1] || (_cache[1] = () => onMouseLeave(_unref(backbone))),\n          onMousemove: _cache[2] || (_cache[2] = ($event: any) => (updatePositionLabelFromMouseEvent($event))),\n          fill: _unref(backbone).isHovered && __props.showDataOnHover ? HOVER_HIGHLIGHT_COLOR : _unref(backbone).elementColor,\n          x: _unref(backbone).posX1,\n          y: _unref(backbone).posY1,\n          width: _unref(backbone).width,\n          height: _unref(backbone).height\n        }, null, 40, _hoisted_1))\n      : _createCommentVNode(\"\", true),\n    (_unref(backbone))\n      ? (_openBlock(), _createElementBlock(\"text\", {\n          key: 1,\n          class: \"chromosome-label\",\n          x: _unref(backbone).posX1 + (_unref(SVGConstants).trackWidth / 2),\n          y: _unref(backbone).windowSVGMiddle,\n          \"dominant-baseline\": \"middle\",\n          \"text-anchor\": \"middle\"\n        }, _toDisplayString(_unref(backbone).chromosome), 9, _hoisted_2))\n      : _createCommentVNode(\"\", true),\n    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(backbone).labels, (label, index) => {\n      return (_openBlock(), _createElementBlock(_Fragment, { key: index }, [\n        (label.isVisible)\n          ? (_openBlock(), _createElementBlock(\"text\", {\n              key: 0,\n              \"data-test\": \"bp-label\",\n              class: \"label small\",\n              x: label.posX,\n              y: label.posY\n            }, _toDisplayString(label.text), 9, _hoisted_3))\n          : _createCommentVNode(\"\", true)\n      ], 64))\n    }), 128)),\n    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(datatrackSets), (datatrackSet, index) => {\n      return (_openBlock(), _createElementBlock(_Fragment, { key: index }, [\n        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(datatrackSet.datatracks, (datatrack, index) => {\n          return (_openBlock(), _createElementBlock(\"rect\", {\n            key: index,\n            class: _normalizeClass(getSectionClass(datatrackSet)),\n            onMouseenter: () => onMouseEnter(datatrack, 'Gene'),\n            onMouseleave: () => onMouseLeave(datatrack),\n            onClick: ($event: any) => (_unref(onDatatrackSectionClick)($event, datatrack, __props.geneList)),\n            y: datatrack.posY1,\n            x: datatrack.posX1,\n            width: datatrack.width,\n            height: datatrack.height,\n            fill: getSectionFill(datatrack),\n            \"fill-opacity\": datatrack.opacity,\n            stroke: getSectionFill(datatrack)\n          }, null, 42, _hoisted_4))\n        }), 128))\n      ], 64))\n    }), 128)),\n    (!_unref(isDetailed) && _unref(selectedRegion)?.viewportSelection != null && _unref(selectedRegion).viewportSelection.svgHeight > 0)\n      ? (_openBlock(), _createElementBlock(_Fragment, { key: 2 }, [\n          _createElementVNode(\"rect\", {\n            stroke: \"green\",\n            fill: \"green\",\n            \"fill-opacity\": \"0.5\",\n            x: _unref(backbone).posX1 - 2,\n            y: _unref(selectedRegion).viewportSelection.svgYPoint,\n            width: _unref(SVGConstants).trackWidth + INNER_SELECTION_EXTRA_WIDTH,\n            height: _unref(selectedRegion).viewportSelection.svgHeight\n          }, null, 8, _hoisted_5),\n          (_unref(selectedRegion).viewportSelection.svgYPoint > _unref(backbone).posY1 + 10)\n            ? (_openBlock(), _createElementBlock(\"text\", {\n                key: 0,\n                class: \"label small\",\n                x: _unref(backbone).posX1 - 5,\n                y: _unref(selectedRegion).viewportSelection.svgYPoint - 2\n              }, _toDisplayString(_unref(Formatter).convertBasePairToLabel(_unref(selectedRegion).viewportSelection.basePairStart)), 9, _hoisted_6))\n            : _createCommentVNode(\"\", true),\n          (_unref(selectedRegion).viewportSelection.svgYPoint + _unref(selectedRegion).viewportSelection.svgHeight < _unref(backbone).posY2 - 10)\n            ? (_openBlock(), _createElementBlock(\"text\", {\n                key: 1,\n                class: \"label small\",\n                x: _unref(backbone).posX1 - 5,\n                y: _unref(selectedRegion).viewportSelection.svgYPoint + _unref(selectedRegion).viewportSelection.svgHeight + 7\n              }, _toDisplayString(_unref(Formatter).convertBasePairToLabel(_unref(selectedRegion).viewportSelection.basePairStop)), 9, _hoisted_7))\n            : _createCommentVNode(\"\", true)\n        ], 64))\n      : _createCommentVNode(\"\", true),\n    (_unref(showBasePairLine))\n      ? (_openBlock(), _createElementBlock(_Fragment, { key: 3 }, [\n          _createElementVNode(\"text\", {\n            class: \"label small\",\n            \"text-anchor\": \"end\",\n            \"dominant-baseline\": \"middle\",\n            x: _unref(backbone).posX1 - 1,\n            y: _unref(mouseYPos)\n          }, _toDisplayString(basePairPositionLabel.value), 9, _hoisted_8),\n          _createElementVNode(\"line\", {\n            class: \"position-label\",\n            x1: _unref(backbone).posX1,\n            x2: _unref(backbone).posX1 + _unref(backbone).width,\n            y1: _unref(mouseYPos),\n            y2: _unref(mouseYPos)\n          }, null, 8, _hoisted_9)\n        ], 64))\n      : _createCommentVNode(\"\", true)\n  ], 64))\n}\n}\n\n})","import script from \"./BackboneSetSVG.vue?vue&type=script&lang=ts&setup=true\"\nexport * from \"./BackboneSetSVG.vue?vue&type=script&lang=ts&setup=true\"\n\nimport \"./BackboneSetSVG.vue?vue&type=style&index=0&id=76051490&lang=scss&scoped=true\"\n\nimport exportComponent from \"/home/rgdpub/vcmap-ui/app/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-76051490\"]])\n\nexport default __exports__","import httpInstance from './httpInstance';\n\nexport default class QtlApi\n{\n  static async getQtls(chr: string, start: number, stop: number, mapKey: number)\n  {\n    const qtlRes = await httpInstance.get<any>(`/qtls/mapped/${chr}/${start}/${stop}/${mapKey}`);\n    return qtlRes.data;\n  }\n}","import { defineComponent as _defineComponent } from 'vue'\nimport { unref as _unref, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-5aa3b7d2\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = [\"stroke\", \"x1\", \"x2\", \"y1\", \"y2\"]\n\nimport OrthologLine from '@/models/OrthologLine';\nimport { useStore } from 'vuex';\nimport { key } from '@/store';\nimport SelectedData from '@/models/SelectedData';\nimport { computed } from 'vue';\nimport { getSelectedDataAndGeneIdsFromOrthologLine } from '@/utils/OrthologHandler';\n\ninterface Props\n{\n  line: OrthologLine;\n}\n\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'OrthologLineSVG',\n  props: {\n    line: null\n  },\n  setup(__props: any) {\n\nconst props = __props as {\n  line: OrthologLine;\n};\n\nconst store = useStore(key);\n\nconst SELECTED_HIGHLIGHT_COLOR = '#FF4822';\nconst HOVER_HIGHLIGHT_COLOR = '#FF7C60';\n\n\n\nconst lineColor = computed(() => {\n  const selectedGeneIds = store.state.selectedGeneIds;\n  if (props.line.isSelected || selectedGeneIds.includes(props.line.endGene.rgdId || props.line.startGene.rgdId || -1)) {\n    return SELECTED_HIGHLIGHT_COLOR;\n  }\n\n  if (props.line.isHovered) {\n    return HOVER_HIGHLIGHT_COLOR;\n  }\n\n  return 'lightgray';\n});\n\nconst onMouseEnter = (line: OrthologLine) => {\n\n  if (!line.isSelected) {\n    changeHoverStatusOnOrthologLines(line, true);\n    changeDatatrackColors(line, HOVER_HIGHLIGHT_COLOR);\n  }\n\n  // If there are selected genes, don't update the selected data panel\n  if (store.state.selectedGeneIds.length === 0) {\n    const { selectedData: selectedOrthologs } = getSelectedDataAndGeneIdsFromOrthologLine(line);\n    store.dispatch('setSelectedData', selectedOrthologs);\n  }\n\n};\n\nconst onMouseLeave = (line: OrthologLine) => {\n  if (!line.isSelected) {\n    changeHoverStatusOnOrthologLines(line, false);\n    changeDatatrackColors(line, '#000000');\n  }\n\n  // Only reset data onMouseLeave if there isn't a selected gene\n  if (store.state.selectedGeneIds.length === 0) {\n    store.dispatch('setSelectedData', null);\n  }\n\n};\n\nconst onClick = (event: any, line: OrthologLine) => {\n\n  const isSelected = store.state.selectedGeneIds.includes(line.endGene.rgdId || line.startGene.rgdId || -1);\n\n  // If clicked section already selected, just reset the selectedGeneId state\n  if (line.isSelected || isSelected) {\n    store.dispatch('setSelectedGeneIds', []);\n    store.dispatch('setSelectedData', null);\n    line.isSelected = false;\n\n    return;\n  }\n\n  changeDatatrackColors(line, SELECTED_HIGHLIGHT_COLOR);\n\n  // If shift key is held, we'll just add to the selections, otherwise, reset first\n  let geneIds: number[] = event.shiftKey ? [...store.state.selectedGeneIds] : [];\n\n  let newSelectedData: SelectedData[] = [];\n\n  const {\n    selectedData: selectedOrthologs,\n    selectedGeneIds,\n  } = getSelectedDataAndGeneIdsFromOrthologLine(line);\n  \n  newSelectedData.push(...selectedOrthologs);\n  geneIds.push(...selectedGeneIds);\n\n  store.dispatch('setSelectedGeneIds', geneIds || []);\n  if (event.shiftKey) {\n    const selectedDataArray = [...(store.state.selectedData || []), ...newSelectedData];\n    store.dispatch('setSelectedData', selectedDataArray);\n  } else {\n    store.dispatch('setSelectedData', newSelectedData);\n  }\n};\n\nconst changeDatatrackColors = (line: OrthologLine, colorHex: string) => {\n  [line, ...line.chainedOrthologLines].forEach(l => {\n    if (l.startGeneDatatrack)\n      l.startGeneDatatrack.elementColor = colorHex;\n    if (l.endGeneDatatrack)\n      l.endGeneDatatrack.elementColor = colorHex;\n  });\n};\n\nconst changeHoverStatusOnOrthologLines = (line: OrthologLine, isHovered: boolean) => {\n  [line, ...line.chainedOrthologLines].forEach(l => {\n    l.isHovered = isHovered;\n  });\n};\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"line\", {\n    class: \"ortholog-line\",\n    stroke: _unref(lineColor),\n    x1: __props.line.posX1,\n    x2: __props.line.posX2,\n    y1: __props.line.posY1,\n    y2: __props.line.posY2,\n    onClick: _cache[0] || (_cache[0] = ($event: any) => (onClick($event, __props.line))),\n    onMouseenter: _cache[1] || (_cache[1] = ($event: any) => (onMouseEnter(__props.line))),\n    onMouseleave: _cache[2] || (_cache[2] = ($event: any) => (onMouseLeave(__props.line)))\n  }, null, 40, _hoisted_1))\n}\n}\n\n})","import script from \"./OrthologLineSVG.vue?vue&type=script&lang=ts&setup=true\"\nexport * from \"./OrthologLineSVG.vue?vue&type=script&lang=ts&setup=true\"\n\nimport \"./OrthologLineSVG.vue?vue&type=style&index=0&id=5aa3b7d2&lang=scss&scoped=true\"\n\nimport exportComponent from \"/home/rgdpub/vcmap-ui/app/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-5aa3b7d2\"]])\n\nexport default __exports__","<template>\n  <div class=\"loading-mask\">\n    <div class=\"loader\">\n      <div class=\"dot dot1\"><i></i></div>\n      <div class=\"dot dot2\"><i></i></div>\n      <div class=\"dot dot3\"><i></i></div>\n      <div class=\"dot dot4\"><i></i></div>\n      <div class=\"dot dot5\"><i></i></div>\n      <div class=\"dot dot6\"><i></i></div>\n      <div class=\"dot dot7\"><i></i></div>\n      <div class=\"dot dot8\"><i></i></div>\n      <div class=\"dot dot9\"><i></i></div>\n    </div>\n  </div>\n</template>\n\n\n\n<style lang=\"scss\" scoped>\n.loading-mask\n{\n  width: 100%;\n  height: 100%;\n  background: rgba(231, 231, 231, .85);\n  backdrop-filter: blur(2px);\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  outline: none;\n}\n\n\n\n.loader \n{\n\tposition: relative;\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-content: center;\n\twidth: 200px;\n\theight: 20px;\n}\n\n.dot \n{\n\tposition: relative;\n\tflex: 1;\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-content: center;\n\tmargin: 0 5px;\n\theight: 40px;\n\twidth: 2px;\n}\n\n.dot:first-of-type \n{ margin-left: 0 }\n\n.dot:last-of-type \n{ margin-right: 0 }\n\n.dot::before {\n  content: \"\";\n\tposition: absolute;\n\tbottom: -5px;\n\tdisplay: block;\n\twidth: 4px;\n\theight: 4px;\n\tbackground: rgb(33, 177, 75);\n\tborder-radius: 4px;\n\tbox-shadow: 1px 1px 4px rgba(0,0,0,.15);\n\tanimation: helix 1.25s ease-in-out infinite;\n}\n.dot::after {\n\tcontent: \"\";\n\tposition: absolute;\n\tbottom: -5px;\n\tdisplay: block;\n\twidth: 4px;\n\theight: 4px;\n\tbackground: rgb(28, 97, 174);\n\tborder-radius: 4px;\n\tbox-shadow: 1px 1px 4px rgba(0,0,0,.15);\n\tanimation: helix 1.25s ease-in-out infinite;\n}\n\n.dot::after \n{\n\tbottom: 100%;\n\tanimation: helix-reversed 1.25s ease-in-out infinite;\n}\n\n//dna bars\n.dot i \n{\n\tposition: absolute;\n\tz-index: 25;\n\talign-self: center;\n\twidth: 2px;\n\theight: 40px;\n\tbackground: rgba(23, 23, 23, 0.15);\n\tanimation: helix-bar 1.25s ease-in-out infinite;\n}\n\n.dot2::before, .dot2::after, .dot2 i\n{ animation-delay: 0.05s }\n\n.dot3::before, .dot3::after, .dot3 i\n{ animation-delay: 0.10s }\n\n.dot4::before, .dot4::after, .dot4 i\n{ animation-delay: 0.15s }\n\n.dot5::before, .dot5::after, .dot5 i\n{ animation-delay: 0.20s }\n\n.dot6::before, .dot6::after, .dot6 i\n{ animation-delay: 0.25s }\n\n.dot7::before, .dot7::after, .dot7 i\n{ animation-delay: 0.30s }\n\n.dot8::before, .dot8::after, .dot8 i\n{ animation-delay: 0.35s }\n\n.dot9::before, .dot9::after, .dot9 i\n{ animation-delay: 0.40s }\n\n@keyframes helix \n{\n\t0% { width: 5px; height: 5px; bottom: -5px; z-index: 10 }\n\t25% { width: 2px; height: 2px }\n\t50% { width: 5px; height: 5px; bottom: 100%; z-index: 20 }\n\t75% { width: 8px; height: 8px }\n\t100% { width: 5px; height: 5px; bottom: -5px }\n}\n\n@keyframes helix-reversed \n{\n\t0% { width: 5px; height: 5px; bottom: 100%; z-index: 20 }\n\t25% { width: 8px; height: 8px }\n\t50% { width: 5px; height: 5px; bottom: -5px; z-index: 10 }\n\t75% { width: 2px; height: 2px }\n\t100% { width: 5px; height: 5px; bottom: 100% }\n}\n\n@keyframes helix-bar \n{\n\t0% { height: 15px }\n\t25% { height:  8px }\n\t50% { height: 15px }\n\t75% { height:  8px }\n\t100% { height: 15px }\n}\n</style>","import { render } from \"./LoadingSpinnerMask.vue?vue&type=template&id=3ca244f9&scoped=true\"\nconst script = {}\n\nimport \"./LoadingSpinnerMask.vue?vue&type=style&index=0&id=3ca244f9&lang=scss&scoped=true\"\n\nimport exportComponent from \"/home/rgdpub/vcmap-ui/app/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-3ca244f9\"]])\n\nexport default __exports__","import { useCssVars as _useCssVars, unref as _unref, defineComponent as _defineComponent } from 'vue'\nimport { toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-97b6c138\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"legend-label\" }\nconst _hoisted_2 = { class: \"legend-container\" }\nconst _hoisted_3 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"color-legend\" }, null, -1))\n\ninterface Props {\n  minValue: number;\n  maxValue: number;\n  binSize: number;\n  minColor: string;\n  maxColor: string;\n  speciesName: string;\n  mapName: string;\n}\n\n\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'GradientLegend',\n  props: {\n    minValue: null,\n    maxValue: null,\n    binSize: null,\n    minColor: null,\n    maxColor: null,\n    speciesName: null,\n    mapName: null\n  },\n  setup(__props: any) {\n\n_useCssVars(_ctx => ({\n  \"06e13e28\": (__props.minColor),\n  \"666dfd1a\": (__props.maxColor)\n}))\n\n\n\n\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"div\", null, [\n    _createElementVNode(\"div\", _hoisted_1, _toDisplayString(__props.speciesName) + \" (\" + _toDisplayString(__props.mapName) + \")\", 1),\n    _createElementVNode(\"div\", _hoisted_2, [\n      _createElementVNode(\"div\", null, _toDisplayString(parseFloat(__props.minValue.toPrecision(3)).toLocaleString()), 1),\n      _hoisted_3,\n      _createElementVNode(\"div\", null, _toDisplayString(parseFloat(__props.maxValue.toPrecision(3)).toLocaleString()), 1)\n    ])\n  ]))\n}\n}\n\n})","import script from \"./GradientLegend.vue?vue&type=script&lang=ts&setup=true\"\nexport * from \"./GradientLegend.vue?vue&type=script&lang=ts&setup=true\"\n\nimport \"./GradientLegend.vue?vue&type=style&index=0&id=97b6c138&scoped=true&lang=css\"\n\nimport exportComponent from \"/home/rgdpub/vcmap-ui/app/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-97b6c138\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { unref as _unref, createVNode as _createVNode, createElementVNode as _createElementVNode, withModifiers as _withModifiers, normalizeClass as _normalizeClass, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, toDisplayString as _toDisplayString, isRef as _isRef, normalizeStyle as _normalizeStyle, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\nimport _imports_0 from '../../node_modules/primeicons/raw-svg/chevron-up.svg'\nimport _imports_1 from '../../node_modules/primeicons/raw-svg/chevron-down.svg'\n\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-7507686c\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = [\"viewBox\"]\nconst _hoisted_2 = [\"height\"]\nconst _hoisted_3 = [\"width\", \"height\"]\nconst _hoisted_4 = [\"x\", \"width\", \"height\"]\nconst _hoisted_5 = [\"x\", \"y\", \"width\", \"height\"]\nconst _hoisted_6 = [\"x\", \"y\", \"width\", \"height\"]\nconst _hoisted_7 = [\"x\", \"y\"]\nconst _hoisted_8 = [\"x\", \"y\"]\nconst _hoisted_9 = [\"width\", \"height\"]\nconst _hoisted_10 = [\"x\", \"width\", \"height\"]\nconst _hoisted_11 = [\"x\", \"y\", \"width\", \"height\"]\nconst _hoisted_12 = [\"y\", \"width\", \"height\"]\nconst _hoisted_13 = {\n  key: 0,\n  class: \"grid\"\n}\nconst _hoisted_14 = { class: \"col-4 plus-half legend-title\" }\nconst _hoisted_15 = { class: \"col-2 legend-container\" }\n\nimport { computed, onMounted, ref, watch } from 'vue';\nimport { useStore } from 'vuex';\nimport { useRouter } from 'vue-router';\nimport SectionSVG from './SectionSVG.vue';\nimport SVGConstants from '@/utils/SVGConstants';\nimport VCMapDialog from '@/components/VCMapDialog.vue';\nimport GeneLabelSVG from '@/components/GeneLabelSVG.vue';\nimport ViewboxTitlesSVG from './ViewboxTitlesSVG.vue';\nimport useDialog from '@/composables/useDialog';\nimport Gene from '@/models/Gene';\nimport OrthologLine from '@/models/OrthologLine';\nimport useDetailedPanelZoom from '@/composables/useDetailedPanelZoom';\nimport { key } from '@/store';\nimport { createSyntenicRegionSets,  } from '@/utils/SectionBuilder';\nimport useOverviewPanelSelection from '@/composables/useOverviewPanelSelection';\nimport { useLogger } from 'vue-logger-plugin';\nimport Toast from 'primevue/toast';\nimport { useToast } from 'primevue/usetoast';\nimport { createBackboneSection, backboneDatatrackBuilder, createBackboneSet } from '@/utils/BackboneBuilder';\nimport BackboneSetSVG from './BackboneSetSVG.vue';\nimport SyntenyRegionSet from '@/models/SyntenyRegionSet';\nimport QtlApi from '@/api/QtlApi';\nimport BackboneSet from '@/models/BackboneSet';\nimport { createOverviewSyntenicRegionSets } from '@/utils/SectionBuilder';\nimport OrthologLineSVG from './OrthologLineSVG.vue';\nimport LoadingSpinnerMask from './LoadingSpinnerMask.vue';\nimport { createQtlDatatracks } from '@/utils/QtlBuilder';\nimport { backboneVariantTrackBuilder } from '@/utils/VariantBuilder';\nimport { GenomicSectionFactory } from '@/models/GenomicSectionFactory';\nimport Block from \"@/models/Block\";\n\nimport { GeneLabel } from '@/models/Label';\nimport SyntenyRegion from '@/models/SyntenyRegion';\nimport { createOrthologLines } from '@/utils/OrthologHandler';\nimport VariantPositions from '@/models/VariantPositions';\nimport Species from '@/models/Species';\nimport BackboneSection from '@/models/BackboneSection';\nimport GradientLegend from './GradientLegend.vue';\n\ninterface Props\n{\n  geneList: Map<number, Gene>;\n  syntenyTree: Map<number, Block[]>;\n  loading: boolean;\n  variantPositionsList: VariantPositions[];\n}\n\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'SVGViewbox',\n  props: {\n    geneList: null,\n    syntenyTree: null,\n    loading: { type: Boolean },\n    variantPositionsList: null\n  },\n  setup(__props: any) {\n\nconst props = __props as {\n  geneList: Map<number, Gene>;\n  syntenyTree: Map<number, Block[]>;\n  loading: boolean;\n  variantPositionsList: VariantPositions[];\n};\n\nconst SHOW_DEBUG = process.env.NODE_ENV === 'development';\nconst NAV_SHIFT_PERCENT = 0.2;\n\nconst store = useStore(key);\nconst $log = useLogger();\nconst router = useRouter();\nconst toast = useToast();\n\nconst { showDialog, dialogHeader, dialogMessage, showDialogBackButton, dialogTheme, onError } = useDialog();\nconst { startDetailedSelectionY, stopDetailedSelectionY, updateZoomSelection, detailedSelectionHandler, cancelDetailedSelection, getDetailedSelectionStatus} = useDetailedPanelZoom(store);\nconst { startOverviewSelectionY, stopOverviewSelectionY, updateOverviewSelection, overviewSelectionHandler, cancelOverviewSelection, getOverviewSelectionStatus } = useOverviewPanelSelection(store);\n\n\n\nlet detailedSyntenySets = ref<SyntenyRegionSet[]>([]); // The currently displayed SyntenicRegions in the detailed panel\nlet overviewBackboneSet = ref<BackboneSet>();\nlet detailedBackboneSet = ref<BackboneSet>();\nlet overviewSyntenySets = ref<SyntenyRegionSet[]>([]);\nlet orthologLines = ref<OrthologLine[]>();\nlet detailedSyntenySvgYPosition = ref<number | null>(null);\n\n////\n// Debugging helper refs and methods (debug template is currently commented out):\nconst enabledBlockIndicesForGeneDebugList = ref<number[]>([]);\nconst enabledRegionIndicesForGeneDebugList = ref<number[]>([]);\nconst toggleGenesListForBlock = (debugList: number[], blockIndex: number) => {\n  const elementIndex = debugList.findIndex((val) => val === blockIndex);\n  if (elementIndex !== -1)\n  {\n    // Toggle off\n    debugList.splice(elementIndex, 1);\n    return;\n  }\n\n  debugList.push(blockIndex);\n};\n////\n\nasync function attachToProgressLoader(storeLoadingActionName: string, func: () => Promise<any>)\n{\n  try\n  {\n    store.dispatch(storeLoadingActionName, true);\n    await func();\n  }\n  catch (err)\n  {\n    onError(err, 'An error occurred while updating the overview panel', false);\n  }\n  finally\n  {\n    store.dispatch(storeLoadingActionName, false);\n  }\n}\n\nonMounted(async () => {\n  // TODO: Clear out selected data on mount?\n  // Clear any prior selections or set as the searched gene\n  // const gene = store.state.gene;\n  // store.dispatch('setSelectedData', gene ? [new SelectedData(gene.clone(), 'Gene')] : null);\n\n  //await attachToProgressLoader('setIsOverviewPanelUpdating', updateOverviewPanel);\n});\n\nwatch(() => store.state.configurationLoaded, () => {\n  if (store.state.configurationLoaded)\n  {\n    attachToProgressLoader('setIsOverviewPanelUpdating', updateOverviewPanel);\n  }\n});\n\n/**\n * Have a progress loader for the Details Panel update process.\n */\nwatch(() => store.state.detailedBasePairRange, () => {\n  if (store.state.configurationLoaded)\n  {\n    attachToProgressLoader('setIsDetailedPanelUpdating', updateDetailsPanel);\n  }\n});\n\n// TODO: I think every time the variantPositionsList is changed, the updateSyntenyVariants() method\n//   is called - which triggers a detailed panel update. This watch may no longer be needed?\n// TODO: not sure if watch is the best thing for this\nwatch(() => props.variantPositionsList, () => {\n  const backboneSpecies = store.state.species;\n  const detailedBackbone = detailedBackboneSet.value?.backbone;\n  if (backboneSpecies && detailedBackbone)\n  {\n    props.variantPositionsList.forEach((variantPositions) => {\n      if (variantPositions.mapKey === backboneSpecies.activeMap.key)\n      {\n        updateBackboneVariants(backboneSpecies, variantPositions, detailedBackbone);\n      }\n    });\n  }\n}, {deep: true});\n\nwatch(() => store.state.isUpdatingVariants, () => {\n  if (store.state.isUpdatingVariants) updateSyntenyVariants();\n});\n\n// FIXME: check on this (probably needs to be attached to Main props instead):\nconst arePanelsLoading = computed(() => {\n  // Either panel is processing or API is being queried\n  return store.state.isOverviewPanelUpdating || store.state.isDetailedPanelUpdating || props.loading;\n});\n\nconst displayVariantLegend = computed(() => {\n  const backboneVariantIdx = detailedBackboneSet.value?.datatrackSets.findIndex((set) => set.type === 'variant');\n  if (backboneVariantIdx !== undefined && backboneVariantIdx !== -1)\n  {\n    return true;\n  }\n  for (let i = 0; i < detailedSyntenySets.value.length; i++)\n  {\n    const hasVariantTracks = detailedSyntenySets.value[i].regions.some((region) =>\n      region.datatrackSets.findIndex((set) => set.type === 'variant') !== -1\n    );\n    if (hasVariantTracks)\n    {\n      return true;\n    }\n  }\n  return false;\n});\n\nconst variantBinSize = computed(() => {\n  if (detailedBackboneSet.value?.variantBinSize)\n  {\n    return detailedBackboneSet.value.variantBinSize;\n  }\n  else if (detailedSyntenySets.value.some((set) => set.variantBinSize))\n  {\n    const setWithVariants = detailedSyntenySets.value.find((set) => set.variantBinSize && set.variantBinSize > 0);\n    return setWithVariants?.variantBinSize ?? 0;\n  }\n  return 0;\n});\n\nconst currentlySelectingRegion = () => {\n  return (getOverviewSelectionStatus() || getDetailedSelectionStatus());\n};\n\nconst updateOverviewPanel = async () => {\n  $log.debug('Updating Overview Panel');\n\n  const overviewUpdateStart = Date.now();\n\n  const backboneSpecies = store.state.species;\n  const backboneChromosome = store.state.chromosome;\n\n  if (backboneSpecies == null || backboneChromosome == null)\n  {\n    $log.error('Backbone species or chromosome is null during overview panel update');\n    overviewSyntenySets.value = [];\n    return;\n  }\n\n  // Build backbone set\n  overviewSyntenySets.value = [];\n  const overviewBackbone = createBackboneSection(backboneSpecies, backboneChromosome, 0, backboneChromosome.seqLength, 'overview');\n  overviewBackboneSet.value = createBackboneSet(overviewBackbone, backboneSpecies.activeMap);\n\n  const overviewBackboneCreationTime = Date.now();\n\n  // Build overview synteny sets\n  const overviewSyntenyTrackCreationTime = Date.now();\n  overviewSyntenySets.value = await createOverviewSyntenicRegionSets(props.syntenyTree, store.state.comparativeSpecies, backboneChromosome);\n\n  // TODO: request an update to the detailed panel here\n\n  // TODO: double check this logic:\n  const overviewCreateBackboneSelectionTime = Date.now();\n  logPerformanceReport('Update Overview Time', (overviewCreateBackboneSelectionTime - overviewUpdateStart), {\n    'Create Backbone Track': (overviewBackboneCreationTime - overviewUpdateStart),\n    'Create Synteny Tracks': (overviewSyntenyTrackCreationTime - overviewBackboneCreationTime),\n    'Create Backbone Selection': (overviewCreateBackboneSelectionTime - overviewSyntenyTrackCreationTime)\n  });\n};\n\n/**\n * Update the SVG elements on the \"detailed\" panel of the SVG. This involves removing those\n * previously viewed elements (by clearing our reactive refs in this class) and then creating\n * a view of the new viewport that only includes things in our visible range.\n * NOTE: Some of the elements we remove and recreate might actually have the represented the\n *   same memory structures and in a future iteration we will try to adjust the position of\n *   those elements as opposed to removing and recreating them.\n */\nconst updateDetailsPanel = async () => {\n  $log.debug(`Updating Detailed Panel`);\n\n  const detailedUpdateStart = Date.now();\n\n  const backboneSpecies = store.state.species;\n  const backboneChromosome = store.state.chromosome;\n  const detailedBasePairRange = store.state.detailedBasePairRange;\n\n  // Get comparison species Ids for ortholog API call parameter\n  const comparativeSpeciesIds: number[] = [];\n  store.state.comparativeSpecies.map(species => comparativeSpeciesIds.push(species.defaultMapKey));\n\n  // debug timers\n  let timeSyntenyTracks = 0;\n  let timeBackboneFilterGenes = 0;\n  let timeCreateBackboneDatatracks = 0;\n  let timeCreateBackboneSet = 0;\n  let timeAdjustVisibleRegion = 0;\n\n  // error if invalid base pair range\n  if (detailedBasePairRange.stop - detailedBasePairRange.start <= 0)\n  {\n    // Clear out our detailed synteny sets\n    $log.error(`Invalid detailedBasePairRange?? (${detailedBasePairRange.start}, ${detailedBasePairRange.stop})`);\n    detailedSyntenySets.value = [];\n    return;\n  }\n\n  //error if no backbone species or chromosome\n  if (backboneSpecies == null || backboneChromosome == null)\n  {\n    detailedSyntenySets.value = [];\n    return;\n  }\n\n  //\n  // First, create the visible backbone elements\n  const detailedBackbone = createBackboneSection(backboneSpecies, backboneChromosome,\n      store.state.detailedBasePairRange.start, store.state.detailedBasePairRange.stop, 'detailed');\n  const backboneFilterGenesStart = Date.now();\n  const backboneGenes: Gene[] = [];\n  props.geneList.forEach((gene: Gene) => {\n    if (gene.mapKey == backboneSpecies.activeMap.key && isBpRangeVisible(gene.start, gene.stop))\n    {\n      // Only add visible genes\n      backboneGenes.push(gene);\n    }\n  });\n  timeBackboneFilterGenes = Date.now() - backboneFilterGenesStart;\n  const backboneDatatracksStart = Date.now();\n  const backboneDatatrackInfo = backboneDatatrackBuilder(backboneSpecies, backboneGenes, detailedBackbone);\n  timeCreateBackboneDatatracks = Date.now() - backboneDatatracksStart;\n  const backboneSetStart = Date.now();\n  detailedBackboneSet.value = createBackboneSet(detailedBackbone, backboneSpecies.activeMap, backboneDatatrackInfo.processedGenomicData);\n\n  // Now check for other potential datatracks to add to the backbone (like variant positions)\n  props.variantPositionsList.forEach((variantPositions) => {\n    if (variantPositions.mapKey === backboneSpecies.activeMap.key)\n    {\n      updateBackboneVariants(backboneSpecies, variantPositions, detailedBackbone);\n    }\n  });\n\n  timeCreateBackboneSet = Date.now() - backboneSetStart;\n\n  //\n  // Next, the visible Synteny elements\n  const syntenyTracksStart = Date.now();\n  detailedSyntenySets.value = await createSyntenicRegionSets(\n      props.syntenyTree,\n      store.state.comparativeSpecies,\n      detailedBasePairRange.start,\n      detailedBasePairRange.stop,\n  );\n  timeSyntenyTracks = Date.now() - syntenyTracksStart;\n\n  //\n  // Create ortholog lines\n  // NOTE: Casting the type here since .value can't \"unpack\" the private methods on the object and thus,\n  //  doesn't see it as equaling the SyntenyRegionSet type\n  orthologLines.value = createOrthologLines(props.geneList, detailedBackboneSet.value, detailedSyntenySets.value as SyntenyRegionSet[]);\n  \n  // Report timing data\n  const timeDetailedUpdate= Date.now() - detailedUpdateStart;\n  const timeDetailedUpdateOther = timeDetailedUpdate - (\n    + timeBackboneFilterGenes\n    + timeCreateBackboneDatatracks\n    + timeCreateBackboneSet\n    + timeSyntenyTracks \n    + timeAdjustVisibleRegion);\n  logPerformanceReport('Update Detailed Time', timeDetailedUpdate, {\n    'Filter Backbone Genes': timeBackboneFilterGenes,\n    'Create Backbone Datatracks': timeCreateBackboneDatatracks,\n    'Create Backbone Set, and AdjustY': timeCreateBackboneSet,\n    'Create Synteny Tracks': timeSyntenyTracks,\n    'Adjust Visible Region': timeAdjustVisibleRegion,\n    'Misc': timeDetailedUpdateOther,\n  });\n};\n\nconst navigateUp = () => {\n  const selectedRegion = store.state.selectedBackboneRegion;\n\n  if (isNavigationUpDisabled.value || selectedRegion?.viewportSelection == null) return;\n  // const chromosome = selectedRegion.chromosome;\n\n  if (store.state.detailedBasePairRange)\n  {\n    const currRange = store.state.detailedBasePairRange;\n    let adjust = NAV_SHIFT_PERCENT * (currRange.stop - currRange.start);\n    if (currRange.start < adjust) adjust = currRange.start;\n    store.dispatch('setDetailedBasePairRequest', { start: currRange.start - adjust, stop: currRange.stop - adjust });\n  }\n};\n\nconst navigateDown = () => {\n  const selectedRegion = store.state.selectedBackboneRegion;\n\n  if (isNavigationDownDisabled.value || selectedRegion?.viewportSelection == null) return;\n  const chromosome = selectedRegion.chromosome;\n\n  if (store.state.detailedBasePairRange)\n  {\n    const currRange = store.state.detailedBasePairRange;\n    let adjust = NAV_SHIFT_PERCENT * (currRange.stop - currRange.start);\n    if (currRange.stop + adjust > chromosome.seqLength) adjust = chromosome.seqLength - currRange.stop;\n    store.dispatch('setDetailedBasePairRequest', { start: currRange.start + adjust, stop: currRange.stop + adjust });\n  }\n};\n\n\nconst isNavigationUpDisabled = computed(() => {\n  if (arePanelsLoading.value)\n  {\n    return true;\n  }\n\n  const selectedRegion = store.state.selectedBackboneRegion;\n\n  if (selectedRegion && selectedRegion.viewportSelection)\n  {\n    return 0 > selectedRegion.viewportSelection.basePairStart;\n  }\n\n  return false;\n});\n\nconst isNavigationDownDisabled = computed(() => {\n  if (arePanelsLoading.value)\n  {\n    return true;\n  }\n  \n  const selectedRegion = store.state.selectedBackboneRegion;\n  \n  if (selectedRegion && selectedRegion.viewportSelection)\n  {\n    return 0 >= selectedRegion.viewportSelection.basePairStop;\n  }\n\n  return false;\n});\n\nconst onDetailedSyntenyHover = (svgY: number | null) => {\n  detailedSyntenySvgYPosition.value = svgY;\n};\n\n\nconst getDetailedPosition = () =>\n{\n  const detailedPanel = document.getElementById('detailed');\n  const scrollY = window.scrollY;\n  const scrollX = window.scrollX;\n  if (detailedPanel)\n  {\n    const detailedPanelDomPositions = detailedPanel.getBoundingClientRect();\n    return {\n      position: 'absolute',\n      top: String(detailedPanelDomPositions.top + scrollY)+ 'px',\n      bottom: String(detailedPanelDomPositions.bottom ) + 'px',\n      right: String(detailedPanelDomPositions.right) + 'px',\n      left: String(detailedPanelDomPositions.left + scrollX) + 'px',\n      width: String(detailedPanelDomPositions.width) + 'px',\n      height: String(detailedPanelDomPositions.height ) + 'px',\n    };\n  }\n};\n\n/**\n * Helper function to determine if a Range of bp position in the Backbone\n * is visible in any part of the viewport. There are three possibilities:\n *   1) Start is inside the viewport\n *   2) Stop is inside the viewport\n *   3) Start & Stop surround the viewport\n */\nconst isBpRangeVisible = (start: number, stop: number) => {\n  const backboneRegion = store.state.selectedBackboneRegion;\n  const viewportStart = backboneRegion?.viewportSelection?.basePairStart ?? -1;\n  const viewportStop = backboneRegion?.viewportSelection?.basePairStop ?? -1;\n  // if (start >= viewportStart && start <= viewportStop)\n  //   return true;\n  // else if (stop >= viewportStart && stop <= viewportStop)\n  //   return true;\n  // else if (start < viewportStart && stop > viewportStop)\n  //   return true;\n\n  // Simplified above comparisons to single statement\n  return (start <= viewportStop && stop >= viewportStart);\n};\n\n// TODO: temp ignore here, should remove once this method is actively being used\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nconst loadBackboneQtls = async () => {\n  const chromosome = store.state.chromosome;\n  const backboneSpecies = store.state.species;\n  const backboneRegion = store.state.selectedBackboneRegion;\n  const start = backboneRegion?.viewportSelection?.basePairStart;\n  const stop = backboneRegion?.viewportSelection?.basePairStop;\n  const speciesMap = store.state.species?.activeMap;\n\n  if (chromosome && stop && speciesMap && backboneSpecies)\n  {\n    const factory = new GenomicSectionFactory(\n      backboneSpecies.name,\n      speciesMap.name,\n      chromosome.chromosome,\n      { start: start || 0, stop: stop },\n      'detailed'\n    );\n    const qtls = await QtlApi.getQtls(chromosome.chromosome, start || 0, stop, speciesMap.key);\n    const qtlDatatracks = createQtlDatatracks(factory, qtls, backboneSpecies, chromosome);\n    detailedBackboneSet.value?.addNewDatatrackSetToStart(qtlDatatracks, 'qtl');\n  }\n};\n\nconst updateBackboneVariants = (backboneSpecies: Species, variantPositions: VariantPositions, detailedBackbone: BackboneSection) => {\n  const variantDatatrackInfo = backboneVariantTrackBuilder(backboneSpecies, variantPositions, detailedBackbone);\n  if (detailedBackboneSet.value)\n  {\n    detailedBackboneSet.value?.addNewDatatrackSetToStart(variantDatatrackInfo.datatracks, 'variant');\n    detailedBackboneSet.value.maxVariantCount = variantDatatrackInfo.maxCount;\n    detailedBackboneSet.value.variantBinSize = variantDatatrackInfo.binSize;\n\n    // TODO: I believe this code is no longer needed since ortholog lines get rebuilt every time the details panel is updated\n    // NOTE: we can do this because we always know the variant track is first and then the genes\n    // When variants are displayed, lines should start two gaps and two track widths from the right of the backbone\n    const xPos = detailedBackboneSet.value.backbone.posX2 + SVGConstants.backboneDatatrackXOffset * 2 + SVGConstants.dataTrackWidth * 2;\n    orthologLines.value?.forEach((line) => {\n      if (line.startGene.mapKey === detailedBackboneSet.value?.mapKey)\n      {\n        line.posX1 = xPos;\n      }\n    });\n  }\n};\n\nconst updateSyntenyVariants = () => {\n  updateDetailsPanel();\n  store.dispatch('setIsUpdatingVariants', false);\n};\n\ndocument.addEventListener('scroll' , getDetailedPosition);\n\n//Back button handling from svg page.  User must confirm they want to leave the page.\nrouter.beforeEach((to, from, next) => {\n  if (window && window.event && window.event.type == 'popstate')\n  {  \n    const response = confirm('Are you sure you want to leave this page? You may lose progress.');\n    if (response == true)\n    {\n      next();\n    }\n    else\n    {\n      next(false);\n    }\n  }\n  else\n  {\n    next();\n  }\n});\n\n// listen for escape press, cancel overview/detailed panel selection if active.\nwindow.addEventListener('keyup', function(event) {\n    // If  ESC key was pressed...\n    if (event.keyCode === 27) {\n      cancelOverviewSelection();\n      cancelDetailedSelection();\n    }\n});\n\nconst showToast = (severity: string, title: string, details: string, duration: number) => {\n  const toastCount = store.state.selectionToastCount;\n  \n  if (toastCount % 10 == 0)\n  {\n    toast.add({severity: severity, summary: title, detail: details, life: duration });\n  }\n};\n\nfunction logPerformanceReport(title: string, totalTimeMillis: number, detailedTimeReportObject: { [key:string]: number} )\n{\n  const performanceReport: any = {\n    [title]: totalTimeMillis + ' ms',\n    Details: {}\n  };\n\n  for (const detailTitle in detailedTimeReportObject)\n  {\n    performanceReport.Details[detailTitle] = detailedTimeReportObject[detailTitle] + ' ms | ' + ((detailedTimeReportObject[detailTitle] / totalTimeMillis * 100).toFixed(2) + '%');\n  }\n\n  $log.debug(JSON.stringify(performanceReport, null, 2));\n}\n\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(_Fragment, null, [\n    _createVNode(_unref(Toast)),\n    (_openBlock(), _createElementBlock(\"svg\", {\n      viewBox: '0 0 800 ' + _unref(SVGConstants).viewboxHeight,\n      xmlns: \"http://www.w3.org/2000/svg\",\n      id: \"svg-wrapper\",\n      width: \"100%\"\n    }, [\n      _createElementVNode(\"rect\", {\n        class: \"panel\",\n        x: \"0\",\n        width: \"800\",\n        height: _unref(SVGConstants).viewboxHeight\n      }, null, 8, _hoisted_2),\n      _createElementVNode(\"rect\", {\n        class: _normalizeClass([\"panel selectable\", {'is-loading': _unref(arePanelsLoading)}]),\n        x: \"0\",\n        onClick: _cache[0] || (_cache[0] = _withModifiers((event) => { _unref(overviewSelectionHandler)(event, _unref(getDetailedSelectionStatus)(), _unref(overviewBackboneSet)?.backbone); showToast('info', 'Selection Initiated:', 'Drag and click again to complete the selection or right click to cancel.', 5000)}, [\"left\"])),\n        onMousemove: _cache[1] || (_cache[1] = _withModifiers((event) => _unref(updateOverviewSelection)(event), [\"stop\"])),\n        onContextmenu: [\n          _cache[2] || (_cache[2] = _withModifiers(() => {}, [\"prevent\"])),\n          _cache[3] || (_cache[3] = _withModifiers(\n//@ts-ignore\n(...args) => (_unref(cancelOverviewSelection) && _unref(cancelOverviewSelection)(...args)), [\"right\"]))\n        ],\n        width: _unref(SVGConstants).overviewPanelWidth,\n        height: _unref(SVGConstants).viewboxHeight\n      }, null, 42, _hoisted_3),\n      _createElementVNode(\"rect\", {\n        id: \"detailed\",\n        class: _normalizeClass([\"panel selectable\", {'is-loading': _unref(arePanelsLoading)}]),\n        onClick: _cache[4] || (_cache[4] = _withModifiers((event) => { _unref(detailedSelectionHandler)(event, _unref(getOverviewSelectionStatus)()); showToast('info', 'Selection Initiated:', 'Drag and click again to complete the selection or right click to cancel.', 5000)}, [\"left\"])),\n        onMousemove: _cache[5] || (_cache[5] = \n//@ts-ignore\n(...args) => (_unref(updateZoomSelection) && _unref(updateZoomSelection)(...args))),\n        onContextmenu: [\n          _cache[6] || (_cache[6] = _withModifiers(() => {}, [\"prevent\"])),\n          _cache[7] || (_cache[7] = _withModifiers(\n//@ts-ignore\n(...args) => (_unref(cancelDetailedSelection) && _unref(cancelDetailedSelection)(...args)), [\"right\"]))\n        ],\n        x: _unref(SVGConstants).overviewPanelWidth,\n        width: _unref(SVGConstants).detailsPanelWidth,\n        height: _unref(SVGConstants).viewboxHeight\n      }, null, 42, _hoisted_4),\n      (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(orthologLines), (line, index) => {\n        return (_openBlock(), _createBlock(OrthologLineSVG, {\n          key: index,\n          line: line\n        }, null, 8, [\"line\"]))\n      }), 128)),\n      (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(overviewSyntenySets), (syntenySet, index) => {\n        return (_openBlock(), _createElementBlock(_Fragment, { key: index }, [\n          (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(syntenySet.regions, (region, index) => {\n            return (_openBlock(), _createBlock(SectionSVG, {\n              key: index,\n              \"show-chromosome\": \"\",\n              \"show-synteny-on-hover\": \"\",\n              \"gene-list\": __props.geneList,\n              \"show-start-stop\": \"\",\n              \"select-on-click\": \"\",\n              region: region as SyntenyRegion\n            }, null, 8, [\"gene-list\", \"region\"]))\n          }), 128))\n        ], 64))\n      }), 128)),\n      (_unref(overviewBackboneSet))\n        ? (_openBlock(), _createBlock(BackboneSetSVG, {\n            key: 0,\n            \"show-data-on-hover\": \"\",\n            \"gene-list\": __props.geneList,\n            \"backbone-set\": _unref(overviewBackboneSet)\n          }, null, 8, [\"gene-list\", \"backbone-set\"]))\n        : _createCommentVNode(\"\", true),\n      (_unref(detailedBackboneSet))\n        ? (_openBlock(), _createElementBlock(_Fragment, { key: 1 }, [\n            _createVNode(BackboneSetSVG, {\n              \"show-data-on-hover\": \"\",\n              \"backbone-set\": _unref(detailedBackboneSet),\n              \"synteny-hover-svg-y\": _unref(detailedSyntenySvgYPosition),\n              onSyntenyHover: onDetailedSyntenyHover,\n              \"gene-list\": __props.geneList\n            }, null, 8, [\"backbone-set\", \"synteny-hover-svg-y\", \"gene-list\"]),\n            (_unref(detailedBackboneSet).geneLabels)\n              ? (_openBlock(true), _createElementBlock(_Fragment, { key: 0 }, _renderList(_unref(detailedBackboneSet).geneLabels, (label, index) => {\n                  return (_openBlock(), _createElementBlock(_Fragment, { key: index }, [\n                    ((label.isVisible))\n                      ? (_openBlock(), _createBlock(GeneLabelSVG, {\n                          key: 0,\n                          label: (label as GeneLabel),\n                          \"gene-list\": __props.geneList,\n                          \"ortholog-lines\": _unref(orthologLines) ?? []\n                        }, null, 8, [\"label\", \"gene-list\", \"ortholog-lines\"]))\n                      : _createCommentVNode(\"\", true)\n                  ], 64))\n                }), 128))\n              : _createCommentVNode(\"\", true)\n          ], 64))\n        : _createCommentVNode(\"\", true),\n      (_unref(detailedSyntenySets).length)\n        ? (_openBlock(true), _createElementBlock(_Fragment, { key: 2 }, _renderList(_unref(detailedSyntenySets), (syntenySet, index) => {\n            return (_openBlock(), _createElementBlock(_Fragment, { key: index }, [\n              (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(syntenySet.regions, (syntenicRegion, index) => {\n                return (_openBlock(), _createBlock(SectionSVG, {\n                  key: index,\n                  \"show-chromosome\": \"\",\n                  region: (syntenicRegion as SyntenyRegion),\n                  \"synteny-hover-svg-y\": _unref(detailedSyntenySvgYPosition),\n                  \"gene-list\": __props.geneList,\n                  onSyntenyHover: onDetailedSyntenyHover\n                }, null, 8, [\"region\", \"synteny-hover-svg-y\", \"gene-list\"]))\n              }), 128)),\n              (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(syntenySet.geneLabels, (label, index) => {\n                return (_openBlock(), _createElementBlock(_Fragment, { key: index }, [\n                  (label.isVisible)\n                    ? (_openBlock(), _createBlock(GeneLabelSVG, {\n                        key: 0,\n                        label: label,\n                        \"gene-list\": __props.geneList,\n                        \"ortholog-lines\": _unref(orthologLines) ?? []\n                      }, null, 8, [\"label\", \"gene-list\", \"ortholog-lines\"]))\n                    : _createCommentVNode(\"\", true)\n                ], 64))\n              }), 128))\n            ], 64))\n          }), 128))\n        : _createCommentVNode(\"\", true),\n      _createVNode(ViewboxTitlesSVG, {\n        \"overview-backbone-set\": _unref(overviewBackboneSet),\n        \"overview-synteny-sets\": (_unref(overviewSyntenySets) as SyntenyRegionSet[]),\n        \"detailed-backbone-set\": _unref(detailedBackboneSet),\n        \"detailed-synteny-sets\": (_unref(detailedSyntenySets) as SyntenyRegionSet[])\n      }, null, 8, [\"overview-backbone-set\", \"overview-synteny-sets\", \"detailed-backbone-set\", \"detailed-synteny-sets\"]),\n      _createElementVNode(\"rect\", {\n        class: _normalizeClass([\"navigation-btn\", {'disabled': _unref(isNavigationUpDisabled) }]),\n        onClick: navigateUp,\n        x: _unref(SVGConstants).overviewPanelWidth,\n        y: _unref(SVGConstants).panelTitleHeight - _unref(SVGConstants).navigationButtonHeight,\n        width: _unref(SVGConstants).detailsPanelWidth,\n        height: _unref(SVGConstants).navigationButtonHeight\n      }, null, 10, _hoisted_5),\n      _createElementVNode(\"rect\", {\n        class: _normalizeClass([\"navigation-btn\", {'disabled': _unref(isNavigationDownDisabled) }]),\n        onClick: navigateDown,\n        x: _unref(SVGConstants).overviewPanelWidth,\n        y: _unref(SVGConstants).viewboxHeight - _unref(SVGConstants).navigationButtonHeight,\n        width: _unref(SVGConstants).detailsPanelWidth,\n        height: _unref(SVGConstants).navigationButtonHeight\n      }, null, 10, _hoisted_6),\n      _createElementVNode(\"image\", {\n        class: \"nav-btn-img\",\n        href: _imports_0,\n        onClick: navigateUp,\n        x: _unref(SVGConstants).overviewPanelWidth + (_unref(SVGConstants).detailsPanelWidth / 2),\n        y: _unref(SVGConstants).panelTitleHeight - _unref(SVGConstants).navigationButtonHeight - 1,\n        width: \"20\",\n        height: \"20\"\n      }, null, 8, _hoisted_7),\n      _createElementVNode(\"image\", {\n        class: \"nav-btn-img\",\n        href: _imports_1,\n        onClick: navigateDown,\n        x: _unref(SVGConstants).overviewPanelWidth + (_unref(SVGConstants).detailsPanelWidth / 2),\n        y: _unref(SVGConstants).viewboxHeight - _unref(SVGConstants).navigationButtonHeight - 1,\n        width: \"20\",\n        height: \"20\"\n      }, null, 8, _hoisted_8),\n      (currentlySelectingRegion())\n        ? (_openBlock(), _createElementBlock(\"rect\", {\n            key: 3,\n            id: \"selecting-overview\",\n            class: _normalizeClass([\"selecting-panel\", {'is-loading': _unref(arePanelsLoading)}]),\n            x: \"0\",\n            onMousemove: _cache[8] || (_cache[8] = \n//@ts-ignore\n(...args) => (_unref(updateOverviewSelection) && _unref(updateOverviewSelection)(...args))),\n            onContextmenu: [\n              _cache[9] || (_cache[9] = _withModifiers(() => {}, [\"prevent\"])),\n              _cache[10] || (_cache[10] = _withModifiers(\n//@ts-ignore\n(...args) => (_unref(cancelOverviewSelection) && _unref(cancelOverviewSelection)(...args)), [\"right\"]))\n            ],\n            onClick: _cache[11] || (_cache[11] = _withModifiers((event) => _unref(overviewSelectionHandler)(event, _unref(getDetailedSelectionStatus)(), _unref(overviewBackboneSet)?.backbone), [\"left\"])),\n            width: _unref(SVGConstants).overviewPanelWidth,\n            height: _unref(SVGConstants).viewboxHeight\n          }, null, 42, _hoisted_9))\n        : _createCommentVNode(\"\", true),\n      (currentlySelectingRegion())\n        ? (_openBlock(), _createElementBlock(\"rect\", {\n            key: 4,\n            id: \"selecting-detailed\",\n            class: _normalizeClass([\"selecting-panel\", {'is-loading': _unref(arePanelsLoading)}]),\n            onMousemove: _cache[12] || (_cache[12] = \n//@ts-ignore\n(...args) => (_unref(updateZoomSelection) && _unref(updateZoomSelection)(...args))),\n            onContextmenu: [\n              _cache[13] || (_cache[13] = _withModifiers(() => {}, [\"prevent\"])),\n              _cache[14] || (_cache[14] = _withModifiers(\n//@ts-ignore\n(...args) => (_unref(cancelDetailedSelection) && _unref(cancelDetailedSelection)(...args)), [\"right\"]))\n            ],\n            onClick: _cache[15] || (_cache[15] = _withModifiers((event) => _unref(detailedSelectionHandler)(event, _unref(getOverviewSelectionStatus)()), [\"left\"])),\n            x: _unref(SVGConstants).overviewPanelWidth,\n            width: _unref(SVGConstants).detailsPanelWidth,\n            height: _unref(SVGConstants).viewboxHeight\n          }, null, 42, _hoisted_10))\n        : _createCommentVNode(\"\", true),\n      (_unref(startDetailedSelectionY) && _unref(stopDetailedSelectionY))\n        ? (_openBlock(), _createElementBlock(\"rect\", {\n            key: 5,\n            class: \"visible-selecting-panel\",\n            onMousedown: _cache[16] || (_cache[16] = _withModifiers((event) => _unref(detailedSelectionHandler)(event, _unref(getOverviewSelectionStatus)()), [\"left\"])),\n            onContextmenu: [\n              _cache[17] || (_cache[17] = _withModifiers(\n//@ts-ignore\n(...args) => (_unref(cancelDetailedSelection) && _unref(cancelDetailedSelection)(...args)), [\"right\"])),\n              _cache[19] || (_cache[19] = _withModifiers(() => {}, [\"prevent\"]))\n            ],\n            onMousemove: _cache[18] || (_cache[18] = \n//@ts-ignore\n(...args) => (_unref(updateZoomSelection) && _unref(updateZoomSelection)(...args))),\n            fill: \"lightgray\",\n            \"fill-opacity\": \"0.4\",\n            x: _unref(SVGConstants).overviewPanelWidth,\n            y: _unref(startDetailedSelectionY),\n            width: _unref(SVGConstants).detailsPanelWidth,\n            height: _unref(stopDetailedSelectionY) - _unref(startDetailedSelectionY)\n          }, null, 40, _hoisted_11))\n        : _createCommentVNode(\"\", true),\n      (_unref(startOverviewSelectionY) && _unref(stopOverviewSelectionY))\n        ? (_openBlock(), _createElementBlock(\"rect\", {\n            key: 6,\n            class: \"visible-selecting-panel\",\n            onMousemove: _cache[20] || (_cache[20] = (event) => _unref(updateOverviewSelection)(event)),\n            onContextmenu: [\n              _cache[21] || (_cache[21] = _withModifiers(() => {}, [\"prevent\"])),\n              _cache[23] || (_cache[23] = _withModifiers(\n//@ts-ignore\n(...args) => (_unref(cancelOverviewSelection) && _unref(cancelOverviewSelection)(...args)), [\"right\"]))\n            ],\n            onMousedown: _cache[22] || (_cache[22] = _withModifiers((event) => _unref(overviewSelectionHandler)(event, _unref(getDetailedSelectionStatus)(), _unref(overviewBackboneSet)?.backbone), [\"left\"])),\n            fill: \"lightgray\",\n            \"fill-opacity\": \"0.4\",\n            x: 0,\n            y: _unref(startOverviewSelectionY),\n            width: _unref(SVGConstants).overviewPanelWidth,\n            height: _unref(stopOverviewSelectionY) - _unref(startOverviewSelectionY)\n          }, null, 40, _hoisted_12))\n        : _createCommentVNode(\"\", true)\n    ], 8, _hoisted_1)),\n    (_unref(displayVariantLegend))\n      ? (_openBlock(), _createElementBlock(\"div\", _hoisted_13, [\n          _createElementVNode(\"div\", _hoisted_14, [\n            _createElementVNode(\"b\", null, \"Variant counts (per \" + _toDisplayString(parseFloat(_unref(variantBinSize).toPrecision(3)).toLocaleString()) + \"bp)\", 1)\n          ]),\n          _createElementVNode(\"div\", _hoisted_15, [\n            (_unref(detailedBackboneSet) && _unref(detailedBackboneSet).maxVariantCount && _unref(detailedBackboneSet).variantBinSize && _unref(detailedBackboneSet).maxVariantCount > 0)\n              ? (_openBlock(), _createBlock(GradientLegend, {\n                  key: 0,\n                  \"species-name\": _unref(detailedBackboneSet)?.speciesName || '',\n                  \"map-name\": _unref(detailedBackboneSet)?.mapName,\n                  \"min-value\": 0,\n                  \"max-value\": _unref(detailedBackboneSet)?.maxVariantCount || 0,\n                  \"bin-size\": _unref(detailedBackboneSet).variantBinSize,\n                  \"min-color\": \"#0000FF\",\n                  \"max-color\": \"#FF0000\"\n                }, null, 8, [\"species-name\", \"map-name\", \"max-value\", \"bin-size\"]))\n              : _createCommentVNode(\"\", true)\n          ]),\n          (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(detailedSyntenySets), (set, index) => {\n            return (_openBlock(), _createElementBlock(\"div\", {\n              key: index,\n              class: \"col-2 legend-container\"\n            }, [\n              (set.variantBinSize && set.maxVariantCount && set.maxVariantCount > 0)\n                ? (_openBlock(), _createBlock(GradientLegend, {\n                    key: 0,\n                    \"species-name\": set.speciesName,\n                    \"map-name\": set.mapName,\n                    \"min-value\": 0,\n                    \"max-value\": set.maxVariantCount,\n                    \"bin-size\": set.variantBinSize,\n                    \"min-color\": \"#0000FF\",\n                    \"max-color\": \"#FF0000\"\n                  }, null, 8, [\"species-name\", \"map-name\", \"max-value\", \"bin-size\"]))\n                : _createCommentVNode(\"\", true)\n            ]))\n          }), 128))\n        ]))\n      : _createCommentVNode(\"\", true),\n    _createVNode(VCMapDialog, {\n      show: _unref(showDialog),\n      \"onUpdate:show\": _cache[24] || (_cache[24] = ($event: any) => (_isRef(showDialog) ? (showDialog).value = $event : null)),\n      header: _unref(dialogHeader),\n      message: _unref(dialogMessage),\n      theme: _unref(dialogTheme),\n      \"show-back-button\": _unref(showDialogBackButton)\n    }, null, 8, [\"show\", \"header\", \"message\", \"theme\", \"show-back-button\"]),\n    (_unref(arePanelsLoading))\n      ? (_openBlock(), _createBlock(LoadingSpinnerMask, {\n          key: 1,\n          style: _normalizeStyle(getDetailedPosition())\n        }, null, 8, [\"style\"]))\n      : _createCommentVNode(\"\", true)\n  ], 64))\n}\n}\n\n})","import script from \"./SVGViewbox.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./SVGViewbox.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./SVGViewbox.vue?vue&type=style&index=0&id=7507686c&lang=scss&scoped=true\"\n\nimport exportComponent from \"/home/rgdpub/vcmap-ui/app/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-7507686c\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { createElementVNode as _createElementVNode, unref as _unref, toDisplayString as _toDisplayString, resolveComponent as _resolveComponent, createVNode as _createVNode, isRef as _isRef, withCtx as _withCtx, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-7d10cb1d\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"grid unpadded col-4\" }\nconst _hoisted_2 = { class: \"col-12\" }\nconst _hoisted_3 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"h4\", null, \"Overview\", -1))\nconst _hoisted_4 = { class: \"grid unpadded\" }\nconst _hoisted_5 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"col-5\" }, \"Backbone:\", -1))\nconst _hoisted_6 = {\n  class: \"col-7 bold\",\n  \"data-test\": \"backbone-overview-display\"\n}\nconst _hoisted_7 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"col-5\" }, \"Length:\", -1))\nconst _hoisted_8 = { class: \"col-7 bold\" }\nconst _hoisted_9 = { class: \"p-fluid col-12 bold\" }\nconst _hoisted_10 = { class: \"grid p-d-flex\" }\nconst _hoisted_11 = { class: \"col-6\" }\nconst _hoisted_12 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"h4\", { class: \"config-label\" }, \"Start Position\", -1))\nconst _hoisted_13 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"p\", { class: \"label-description\" }, \"Min: 0bp\", -1))\nconst _hoisted_14 = { class: \"load-by-position-label\" }\nconst _hoisted_15 = { class: \"col-6\" }\nconst _hoisted_16 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"h4\", { class: \"config-label\" }, \"Stop Position\", -1))\nconst _hoisted_17 = { class: \"label-description\" }\nconst _hoisted_18 = { class: \"load-by-position-label\" }\nconst _hoisted_19 = { class: \"grid p-d-flex\" }\nconst _hoisted_20 = { class: \"col-6 left-align-btn\" }\nconst _hoisted_21 = { class: \"col-6\" }\n\nimport { Formatter } from '@/utils/Formatter';\nimport { computed, ref } from 'vue';\nimport { useStore } from 'vuex';\nimport { useLogger } from 'vue-logger-plugin';\nimport { key } from '@/store';\nimport VCMapDialog from './VCMapDialog.vue';\n\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'OverviewControls',\n  setup(__props) {\n\nconst store = useStore(key);\nconst $log = useLogger();\n\nlet showEditModal = ref(false);\nlet startPosition = ref(0);\nlet stopPosition = ref(store.state.chromosome?.seqLength ?? 1);\n\nconst isValidStartStop = computed(() => {\n  // Do we account for stop positions below start?\n  // originally: return startPosition.value !== stopPosition.value;\n  return startPosition.value < stopPosition.value;\n});\n\nconst maxPosition = computed(() => {\n  return store.state.chromosome?.seqLength ?? 0;\n});\n\nconst backboneLength = computed(() => {\n  if (store.state.chromosome == null)\n  {\n    return '-';\n  }\n\n  return Formatter.addCommasToBasePair(store.state.chromosome.seqLength);\n});\n\nconst openSelectionEditModal = () => {\n  const defaultStart = 0;\n  const defaultStop = store.state.chromosome?.seqLength ?? 0;\n\n  startPosition.value = store.state.selectedBackboneRegion?.viewportSelection?.basePairStart ?? defaultStart;\n  stopPosition.value = store.state.selectedBackboneRegion?.viewportSelection?.basePairStop ?? defaultStop;\n  showEditModal.value = true;\n};\n\nconst closeModal = () => {\n  showEditModal.value = false;\n};\n\nconst saveSelectionChange = () => {\n  if (store.state.chromosome == null)\n  {\n    $log.error('Chromosome seq length required when adjusting backbone base selection');\n    return;\n  }\n\n  if (isValidStartStop.value)\n  {\n    // FIXME: What is the point of setting the viewport selection here? See if we can remove these next couple lines.\n    const selectedBackboneRegion = store.state.selectedBackboneRegion;\n    selectedBackboneRegion?.setViewportSelection(startPosition.value, stopPosition.value);\n\n    store.dispatch('setDetailedBasePairRequest', { start: startPosition.value, stop: stopPosition.value });\n    // store.dispatch('setDetailedBasePairRange', { start: startPosition.value, stop: stopPosition.value });\n  }\n  showEditModal.value = false;\n};\n\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_Button = _resolveComponent(\"Button\")!\n  const _component_InputNumber = _resolveComponent(\"InputNumber\")!\n\n  return (_openBlock(), _createElementBlock(_Fragment, null, [\n    _createElementVNode(\"div\", _hoisted_1, [\n      _createElementVNode(\"div\", _hoisted_2, [\n        _hoisted_3,\n        _createElementVNode(\"div\", _hoisted_4, [\n          _hoisted_5,\n          _createElementVNode(\"div\", _hoisted_6, _toDisplayString(_unref(store).state.species?.name) + \" chr\" + _toDisplayString(_unref(store).state.chromosome?.chromosome) + \" (\" + _toDisplayString(_unref(store).state.species?.activeMap.name) + \")\", 1),\n          _hoisted_7,\n          _createElementVNode(\"div\", _hoisted_8, _toDisplayString(_unref(backboneLength)) + \"bp\", 1),\n          _createElementVNode(\"div\", _hoisted_9, [\n            _createVNode(_component_Button, {\n              label: \"Edit BP Range\",\n              icon: \"pi pi-pencil\",\n              class: \"p-button-sm edit-bp-btn p-button-secondary\",\n              onClick: openSelectionEditModal\n            })\n          ])\n        ])\n      ])\n    ]),\n    _createVNode(VCMapDialog, {\n      show: _unref(showEditModal),\n      \"onUpdate:show\": _cache[2] || (_cache[2] = ($event: any) => (_isRef(showEditModal) ? (showEditModal).value = $event : showEditModal = $event)),\n      header: \"Edit Selected Start/Stop Positions\"\n    }, {\n      content: _withCtx(() => [\n        _createElementVNode(\"div\", _hoisted_10, [\n          _createElementVNode(\"div\", _hoisted_11, [\n            _hoisted_12,\n            _hoisted_13,\n            _createVNode(_component_InputNumber, {\n              modelValue: _unref(startPosition),\n              \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => (_isRef(startPosition) ? (startPosition).value = $event : startPosition = $event)),\n              max: _unref(maxPosition) - 1,\n              min: 0,\n              useGrouping: false\n            }, null, 8, [\"modelValue\", \"max\"]),\n            _createElementVNode(\"div\", _hoisted_14, _toDisplayString(_unref(Formatter).addCommasToBasePair(_unref(startPosition))) + _toDisplayString(_unref(Formatter).evaluateBPInput(_unref(startPosition)) !== null ? 'bp' : 'N/A'), 1)\n          ]),\n          _createElementVNode(\"div\", _hoisted_15, [\n            _hoisted_16,\n            _createElementVNode(\"p\", _hoisted_17, \"Max: \" + _toDisplayString(_unref(Formatter).addCommasToBasePair(_unref(maxPosition))) + \"bp\", 1),\n            _createVNode(_component_InputNumber, {\n              modelValue: _unref(stopPosition),\n              \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event: any) => (_isRef(stopPosition) ? (stopPosition).value = $event : stopPosition = $event)),\n              max: _unref(maxPosition),\n              min: 1,\n              useGrouping: false\n            }, null, 8, [\"modelValue\", \"max\"]),\n            _createElementVNode(\"div\", _hoisted_18, _toDisplayString(_unref(Formatter).addCommasToBasePair(_unref(stopPosition))) + _toDisplayString(_unref(stopPosition) ? 'bp' : 'N/A'), 1)\n          ])\n        ])\n      ]),\n      footer: _withCtx(() => [\n        _createElementVNode(\"div\", _hoisted_19, [\n          _createElementVNode(\"div\", _hoisted_20, [\n            _createVNode(_component_Button, {\n              label: \"Cancel\",\n              class: \"p-button-outlined p-button-secondary\",\n              onClick: closeModal\n            })\n          ]),\n          _createElementVNode(\"div\", _hoisted_21, [\n            _createVNode(_component_Button, {\n              label: \"Confirm New Selection\",\n              class: \"p-button-success\",\n              onClick: saveSelectionChange,\n              disabled: !_unref(isValidStartStop) || _unref(store).state.isOverviewPanelUpdating || _unref(store).state.isDetailedPanelUpdating\n            }, null, 8, [\"disabled\"])\n          ])\n        ])\n      ]),\n      _: 1\n    }, 8, [\"show\"])\n  ], 64))\n}\n}\n\n})","import script from \"./OverviewControls.vue?vue&type=script&lang=ts&setup=true\"\nexport * from \"./OverviewControls.vue?vue&type=script&lang=ts&setup=true\"\n\nimport \"./OverviewControls.vue?vue&type=style&index=0&id=7d10cb1d&lang=scss&scoped=true\"\n\nimport exportComponent from \"/home/rgdpub/vcmap-ui/app/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-7d10cb1d\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { unref as _unref, resolveComponent as _resolveComponent, createVNode as _createVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-7152d558\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"zoom-options-container\" }\nconst _hoisted_2 = { class: \"zoom-out-container\" }\nconst _hoisted_3 = { class: \"interval-label\" }\nconst _hoisted_4 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"p\", { class: \"zoom-out-label\" }, \"Zoom Out\", -1))\nconst _hoisted_5 = { class: \"zoom-level-container\" }\nconst _hoisted_6 = { class: \"zoom-level-label\" }\nconst _hoisted_7 = { class: \"zoom-in-container\" }\nconst _hoisted_8 = { class: \"interval-label\" }\nconst _hoisted_9 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"p\", { class: \"zoom-in-label\" }, \"Zoom In\", -1))\n\nimport { useStore } from 'vuex';\nimport { key } from '@/store';\nimport { computed, ref, watch } from 'vue';\nimport { SliderSlideEndEvent } from 'primevue/slider';\nimport { useLogger } from 'vue-logger-plugin';\n\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'Zoom',\n  setup(__props) {\n\nconst $log = useLogger();\nconst store = useStore(key);\n\nconst zoomLevel = ref(1.0);\nconst zoomIntervals = [1.5, 3.0, 10.0, 100.0];\nconst zoomStep = ref(1.0);\n\nwatch(() => store.state.detailedBasePairRange, (newRange) => {\n  // Update the zoom level shown in the Slider to show the ratio of the\n  // viewport size to the total chromosome.\n  let seqLength = store.state.chromosome?.seqLength ?? 0;\n  zoomLevel.value = seqLength * 1.0 / (newRange.stop - newRange.start);\n  zoomStep.value = getZoomStepFromZoomLevel(zoomLevel.value);\n}, { immediate: true, });\n\nconst isZoomDisabled = computed(() => {\n  return store.state.isDetailedPanelUpdating || store.state.chromosome == null;\n});\n\nconst onZoomSliderEnd = (event: SliderSlideEndEvent) => {\n  if (store.state.isDetailedPanelUpdating)\n  {\n    return;\n  }\n\n  logZoom(event.value);\n};\n\nconst zoom = (newZoomLevel: number) => {\n  const backboneChromosome = store.state.chromosome;\n\n  $log.debug(`Zoom level: ${newZoomLevel}`);\n\n  if (backboneChromosome == null)\n  {\n    $log.error('Cannot zoom if selectedRegion, viewportSelection, or backboneChromosome is null');\n    return;\n  }\n\n  if (newZoomLevel === 1)\n  {\n    store.dispatch('setDetailedBasePairRequest', { start: 0, stop: backboneChromosome.seqLength });\n  }\n  else\n  {\n    let zoomedStart = store.state.detailedBasePairRange.start;\n    let zoomedStop = store.state.detailedBasePairRange.stop;\n    let currentLength = zoomedStop - zoomedStart;\n    let currentZoomLevel = backboneChromosome.seqLength / currentLength;\n\n    const newRegionLength = currentLength * (currentZoomLevel / newZoomLevel);\n    const lengthDiff = currentLength - newRegionLength;\n\n    if (lengthDiff > 0)\n    {\n      // Zooming in\n      zoomedStart = zoomedStart + (lengthDiff / 2);\n      zoomedStop = zoomedStop - (lengthDiff / 2);\n    }\n    else if (lengthDiff < 0)\n    {\n      // Zooming out\n      zoomedStart = zoomedStart + (lengthDiff / 2);\n      zoomedStop = zoomedStop - (lengthDiff / 2);\n\n      if (zoomedStart < 0)\n      {\n        zoomedStart = 0;\n        // Apply the rest of the region length to the end along with a sanity check to make sure the stop doesn't extend past the base selection\n        zoomedStop = (zoomedStart - lengthDiff > backboneChromosome.seqLength) ? backboneChromosome.seqLength : zoomedStart + newRegionLength;\n      }\n      else if (zoomedStop > backboneChromosome.seqLength)\n      {\n        zoomedStop = backboneChromosome.seqLength;\n        // Apply the rest of the region length to the start along with a sanity check to make the start doesn't extend above the base selection\n        zoomedStart = (zoomedStop + lengthDiff < 0) ? 0 : zoomedStop - newRegionLength;\n      }\n    }\n\n    // Trigger detailed panel update\n    store.dispatch('setDetailedBasePairRequest', { start: zoomedStart, stop: zoomedStop });\n  }\n};\n\nconst logZoom = (sliderStep: number) => {\n  zoomStep.value = sliderStep;\n  $log.debug(`Zoom Step: ${zoomStep.value}`);\n  const selectedRegion = store.state.selectedBackboneRegion;\n\n  if (selectedRegion == null || selectedRegion.viewportSelection == null) {\n    $log.error('ERROR WITH SELECTED REGION');\n  } \n  else {\n    // check to zoom out to full backbone selection if zoom level is 1\n    if (sliderStep <= 1) zoom(1); \n    else {\n      let maxZoom = selectedRegion.viewportSelection.basePairStop;\n\n      let logMinZoom = log10(1);\n      let logMaxZoom = log10(maxZoom);\n\n      let logZoom = logMinZoom + (logMaxZoom-logMinZoom)*sliderStep/(100-1);\n      let zoomed = Math.exp(logZoom);\n\n      $log.debug(`'Zoomed' after logZoom: ${zoomed}`);\n      zoom(zoomed);\n    }\n  }\n};\n\nconst zoomOut = (zoomInterval: number) => {\n  zoom( zoomLevel.value / zoomInterval);\n};\nconst zoomIn = (zoomInterval: number) => {\n  zoom(zoomLevel.value * zoomInterval);\n};\n\nfunction log10(val: number)\n{\n  return Math.log(val) / Math.LN10;\n}\n\nfunction getZoomStepFromZoomLevel(zoomLevel: number)\n{\n  const selectedRegion = store.state.selectedBackboneRegion;\n  if (selectedRegion == null || selectedRegion.viewportSelection == null)\n  {\n    $log.error('Could not calculate zoom step from zoom level');\n    return 0;\n  }\n\n  const maxZoom = selectedRegion.viewportSelection.basePairStop;\n\n  const logMinZoom = log10(1);\n  const logMaxZoom = log10(maxZoom);\n  const logZoom = Math.log(zoomLevel); // get logarithmic value of the zoom level\n\n  return (logZoom - logMinZoom) * (100 - 1) / (logMaxZoom - logMinZoom);\n}\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_Slider = _resolveComponent(\"Slider\")!\n  const _component_Button = _resolveComponent(\"Button\")!\n\n  return (_openBlock(), _createElementBlock(_Fragment, null, [\n    _createVNode(_component_Slider, {\n      disabled: _unref(isZoomDisabled),\n      class: \"zoom-slider\",\n      \"data-test\": \"zoom-slider\",\n      modelValue: zoomStep.value,\n      \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => ((zoomStep).value = $event)),\n      step: 0.5,\n      min: 1,\n      max: 100,\n      onSlideend: onZoomSliderEnd\n    }, null, 8, [\"disabled\", \"modelValue\", \"step\"]),\n    _createElementVNode(\"div\", _hoisted_1, [\n      _createElementVNode(\"div\", _hoisted_2, [\n        (_openBlock(), _createElementBlock(_Fragment, null, _renderList(zoomIntervals, (interval) => {\n          return _createElementVNode(\"div\", {\n            class: \"zoom-options\",\n            key: interval\n          }, [\n            _createVNode(_component_Button, {\n              class: \"zoom-button\",\n              icon: \"pi pi-angle-double-left\",\n              disabled: _unref(isZoomDisabled),\n              onClick: ($event: any) => (zoomOut(interval))\n            }, null, 8, [\"disabled\", \"onClick\"]),\n            _createElementVNode(\"p\", _hoisted_3, _toDisplayString(interval) + \"x\", 1)\n          ])\n        }), 64)),\n        _hoisted_4\n      ]),\n      _createElementVNode(\"div\", _hoisted_5, [\n        _createElementVNode(\"p\", _hoisted_6, _toDisplayString(Math.round(zoomLevel.value * 100) / 100.0) + \"x\", 1)\n      ]),\n      _createElementVNode(\"div\", _hoisted_7, [\n        (_openBlock(), _createElementBlock(_Fragment, null, _renderList(zoomIntervals, (interval) => {\n          return _createElementVNode(\"div\", {\n            class: \"zoom-options\",\n            key: interval\n          }, [\n            _createVNode(_component_Button, {\n              class: \"zoom-button\",\n              icon: \"pi pi-angle-double-right\",\n              disabled: _unref(isZoomDisabled),\n              onClick: ($event: any) => (zoomIn(interval))\n            }, null, 8, [\"disabled\", \"onClick\"]),\n            _createElementVNode(\"p\", _hoisted_8, _toDisplayString(interval) + \"x\", 1)\n          ])\n        }), 64)),\n        _hoisted_9\n      ])\n    ])\n  ], 64))\n}\n}\n\n})","import script from \"./Zoom.vue?vue&type=script&lang=ts&setup=true\"\nexport * from \"./Zoom.vue?vue&type=script&lang=ts&setup=true\"\n\nimport \"./Zoom.vue?vue&type=style&index=0&id=7152d558&lang=scss&scoped=true\"\n\nimport exportComponent from \"/home/rgdpub/vcmap-ui/app/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-7152d558\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { createElementVNode as _createElementVNode, unref as _unref, toDisplayString as _toDisplayString, createVNode as _createVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = { class: \"grid unpadded col-7\" }\nconst _hoisted_2 = { class: \"col-12\" }\nconst _hoisted_3 = /*#__PURE__*/_createElementVNode(\"h4\", null, \"Details\", -1)\nconst _hoisted_4 = { class: \"grid unpadded\" }\nconst _hoisted_5 = /*#__PURE__*/_createElementVNode(\"div\", { class: \"col-3\" }, \"Displaying:\", -1)\nconst _hoisted_6 = { class: \"col-9 bold\" }\nconst _hoisted_7 = /*#__PURE__*/_createElementVNode(\"div\", { class: \"col-3\" }, \"Comparative Species:\", -1)\nconst _hoisted_8 = { class: \"col-9 bold\" }\nconst _hoisted_9 = { class: \"col-12\" }\n\nimport Species from '@/models/Species';\nimport { computed } from 'vue';\nimport { useStore } from 'vuex';\nimport Zoom from '@/components/Zoom.vue';\nimport { Formatter } from '@/utils/Formatter';\nimport { key } from '@/store';\n\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'DetailsControls',\n  setup(__props) {\n\nconst store = useStore(key);\n\nconst displayedSpeciesRegionLabel = computed(() => {\n  const selectedRegion = store.state.selectedBackboneRegion;\n  if (selectedRegion && selectedRegion.viewportSelection && selectedRegion.viewportSelection.svgHeight > 0)\n  {\n    return `${Formatter.addCommasToBasePair(selectedRegion.viewportSelection.basePairStart)}-${Formatter.addCommasToBasePair(selectedRegion.viewportSelection.basePairStop)}`;\n  }\n  \n  return '';\n});\n\nconst comparativeSpeciesText = computed(() => {\n  let text = '';\n  store.state.comparativeSpecies.forEach((species: Species) => {\n    if (text.length > 0)\n    {\n      text += ', ';\n    }\n\n    text += `${species.name} (${species.activeMap.name})`;\n  });\n\n  return text;\n});\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"div\", _hoisted_2, [\n      _hoisted_3,\n      _createElementVNode(\"div\", _hoisted_4, [\n        _hoisted_5,\n        _createElementVNode(\"div\", _hoisted_6, _toDisplayString(_unref(store).state.species?.name) + \" chr\" + _toDisplayString(_unref(store).state.chromosome?.chromosome) + \":\" + _toDisplayString(_unref(displayedSpeciesRegionLabel)), 1),\n        _hoisted_7,\n        _createElementVNode(\"div\", _hoisted_8, _toDisplayString(_unref(comparativeSpeciesText)), 1),\n        _createElementVNode(\"div\", _hoisted_9, [\n          _createVNode(Zoom)\n        ])\n      ])\n    ])\n  ]))\n}\n}\n\n})","import script from \"./DetailsControls.vue?vue&type=script&lang=ts&setup=true\"\nexport * from \"./DetailsControls.vue?vue&type=script&lang=ts&setup=true\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { unref as _unref, createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, resolveComponent as _resolveComponent, createVNode as _createVNode, isRef as _isRef, withCtx as _withCtx, createBlock as _createBlock } from \"vue\"\n\nconst _hoisted_1 = { class: \"header-container\" }\nconst _hoisted_2 = { class: \"col-12 backbone-info\" }\nconst _hoisted_3 = { class: \"grid unpadded\" }\nconst _hoisted_4 = /*#__PURE__*/_createElementVNode(\"div\", { class: \"col-5\" }, \"Backbone:\", -1)\nconst _hoisted_5 = { class: \"col-7 bold\" }\nconst _hoisted_6 = /*#__PURE__*/_createElementVNode(\"div\", { class: \"col-5\" }, \"Chromosome:\", -1)\nconst _hoisted_7 = { class: \"col-7 bold\" }\nconst _hoisted_8 = /*#__PURE__*/_createElementVNode(\"div\", { class: \"col-5\" }, \"Assembly:\", -1)\nconst _hoisted_9 = { class: \"col-7 bold\" }\nconst _hoisted_10 = /*#__PURE__*/_createElementVNode(\"thead\", null, [\n  /*#__PURE__*/_createElementVNode(\"tr\", null, [\n    /*#__PURE__*/_createElementVNode(\"th\", null, \"Comparative Species\"),\n    /*#__PURE__*/_createElementVNode(\"th\", null, \"Assembly\")\n  ])\n], -1)\nconst _hoisted_11 = { class: \"content-container\" }\nconst _hoisted_12 = { class: \"track-item-container\" }\nconst _hoisted_13 = { class: \"lg:col-1 md:col-2 sm:col-2\" }\nconst _hoisted_14 = { class: \"grid p-d-flex modal-controls-container\" }\nconst _hoisted_15 = { class: \"left-align-btn\" }\n\nimport { computed, ref, onMounted } from 'vue';\nimport { useStore } from 'vuex';\nimport { key } from '@/store';\nimport Species from '@/models/Species';\n// import SpeciesApi from '@/api/SpeciesApi';\nimport SpeciesMap from '@/models/SpeciesMap';\nimport logger from '@/logger';\n\n/**\n * Can use v-model:show to do 2 way binding\n */\ninterface Props \n{\n  header: string;\n  message?: string;\n  show: boolean;\n  theme?: 'error' | 'normal';\n  showBackButton?: boolean;\n  onConfirmCallback?: () => void;\n  onLoadSyntenyVariants: (mapKeys: number[] | null, triggerUpdate: boolean) => Promise<void>;\n  onCloseLoadDataTrackModal: () => void;\n}\n\ninterface Emits\n{\n  // eslint-disable-next-line\n  (eventName: 'update:show', value: boolean): void\n}\n\ninterface DataTrackItem\n{\n  species: SpeciesMap;\n}\n\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'LoadDataTrackControls',\n  props: {\n    header: null,\n    message: null,\n    show: { type: Boolean },\n    theme: null,\n    showBackButton: { type: Boolean },\n    onConfirmCallback: null,\n    onLoadSyntenyVariants: null,\n    onCloseLoadDataTrackModal: null\n  },\n  emits: [\"update:show\"],\n  setup(__props: any, { emit }: { emit: ({\n  // eslint-disable-next-line\n  (eventName: 'update:show', value: boolean): void\n}), expose: any, slots: any, attrs: any }) {\n\nconst props = __props as {\n  header: string;\n  message?: string;\n  show: boolean;\n  theme?: 'error' | 'normal';\n  showBackButton?: boolean;\n  onConfirmCallback?: () => void;\n  onLoadSyntenyVariants: (mapKeys: number[] | null, triggerUpdate: boolean) => Promise<void>;\n  onCloseLoadDataTrackModal: () => void;\n};\n\n\n\nconst store = useStore(key);\n\n// refs\nconst dataTrackItems = ref<DataTrackItem[]>([]);\nconst speciesOptions = ref<Species[]>([]);\n\n// // Dropdown selection options:\n// const sourceOptions = [{name: 'API', key: 0},{name: 'File Upload', key: 1}];\n// // data type options:\n// const dataTypeOptions = [{name: 'QTL', key: 0},{name: 'Variants', key: 1}]\n\nonMounted(prepopulateConfigOptions);\n\nconst isActive = computed({\n  get() {\n    return props.show;\n  },\n  set(value: boolean) {\n    emit('update:show', value);\n  }\n});\n\nconst onConfirmLoadDataTrack = () => {\n  const selectedMapKeys: number[] = [];\n  dataTrackItems.value.forEach((item) => {\n    if (item.species) {\n      selectedMapKeys.push(item.species.key);\n    }\n  });\n\n  if (selectedMapKeys.length > 0) {\n    props.onCloseLoadDataTrackModal();\n    props.onLoadSyntenyVariants(selectedMapKeys, true /* trigger update */);\n    dataTrackItems.value.length = 0;\n  }\n};\n\nconst onAddDataTrack = () => {\n  let currLength = dataTrackItems.value.length;\n\n  // limit max number of tracks\n  if (currLength < store.state.comparativeSpecies.length + 1)\n  {\n    dataTrackItems.value.push({ species: null });\n  }\n  else {\n    // todo: Error Handling\n    logger.error(\"Item Limit Reached\");\n  }\n};\n\nconst close = () => {\n  dataTrackItems.value.length = 0;\n  props.onCloseLoadDataTrackModal();\n};\n\nfunction removeDataTrackItem(index: number)\n{\n  dataTrackItems.value.splice(index, 1);\n}\n\nfunction prepopulateConfigOptions()\n{\n  let loadedSpecies = [];\n  try\n  {\n    let loadedBackbone = store.state.species;\n    loadedBackbone.label = loadedBackbone.name + \": \" + loadedBackbone.activeMap.name;\n    loadedSpecies.push(loadedBackbone);\n    store.state.comparativeSpecies.forEach((entry) => {\n      entry.label = entry.name + \": \" + entry.activeMap.name;\n      loadedSpecies.push(entry);\n    });\n    speciesOptions.value = loadedSpecies;\n  }\n  catch (err: any)\n  {\n    logger.error('An error occurred while loading available species');\n    logger.error(err);\n  }\n\n  // try\n  // {\n  //   // to filter only for currently loaded species\n  //   speciesOptions.value = await (await SpeciesApi.getSpecies()).filter((item) => {\n  //     return (loadedSpecies.includes(item.name));\n  //   });\n  //   // speciesOptions.value = await (await SpeciesApi.getSpecies())\n  // }\n  // catch (err: any)\n  // {\n  //   logger.error('An error occurred while looking up the available species');\n  // }\n\n  if (speciesOptions.value.length === 0 || store.state.species == null)\n  {\n    return;\n  }\n}\n\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_Button = _resolveComponent(\"Button\")!\n  const _component_Dropdown = _resolveComponent(\"Dropdown\")!\n  const _component_Dialog = _resolveComponent(\"Dialog\")!\n\n  return (_openBlock(), _createBlock(_component_Dialog, {\n    visible: _unref(isActive),\n    \"onUpdate:visible\": _cache[0] || (_cache[0] = ($event: any) => (_isRef(isActive) ? (isActive).value = $event : null)),\n    class: \"data-track-dialog\",\n    draggable: false,\n    closable: false,\n    modal: true\n  }, {\n    header: _withCtx(() => [\n      _createElementVNode(\"div\", _hoisted_1, [\n        _createElementVNode(\"div\", _hoisted_2, [\n          _createElementVNode(\"div\", _hoisted_3, [\n            _hoisted_4,\n            _createElementVNode(\"div\", _hoisted_5, _toDisplayString(_unref(store).state.species?.name), 1),\n            _hoisted_6,\n            _createElementVNode(\"div\", _hoisted_7, \"chr\" + _toDisplayString(_unref(store).state.chromosome?.chromosome), 1),\n            _hoisted_8,\n            _createElementVNode(\"div\", _hoisted_9, _toDisplayString(_unref(store).state.species?.activeMap.name), 1)\n          ])\n        ]),\n        _createElementVNode(\"div\", null, [\n          _createElementVNode(\"table\", null, [\n            _hoisted_10,\n            _createElementVNode(\"tbody\", null, [\n              (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(store).state.comparativeSpecies, (species, index) => {\n                return (_openBlock(), _createElementBlock(\"tr\", { key: index }, [\n                  _createElementVNode(\"td\", null, _toDisplayString(species.name), 1),\n                  _createElementVNode(\"td\", null, _toDisplayString(species.activeMap.name), 1)\n                ]))\n              }), 128))\n            ])\n          ])\n        ])\n      ])\n    ]),\n    default: _withCtx(() => [\n      _createElementVNode(\"div\", _hoisted_11, [\n        _createVNode(_component_Button, {\n          label: \"Add Variants\",\n          icon: \"pi pi-plus\",\n          class: \"p-button-secondary p-button-sm add-track-btn\",\n          onClick: onAddDataTrack\n        }),\n        _createElementVNode(\"div\", _hoisted_12, [\n          (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(dataTrackItems.value, (item, index) => {\n            return (_openBlock(), _createElementBlock(\"div\", {\n              class: \"grid track-item\",\n              key: index\n            }, [\n              _createVNode(_component_Dropdown, {\n                modelValue: dataTrackItems.value[index].species,\n                \"onUpdate:modelValue\": ($event: any) => ((dataTrackItems.value[index].species) = $event),\n                options: speciesOptions.value,\n                optionValue: \"activeMap\",\n                optionLabel: \"label\",\n                placeholder: \"Species\"\n              }, null, 8, [\"modelValue\", \"onUpdate:modelValue\", \"options\"]),\n              _createElementVNode(\"div\", _hoisted_13, [\n                _createVNode(_component_Button, {\n                  onClick: ($event: any) => (removeDataTrackItem(index)),\n                  label: \"Remove\",\n                  icon: \"pi pi-minus-circle\",\n                  class: \"p-button-sm p-button-danger\"\n                }, null, 8, [\"onClick\"])\n              ])\n            ]))\n          }), 128))\n        ])\n      ]),\n      _createElementVNode(\"div\", _hoisted_14, [\n        _createElementVNode(\"div\", _hoisted_15, [\n          _createVNode(_component_Button, {\n            label: \"Cancel\",\n            class: \"p-button-danger\",\n            onClick: close\n          })\n        ]),\n        _createElementVNode(\"div\", null, [\n          _createVNode(_component_Button, {\n            label: \"Load Tracks\",\n            class: \"p-button-secondary\",\n            icon: \"pi pi-arrow-right\",\n            onClick: onConfirmLoadDataTrack\n          })\n        ])\n      ])\n    ]),\n    _: 1\n  }, 8, [\"visible\"]))\n}\n}\n\n})","import script from \"./LoadDataTrackControls.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./LoadDataTrackControls.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./LoadDataTrackControls.vue?vue&type=style&index=0&id=5ae4c585&lang=scss\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { createElementVNode as _createElementVNode, unref as _unref, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, resolveDirective as _resolveDirective, withDirectives as _withDirectives, isRef as _isRef, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\nimport _imports_0 from '../assets/images/vcmap_logo_v2.png'\nimport _imports_1 from '../assets/images/rgd_logo.png'\n\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-0118bb31\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"grid\" }\nconst _hoisted_2 = { class: \"col-12\" }\nconst _hoisted_3 = { class: \"vcmap-header\" }\nconst _hoisted_4 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"img\", {\n  alt: \"VCMap Logo\",\n  class: \"logo\",\n  src: _imports_0\n}, null, -1))\nconst _hoisted_5 = { class: \"icon-container\" }\nconst _hoisted_6 = {\n  href: \"https://rgd.mcw.edu/\",\n  target: \"_blank\"\n}\nconst _hoisted_7 = {\n  class: \"rgd-logo\",\n  src: _imports_1,\n  alt: \"RGD logo\"\n}\nconst _hoisted_8 = { class: \"grid p-d-flex\" }\n\nimport { useRouter } from 'vue-router';\nimport OverviewControls from '@/components/OverviewControls.vue';\nimport DetailsControls from '@/components/DetailsControls.vue';\nimport { VERSION } from '@/version';\nimport { ref } from 'vue';\nimport LoadDataTrackControls from '@/components/LoadDataTrackControls.vue';\n\ninterface Props \n{\n  onLoadSyntenyVariants: (mapKeys: number[] | null, triggerUpdate: boolean) => Promise<void>;\n}\n\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'HeaderPanel',\n  props: {\n    onLoadSyntenyVariants: null\n  },\n  setup(__props: any) {\n\nconst props = __props as {\n  onLoadSyntenyVariants: (mapKeys: number[] | null, triggerUpdate: boolean) => Promise<void>;\n};\n\n\n\nconst router = useRouter();\n\nlet showLoadDataTrackModal = ref(false);\n\nconst openLoadDataTrackModal = () => {\n  showLoadDataTrackModal.value = true;\n};\n\nconst onLoadSyntenyVariants = async (mapKeys: number[] | null, triggerUpdate: boolean) => {\n  props.onLoadSyntenyVariants(mapKeys, triggerUpdate);\n};\n\nconst closeLoadDataTrackModal = () => {\n  showLoadDataTrackModal.value = false;\n};\n\nconst goToConfigurationScreen = () => {\n  router.push('/');\n};\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_Tag = _resolveComponent(\"Tag\")!\n  const _component_Button = _resolveComponent(\"Button\")!\n  const _component_Divider = _resolveComponent(\"Divider\")!\n  const _component_Panel = _resolveComponent(\"Panel\")!\n  const _directive_tooltip = _resolveDirective(\"tooltip\")!\n\n  return (_openBlock(), _createElementBlock(_Fragment, null, [\n    _createElementVNode(\"div\", _hoisted_1, [\n      _createElementVNode(\"div\", _hoisted_2, [\n        _createVNode(_component_Panel, {\n          toggleable: true,\n          class: \"vcmap-panel\"\n        }, {\n          header: _withCtx(() => [\n            _createElementVNode(\"div\", _hoisted_3, [\n              _hoisted_4,\n              _createVNode(_component_Tag, {\n                icon: \"pi pi-tag\",\n                severity: \"info\",\n                rounded: \"\"\n              }, {\n                default: _withCtx(() => [\n                  _createTextVNode(\"v\" + _toDisplayString(_unref(VERSION)), 1)\n                ]),\n                _: 1\n              })\n            ])\n          ]),\n          icons: _withCtx(() => [\n            _createElementVNode(\"div\", _hoisted_5, [\n              _createElementVNode(\"a\", _hoisted_6, [\n                _withDirectives(_createElementVNode(\"img\", _hoisted_7, null, 512), [\n                  [\n                    _directive_tooltip,\n                    `Go to RGD Home Page`,\n                    void 0,\n                    { bottom: true }\n                  ]\n                ])\n              ]),\n              _createVNode(_component_Button, {\n                label: \"New Configuration\",\n                icon: \"pi pi-cog\",\n                class: \"p-button-secondary header-btn\",\n                onClick: goToConfigurationScreen,\n                \"data-test\": \"load-config-btn\"\n              }),\n              _createVNode(_component_Button, {\n                label: \"Load Data Track\",\n                class: \"p-button-secondary header-btn\",\n                onClick: openLoadDataTrackModal,\n                \"data-test\": \"load-config-btn\"\n              })\n            ])\n          ]),\n          default: _withCtx(() => [\n            _createElementVNode(\"div\", _hoisted_8, [\n              _createVNode(OverviewControls),\n              _createVNode(_component_Divider, { layout: \"vertical\" }),\n              _createVNode(DetailsControls)\n            ])\n          ]),\n          _: 1\n        })\n      ])\n    ]),\n    _createVNode(LoadDataTrackControls, {\n      show: _unref(showLoadDataTrackModal),\n      \"onUpdate:show\": _cache[0] || (_cache[0] = ($event: any) => (_isRef(showLoadDataTrackModal) ? (showLoadDataTrackModal).value = $event : showLoadDataTrackModal = $event)),\n      \"on-load-synteny-variants\": onLoadSyntenyVariants,\n      \"on-close-load-data-track-modal\": closeLoadDataTrackModal,\n      header: \"Load Data Tracks\"\n    }, null, 8, [\"show\"])\n  ], 64))\n}\n}\n\n})","import script from \"./HeaderPanel.vue?vue&type=script&lang=ts&setup=true\"\nexport * from \"./HeaderPanel.vue?vue&type=script&lang=ts&setup=true\"\n\nimport \"./HeaderPanel.vue?vue&type=style&index=0&id=0118bb31&lang=scss&scoped=true\"\n\nimport exportComponent from \"/home/rgdpub/vcmap-ui/app/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-0118bb31\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, resolveDirective as _resolveDirective, createBlock as _createBlock, withDirectives as _withDirectives, unref as _unref, Fragment as _Fragment, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-49629d74\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { key: 0 }\nconst _hoisted_2 = { class: \"gene-row\" }\nconst _hoisted_3 = {\n  key: 0,\n  \"data-test\": \"gene-name\"\n}\nconst _hoisted_4 = { key: 0 }\nconst _hoisted_5 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"i\", { class: \"pi pi-external-link external-link\" }, null, -1))\nconst _hoisted_6 = {\n  key: 0,\n  \"data-test\": \"species-name\",\n  class: \"species-label\"\n}\nconst _hoisted_7 = { \"data-test\": \"chromosome-name\" }\nconst _hoisted_8 = { \"data-test\": \"start-stop\" }\nconst _hoisted_9 = { key: 1 }\nconst _hoisted_10 = {\n  key: 2,\n  \"data-test\": \"level\"\n}\n\nimport Gene from '@/models/Gene';\nimport { Formatter } from '@/utils/Formatter';\nimport { useStore } from 'vuex';\nimport { key } from '@/store';\nimport { useLogger } from 'vue-logger-plugin';\nimport { getNewSelectedData } from '@/utils/DataPanelHelpers';\n\ninterface Props\n{\n  gene: Gene | null; // TODO: Should we allow null here?\n  chromosome: string;\n  start: number;\n  stop: number;\n  geneList: Map<number, Gene>;\n  chainLevel?: number;\n  trackOrientation?: string;\n}\n\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'GeneInfo',\n  props: {\n    gene: null,\n    chromosome: null,\n    start: null,\n    stop: null,\n    geneList: null,\n    chainLevel: null,\n    trackOrientation: null\n  },\n  setup(__props: any) {\n\nconst props = __props as {\n  gene: Gene | null; // TODO: Should we allow null here?\n  chromosome: string;\n  start: number;\n  stop: number;\n  geneList: Map<number, Gene>;\n  chainLevel?: number;\n  trackOrientation?: string;\n};\n\nconst $log = useLogger();\nconst store = useStore(key);\nconst SEARCHED_GENE_WINDOW_FACTOR = 3;\n\n\n\nconst selectGene = (gene: Gene | null) => {\n  if (gene == null)\n  {\n    $log.warn(`Selected gene is null`);\n    return;\n  }\n\n  const geneLength = gene.stop - gene.start;\n  if (!gene.backboneStart || !gene.backboneStop) {\n    return;\n  }\n\n  const newData = getNewSelectedData(store, gene, props.geneList);\n  store.dispatch('setSelectedGeneIds', []);\n  store.dispatch('setSelectedGeneIds', newData.rgdIds);\n  store.dispatch('setSelectedData', newData.selectedData);\n\n  if (store.state.chromosome == null)\n  {\n    $log.error(`Chromosome in state is null. Cannot dispatch setDetailedBasePairRequest action.`);\n    return;\n  }\n\n  store.dispatch('setDetailedBasePairRequest', {\n    start: Math.max(gene.backboneStart - (geneLength * SEARCHED_GENE_WINDOW_FACTOR), 0),\n    stop: Math.min(gene.backboneStop + (geneLength * SEARCHED_GENE_WINDOW_FACTOR), store.state.chromosome.seqLength)\n  });\n};\n\nconst goToRgd = (rgdId: number) => {\n  const rgdUrl = `https://rgd.mcw.edu/rgdweb/report/gene/main.html?id=${rgdId}`;\n  window.open(rgdUrl);\n};\n\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_Button = _resolveComponent(\"Button\")!\n  const _directive_tooltip = _resolveDirective(\"tooltip\")!\n\n  return (_openBlock(), _createElementBlock(_Fragment, null, [\n    (__props.gene)\n      ? (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n          _createElementVNode(\"div\", _hoisted_2, [\n            _createElementVNode(\"div\", null, [\n              _createVNode(_component_Button, {\n                class: \"p-button-link rgd-link\",\n                onClick: _cache[0] || (_cache[0] = ($event: any) => (selectGene(__props.gene)))\n              }, {\n                default: _withCtx(() => [\n                  _createElementVNode(\"b\", null, _toDisplayString(__props.gene.symbol), 1)\n                ]),\n                _: 1\n              }),\n              (__props.gene)\n                ? (_openBlock(), _createElementBlock(\"span\", _hoisted_3, \"(\" + _toDisplayString(__props.gene.name ?? 'N/A') + \")\", 1))\n                : _createCommentVNode(\"\", true)\n            ]),\n            (__props.gene != null)\n              ? (_openBlock(), _createElementBlock(\"div\", _hoisted_4, [\n                  _withDirectives((_openBlock(), _createBlock(_component_Button, {\n                    class: \"p-button-link rgd-link\",\n                    onClick: _cache[1] || (_cache[1] = ($event: any) => (goToRgd(__props.gene!.rgdId)))\n                  }, {\n                    default: _withCtx(() => [\n                      _hoisted_5\n                    ]),\n                    _: 1\n                  })), [\n                    [\n                      _directive_tooltip,\n                      `View in RGD`,\n                      void 0,\n                      { left: true }\n                    ]\n                  ])\n                ]))\n              : _createCommentVNode(\"\", true)\n          ])\n        ]))\n      : _createCommentVNode(\"\", true),\n    _createElementVNode(\"div\", null, [\n      (__props.gene)\n        ? (_openBlock(), _createElementBlock(\"span\", _hoisted_6, _toDisplayString(__props.gene.speciesName ?? 'N/A'), 1))\n        : _createCommentVNode(\"\", true),\n      _createElementVNode(\"span\", _hoisted_7, \"Chr\" + _toDisplayString(__props.chromosome) + \": \", 1),\n      _createElementVNode(\"span\", _hoisted_8, _toDisplayString(_unref(Formatter).addCommasToBasePair(__props.start)) + \" - \" + _toDisplayString(_unref(Formatter).addCommasToBasePair(__props.stop)), 1)\n    ]),\n    (__props.trackOrientation)\n      ? (_openBlock(), _createElementBlock(\"div\", _hoisted_9, \"Orientation: \" + _toDisplayString(__props.trackOrientation), 1))\n      : _createCommentVNode(\"\", true),\n    (__props.chainLevel)\n      ? (_openBlock(), _createElementBlock(\"div\", _hoisted_10, \" Level: \" + _toDisplayString(__props.chainLevel), 1))\n      : _createCommentVNode(\"\", true)\n  ], 64))\n}\n}\n\n})","import script from \"./GeneInfo.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./GeneInfo.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./GeneInfo.vue?vue&type=style&index=0&id=49629d74&lang=scss&scoped=true\"\n\nimport exportComponent from \"/home/rgdpub/vcmap-ui/app/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-49629d74\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, resolveDirective as _resolveDirective, withDirectives as _withDirectives, renderList as _renderList, Fragment as _Fragment, createBlock as _createBlock, unref as _unref, withCtx as _withCtx, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-c8962e14\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"selected-data-header\" }\nconst _hoisted_2 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"panel-header-item\" }, [\n  /*#__PURE__*/_createElementVNode(\"b\", null, \"Selected Data\")\n], -1))\nconst _hoisted_3 = { class: \"panel-header-item\" }\nconst _hoisted_4 = { class: \"panel-header-item\" }\nconst _hoisted_5 = { key: 0 }\nconst _hoisted_6 = { class: \"clear-selection-btn\" }\nconst _hoisted_7 = { class: \"gene-data\" }\nconst _hoisted_8 = {\n  key: 0,\n  class: \"no-data\"\n}\nconst _hoisted_9 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"p\", { class: \"placeholder-msg\" }, \"No data selected\", -1))\nconst _hoisted_10 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"p\", { class: \"placeholder-msg-txt\" }, \"Select data by clicking or hovering drawn elements, or searching by gene symbol above\", -1))\nconst _hoisted_11 = [\n  _hoisted_9,\n  _hoisted_10\n]\n\nimport SelectedData from '@/models/SelectedData';\nimport Gene from '@/models/Gene';\nimport GeneInfo from '@/components/GeneInfo.vue';\nimport { Formatter } from '@/utils/Formatter';\nimport { ref, watch} from 'vue';\nimport { useStore } from 'vuex';\nimport { key } from '@/store';\nimport { getNewSelectedData, sortGeneMatches, adjustSelectionWindow } from '@/utils/DataPanelHelpers';\n\n/**\n * FIXME: This whole component needs to be looked over. There are references to properties on objects that don't exist.\n * The template is full of v-ifs and it can be pretty confusing to wrap your head around what's going on.\n */\n\ninterface Props\n{\n  selectedData: SelectedData[] | null;\n  geneList: Map<number, Gene>;\n}\n\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'SelectedDataPanel',\n  props: {\n    selectedData: null,\n    geneList: null\n  },\n  setup(__props: any) {\n\nconst props = __props as {\n  selectedData: SelectedData[] | null;\n  geneList: Map<number, Gene>;\n};\n\nconst store = useStore(key);\n\n\n\nconst searchedGene = ref<Gene | null>(null);\nconst geneSuggestions = ref<Gene[]>([]);\nconst numberOfResults = ref<number>(0);\n\nwatch(() => props.selectedData, () => {\n  numberOfResults.value = 0;\n  if (props.selectedData != null)\n  {\n    numberOfResults.value = props.selectedData.filter(d => d.type === 'Gene').length;\n  }\n});\n\nconst clearSelectedGenes = () => {\n  store.dispatch('setSelectedGeneIds', []);\n  store.dispatch('setSelectedData', null);\n  store.dispatch('setGene', null);\n  searchedGene.value = null;\n};\n\nconst searchGene = (event: {query: string}) => {\n  let matches: Gene[] = [];\n  props.geneList.forEach((gene) => {\n    if (gene.symbol.toLowerCase().includes(event.query.toLowerCase()))\n      matches.push(gene);\n  });\n\n  const searchKey = searchedGene.value;\n  matches = sortGeneMatches(searchKey, matches);\n  geneSuggestions.value = matches;\n};\n\nconst searchSVG = (event: { value: Gene }) => {\n  const newData = getNewSelectedData(store, event.value, props.geneList);\n  store.dispatch('setGene', event.value.clone()); // Update store config to see this as last gene selected\n  store.dispatch('setSelectedGeneIds', newData.rgdIds || []);\n  store.dispatch('setSelectedData', newData.selectedData);\n\n  if (event.value)\n  {\n    const newWindow = adjustSelectionWindow(event.value, props.geneList, store);\n    store.dispatch('setDetailedBasePairRequest', newWindow);\n  }\n};\n\nconst getSuggestionDisplay = (item: any) => {\n  return `${item.symbol} - ${item.speciesName}`;\n};\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_AutoComplete = _resolveComponent(\"AutoComplete\")!\n  const _component_Button = _resolveComponent(\"Button\")!\n  const _component_Divider = _resolveComponent(\"Divider\")!\n  const _component_Panel = _resolveComponent(\"Panel\")!\n  const _directive_tooltip = _resolveDirective(\"tooltip\")!\n\n  return (_openBlock(), _createBlock(_component_Panel, null, {\n    header: _withCtx(() => [\n      _createElementVNode(\"div\", _hoisted_1, [\n        _hoisted_2,\n        _createElementVNode(\"div\", _hoisted_3, [\n          _createVNode(_component_AutoComplete, {\n            modelValue: searchedGene.value,\n            \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => ((searchedGene).value = $event)),\n            suggestions: geneSuggestions.value,\n            onComplete: _cache[1] || (_cache[1] = ($event: any) => (searchGene($event))),\n            onItemSelect: _cache[2] || (_cache[2] = ($event: any) => (searchSVG($event))),\n            field: getSuggestionDisplay,\n            minLength: 3,\n            placeholder: \"Search loaded genes...\"\n          }, null, 8, [\"modelValue\", \"suggestions\"])\n        ]),\n        _createElementVNode(\"div\", _hoisted_4, [\n          (numberOfResults.value > 0)\n            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_5, _toDisplayString(numberOfResults.value) + \" Selected Genes \", 1))\n            : _createCommentVNode(\"\", true),\n          _createElementVNode(\"div\", _hoisted_6, [\n            _withDirectives(_createVNode(_component_Button, {\n              class: \"p-button-info p-button-sm p-button-warning\",\n              icon: \"pi pi-ban\",\n              onClick: clearSelectedGenes,\n              rounded: \"\"\n            }, null, 512), [\n              [\n                _directive_tooltip,\n                `Clear Selection`,\n                void 0,\n                { right: true }\n              ]\n            ])\n          ])\n        ])\n      ])\n    ]),\n    default: _withCtx(() => [\n      _createElementVNode(\"div\", _hoisted_7, [\n        (!props.selectedData || props.selectedData.length === 0)\n          ? (_openBlock(), _createElementBlock(\"div\", _hoisted_8, _hoisted_11))\n          : _createCommentVNode(\"\", true),\n        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(props.selectedData, (dataObject) => {\n          return (_openBlock(), _createElementBlock(_Fragment, { key: dataObject }, [\n            (dataObject.type === 'Gene')\n              ? (_openBlock(), _createElementBlock(_Fragment, { key: 0 }, [\n                  _createVNode(GeneInfo, {\n                    gene: dataObject.genomicSection.gene ? dataObject.genomicSection.gene : dataObject.genomicSection,\n                    chromosome: dataObject.genomicSection.chromosome ? dataObject.genomicSection.chromosome : dataObject.genomicSection.gene.chromosome,\n                    start: dataObject.genomicSection.speciesStart ? dataObject.genomicSection.speciesStart : dataObject.genomicSection.start,\n                    stop: dataObject.genomicSection.speciesStop ? dataObject.genomicSection.speciesStop : dataObject.genomicSection.stop,\n                    \"gene-list\": __props.geneList\n                  }, null, 8, [\"gene\", \"chromosome\", \"start\", \"stop\", \"gene-list\"]),\n                  _createVNode(_component_Divider)\n                ], 64))\n              : ((dataObject.type === 'trackSection' || dataObject.type === 'backbone' || dataObject.type === 'variantDensity'))\n                ? (_openBlock(), _createElementBlock(_Fragment, { key: 1 }, [\n                    ((dataObject.type === 'trackSection'))\n                      ? (_openBlock(), _createBlock(GeneInfo, {\n                          key: 0,\n                          gene: dataObject?.genomicSection.gene ? dataObject?.genomicSection.gene : null,\n                          chromosome: dataObject.genomicSection.chromosome,\n                          start: dataObject.genomicSection.speciesStart,\n                          stop: dataObject.genomicSection.speciesStop,\n                          \"chain-level\": dataObject.genomicSection.chainLevel,\n                          \"track-orientation\": dataObject.genomicSection.isInverted ? '-' : '+',\n                          \"gene-list\": __props.geneList\n                        }, null, 8, [\"gene\", \"chromosome\", \"start\", \"stop\", \"chain-level\", \"track-orientation\", \"gene-list\"]))\n                      : ((dataObject.type === 'backbone'))\n                        ? (_openBlock(), _createBlock(GeneInfo, {\n                            key: 1,\n                            gene: null,\n                            chromosome: dataObject.genomicSection.chromosome,\n                            start: dataObject.genomicSection.windowStart,\n                            stop: dataObject.genomicSection.windowStop,\n                            \"track-orientation\": \"+\",\n                            \"gene-list\": __props.geneList\n                          }, null, 8, [\"chromosome\", \"start\", \"stop\", \"gene-list\"]))\n                        : (dataObject?.type === 'variantDensity')\n                          ? (_openBlock(), _createElementBlock(_Fragment, { key: 2 }, [\n                              _createElementVNode(\"div\", null, [\n                                _createElementVNode(\"span\", null, \"Chr\" + _toDisplayString(dataObject.genomicSection.chromosome) + \": \", 1),\n                                _createElementVNode(\"span\", null, _toDisplayString(_unref(Formatter).addCommasToBasePair(dataObject.genomicSection.speciesStart)) + \" - \" + _toDisplayString(_unref(Formatter).addCommasToBasePair(dataObject.genomicSection.speciesStop)), 1)\n                              ]),\n                              _createElementVNode(\"div\", null, [\n                                _createElementVNode(\"span\", null, \"Variant Count: \" + _toDisplayString(_unref(Formatter).addCommasToBasePair(dataObject.genomicSection.variantCount)), 1)\n                              ])\n                            ], 64))\n                          : _createCommentVNode(\"\", true),\n                    _createVNode(_component_Divider)\n                  ], 64))\n                : _createCommentVNode(\"\", true)\n          ], 64))\n        }), 128))\n      ])\n    ]),\n    _: 1\n  }))\n}\n}\n\n})","import script from \"./SelectedDataPanel.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./SelectedDataPanel.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./SelectedDataPanel.vue?vue&type=style&index=0&id=c8962e14&lang=scss&scoped=true\"\n\nimport exportComponent from \"/home/rgdpub/vcmap-ui/app/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-c8962e14\"]])\n\nexport default __exports__","import Chromosome from \"@/models/Chromosome\";\nimport Gene from \"@/models/Gene\";\nimport {SyntenyComponent} from \"@/api/SyntenyApi\";\nimport VariantPositions from \"./VariantPositions\";\n\n// Generic type to represent position of any genomic data\nexport type GenomicPosition = {\n  start: number;\n  stop: number;\n  backboneStart: number;\n  backboneStop: number;\n};\n\ninterface BlockParams\n{\n  backbone: Chromosome;\n  chromosome: Chromosome;\n  chainLevel?: number;\n  start: number;\n  stop: number;\n  backboneStart?: number;\n  backboneStop?: number;\n  orientation?: '+' | '-';\n  gaps?: Gap[];\n  genes?: Gene[];\n}\n\ninterface GapParams\n{\n  start: number;\n  stop: number;\n  backboneStart: number;\n  backboneStop: number;\n  chainLevel: number;\n}\nexport class Gap\n{\n  start: number = -1;\n  stop: number = -1;\n  backboneStart: number = -1;\n  backboneStop: number = -1;\n  chainLevel: number = 1;\n\n  constructor(params: GapParams)\n  {\n    this.start = params.start;\n    this.stop = params.stop;\n    this.backboneStart = params.backboneStart;\n    this.backboneStop = params.backboneStop;\n    this.chainLevel = params.chainLevel;\n  }\n}\n\nexport default class Block\n{\n  backbone: Chromosome;\n  chromosome: Chromosome;\n  // Defaults\n  chainLevel: number = 1;\n  start: number = 0;\n  stop: number = 0;\n  backboneStart: number = -1;\n  backboneStop: number = -1;\n  orientation: \"+\" | \"-\" = '+';\n  gaps: Gap[] = [];\n  genes: Gene[] = [];\n  variantPositions?: VariantPositions;\n\n  // Constructor\n  constructor(params: BlockParams)\n  {\n    this.backbone = params.backbone;\n    this.chromosome = params.chromosome;\n    this.chainLevel = params.chainLevel ?? this.chainLevel;\n    this.start = params.start;\n    this.stop = params.stop;\n    this.backboneStart = params.backboneStart ?? this.backboneStart;\n    this.backboneStop = params.backboneStop ?? this.backboneStop;\n    this.orientation = params.orientation ?? this.orientation;\n    this.gaps = params.gaps ?? this.gaps;\n    this.genes = params.genes ?? this.genes;\n  }\n\n\n  /**\n   * FIXME: Add unit tests for\n   *   1) ensuring duplicate Gaps aren't added\n   *   2) ensuring duplicate Gaps aren't added\n   *   3) ensuring Gap order is correct\n   *   4) Gaps added adjust downstream Gene backbone positions\n   *   5) ensuring Genes don't extend beyond the start/stop of a Block\n   *   6) ensuring Genes are in sorted order\n   */\n\n  /**\n   * Helper function to ensure gaps are added in descending start order.\n   * TODO: Adjust downstream gene \"backbone\" positions based on the increase in block length.\n   // NOTE: insertion sort here would be ideal, instead of this implementation\n   */\n  addGaps(newgaps: SyntenyComponent[], visibleBackboneStart: number, visibleBackboneStop: number): void\n  {\n    const origLen = this.gaps.length;\n\n    // TODO TEST: If we sort the list from the API here, could we be more efficient in our insertion?\n\n    //\n    // Find all gaps that are new information\n    // NOTE: Avoiding callback based forEach here for performance reasons\n    for (let idx = 0, len = newgaps.length; idx < len; idx++)\n    {\n      // TODO TEST: Only add gaps that are going to be visible anyway\n      if (newgaps[idx].backboneStart > visibleBackboneStop || newgaps[idx].backboneStop < visibleBackboneStart)\n        continue;\n      // end TEST\n\n      // Unless this gap is already represented, add it (ignoring backbone positioning)\n      // NOTE: sorted gaps allow us to quickly short-circuit this search, assuming the\n      //   API didn't send any duplicates\n      let duplicate = false, added = false;\n      for (let idx2 = 0, len2 = this.gaps.length; idx2 < len2; idx2++)\n      {\n        if (this.gaps[idx2].start === newgaps[idx].start && this.gaps[idx2].stop === newgaps[idx].stop)\n        {\n          // We found a duplicate gap (identical start/stop)\n          duplicate = true;\n          break;\n        }\n        else if (this.gaps[idx2].start > newgaps[idx].start)\n        {\n          // We went past all the gaps upstream of \"newgap[idx]\" w/o finding a duplicate\n          // So it must be new: add it\n          added = true;\n          this.gaps.push(new Gap({\n            start: newgaps[idx].start,\n            stop: newgaps[idx].stop,\n            backboneStart: newgaps[idx].backboneStart,\n            backboneStop: newgaps[idx].backboneStop,\n            chainLevel: newgaps[idx].chainLevel,\n          }));\n          break;\n        }\n      }\n\n      // If we didn't find a dup, or add it -- must be a new last gap: add it now\n      if (!duplicate && !added)\n      {\n        this.gaps.push(new Gap({\n          start: newgaps[idx].start,\n          stop: newgaps[idx].stop,\n          backboneStart: newgaps[idx].backboneStart,\n          backboneStop: newgaps[idx].backboneStop,\n          chainLevel: newgaps[idx].chainLevel,\n        }));\n      }\n    }\n\n    // Only perform the expensive sort if we added something\n    if (origLen < this.gaps.length)\n    {\n      // Sort smaller gaps earlier, otherwise just\n      this.gaps.sort((a, b) => {\n        const compared = a.start - b.start;\n        return (compared == 0) ? (a.stop - b.stop) : (compared);\n      });\n    }\n  }\n\n  // Helper function to convert orientation to boolen if the block is inverted\n  isBlockInverted()\n  {\n    return this.orientation === '-';\n  }\n}\n","import httpInstance from '@/api/httpInstance';\nimport Chromosome from '@/models/Chromosome';\nimport Species from '@/models/Species';\nimport Gene from '@/models/Gene';\nimport { AxiosResponse } from 'axios';\nimport logger from '@/logger';\n\nexport interface SyntenyRequestParams\n{\n  backboneChromosome: Chromosome; \n  start: number; \n  stop: number;\n  comparativeSpecies: Species[];\n  optional: {\n    threshold?: number;\n    includeGenes?: boolean;\n    includeOrthologs?: boolean;\n    thresholdStart?: number;\n    thresholdEnd?: number;\n  };\n}\n\n/**\n * Expected gene model returned from the RGD Rest API to represent a gene in a syntenic region. Will be converted to our own Gene model.\n */\ninterface SyntenyGeneDTO\n{\n  geneRgdId: number;\n  geneSymbol: string;\n  geneName: string;\n  geneType: string;\n  mapKey: number;\n  chr: string;\n  startPos: number;\n  stopPos: number;\n  strand: '+' | '-';\n  orthologs: number[] | null;\n}\n\n/**\n * Expected model returned from the RGD Rest API to represent a single syntenic region and its genes\n */\ninterface SyntenyResponseDTO\n{\n  genes?: SyntenyGeneDTO[],\n  gaps?: SyntenyComponent[],\n  block: SyntenyComponent,\n}\n\n/**\n * Block or gap \n */\nexport interface SyntenyComponent\n{\n  backboneMapKey: number;\n  backboneChromosome: string;\n  backboneStart: number;\n  backboneStop: number;\n  mapKey: number;\n  chromosome: string;\n  start: number;\n  stop: number;\n  orientation: '+' | '-';\n  chainLevel: number;\n  chainType: 'top' | 'nonSyn' | 'gap';\n}\n\n/**\n * Represents the combination of blocks, gaps, and genes in a synteny region\n */\nexport interface SyntenyRegionData\n{\n  block: SyntenyComponent;\n  gaps: SyntenyComponent[];\n  genes: Gene[];\n}\n\n/**\n * Intermediate interface to hold data from the Synteny Response and associate it with its comparative species\n */\nexport interface SpeciesSyntenyData\n{\n  speciesName: string;\n  mapName: string;\n  mapKey: number;\n  regionData: SyntenyRegionData[];\n}\n\nfunction getGeneFromDTO(dto: SyntenyGeneDTO, speciesName: string)\n{\n  return new Gene({\n    mapKey: dto.mapKey,\n    speciesName: speciesName,\n    symbol: dto.geneSymbol,\n    name: dto.geneName,\n    rgdId: dto.geneRgdId,\n    chromosome: dto.chr,\n    start: dto.startPos,\n    stop: dto.stopPos,\n    orthologs: dto.orthologs ?? [],\n  });\n}\n\nfunction getSpeciesSyntenyDataFromDTO(dtoArray: SyntenyResponseDTO[], comparativeSpecies: Species)\n{\n  const regions: SyntenyRegionData[] = [];\n  dtoArray.forEach(dto => {\n    const genes: Gene[] = [];\n    dto.genes?.forEach((geneDTO: any) => {\n      genes.push(getGeneFromDTO(geneDTO, comparativeSpecies.name));\n    });\n\n    regions.push({\n      block: dto.block,\n      gaps: dto.gaps ?? [],\n      genes: genes ?? [],\n    });\n  });\n\n  const genesPerRegion = regions.length > 0 ? regions.map(r => r.genes) : [];\n\n  return {\n    speciesName: comparativeSpecies.name,\n    mapName: comparativeSpecies.activeMap.name,\n    mapKey: comparativeSpecies.activeMap.key,\n    regionData: regions,\n    allGenes: genesPerRegion.length > 0 ? genesPerRegion.reduce((prevGenes, currentGenes) => prevGenes.concat(currentGenes)) : [],\n  };\n}\n\nexport default class SyntenyApi\n{\n  static async getSyntenicRegions(params: SyntenyRequestParams)\n  {\n    const start = Date.now();\n    try\n    {\n      const syntenyApiCalls: Promise<AxiosResponse<SyntenyResponseDTO[], any>>[] = [];\n      const comparativeSpeciesMaps = params.comparativeSpecies.map(s => s.activeMap);\n      const roundedStart = Math.round(params.start);\n      const roundedStop = Math.round(params.stop);\n      comparativeSpeciesMaps.forEach(map => {\n        let apiRoute = `/vcmap/synteny/${params.backboneChromosome?.mapKey}/${params.backboneChromosome?.chromosome}/${roundedStart}/${roundedStop}/${map.key}`;\n\n        // Append query params\n        let optionCount = 0;\n        if (Object.keys(params.optional).length > 0)\n        {\n          apiRoute += `?`;\n          if (params.optional.threshold != null && params.optional.threshold > 0)\n          {\n            apiRoute += `threshold=${params.optional.threshold}`;\n            optionCount++;\n          }\n\n          if (params.optional.includeGenes)\n          {\n            apiRoute += (optionCount > 0) ? `&includeGenes=1` : `includeGenes=1`;\n            optionCount++;\n          }\n\n          if (params.optional.thresholdStart)\n          {\n            apiRoute += (optionCount > 0) ? `&thresholdStart=${params.optional.thresholdStart}` : `thresholdStart=${params.optional.thresholdStart}`;\n            optionCount++;\n          }\n\n          if (params.optional.thresholdEnd)\n          {\n            apiRoute += (optionCount > 0) ? `&thresholdEnd=${params.optional.thresholdEnd}` : `thresholdEnd=${params.optional.thresholdEnd}`;\n            optionCount++;\n          }\n\n          if (params.optional.includeOrthologs)\n          {\n            apiRoute += (optionCount > 0) ? `&includeOrthologs=1` : `includeOrthologs=1`;\n            optionCount++;\n          }\n        }\n\n        syntenyApiCalls.push(httpInstance.get(apiRoute));\n      });\n\n      const syntenyResults = await Promise.allSettled(syntenyApiCalls);\n      const speciesSyntenyData: SpeciesSyntenyData[] = [];\n      syntenyResults.forEach((result, index) => {\n        if (result.status === 'fulfilled')\n        {\n          const singleSpeciesSyntenyData = getSpeciesSyntenyDataFromDTO(result.value.data, params.comparativeSpecies[index]);\n          logger.debug(`Syntenic regions found: ${singleSpeciesSyntenyData.regionData.length} ` +\n            `[mapKey: '${singleSpeciesSyntenyData.mapKey}', threshold: '${params.optional.threshold}']`);\n          speciesSyntenyData.push(singleSpeciesSyntenyData);\n        }\n        else\n        {\n          logger.error(result.status, result.reason);\n        }\n      });\n      logger.debug(`Synteny API: ${Date.now() - start} ms`,\n          params.backboneChromosome.chromosome, params.start, params.stop, params.optional.threshold);\n      // logger.debug(`Synteny API: ${Date.now() - start} ms`, params);\n\n      return speciesSyntenyData;\n    }\n    catch (error)\n    {\n      logger.error(error);\n    }\n  }\n}\n\n\n\n\n","/**\n *  Custom Error Messages for VCMap \n */\n\nexport const backboneOverviewError = new Error('Cannot render the overview panel without valid species, chromosome, and start/stop for the backbone');\n\nexport const backboneDetailedError = new Error('Cannot render the detailed panel without valid species and chromosome for the backbone');\n\nexport const noRegionLengthError = new Error('Region length must be greater than zero');\n\nexport const missingComparativeSpeciesError = new Error('Cannot load synteny without any comparative species maps selected');\n\nexport const selectionError = new Error('An error occurred while making a selection');\n\nexport const noSyntenyFoundError = new Error('No syntenic regions were found for the selected species and base pair range.');","import { defineComponent as _defineComponent } from 'vue'\nimport { createVNode as _createVNode, unref as _unref, createElementVNode as _createElementVNode, isRef as _isRef, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = { class: \"grid\" }\nconst _hoisted_2 = { class: \"col-9\" }\nconst _hoisted_3 = { class: \"col-3\" }\n\nimport SVGViewbox from '@/components/SVGViewbox.vue';\nimport HeaderPanel from '@/components/HeaderPanel.vue';\nimport SelectedDataPanel from '@/components/SelectedDataPanel.vue';\nimport { useStore } from 'vuex';\nimport { key } from '@/store';\nimport { onMounted, ref, watch } from 'vue';\nimport Toast from 'primevue/toast';\nimport { useToast } from 'primevue/usetoast';\nimport Gene from \"@/models/Gene\";\nimport Block from \"@/models/Block\";\nimport SyntenyApi, {SpeciesSyntenyData} from \"@/api/SyntenyApi\";\nimport Chromosome from \"@/models/Chromosome\";\nimport GeneApi from \"@/api/GeneApi\";\nimport {useLogger} from \"vue-logger-plugin\";\nimport BackboneSelection from \"@/models/BackboneSelection\";\nimport VCMapDialog from '@/components/VCMapDialog.vue';\nimport useDialog from '@/composables/useDialog';\nimport { adjustSelectionWindow, getNewSelectedData } from '@/utils/DataPanelHelpers';\nimport { backboneOverviewError, missingComparativeSpeciesError, noRegionLengthError, noSyntenyFoundError } from '@/utils/VCMapErrors';\nimport { isGenomicDataInViewport, getThreshold, processAlignmentsOfGeneInsideOfViewport, processAlignmentsOfGeneOutsideOfViewport } from '@/utils/Shared';\nimport { buildVariantPositions } from '@/utils/VariantBuilder';\nimport VariantPositions from '@/models/VariantPositions';\nimport { VCMapLogger } from '@/logger';\n\n// TODO: Can we figure out a better way to handle blocks with a high chainlevel?\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'Main',\n  setup(__props) {\n\nconst MAX_CHAINLEVEL = 2;\nconst MAX_CHAINLEVEL_GENES = 1;\n\nconst store = useStore(key);\nconst $log = useLogger() as VCMapLogger;\nconst toast = useToast();\n\nconst { showDialog, dialogHeader, dialogMessage, showDialogBackButton, dialogTheme, onError } = useDialog();\n\nconst isLoading = ref(false);\nconst proceedAfterError = ref(false);\n\n// Our synteny tree keyed by MapId\n// TODO: Consider adding a map for mapKey -> Species\n// TODO: Where to keep the backbone? Always index == 0?? (confusing)\n// TODO: Combined with above, we could create a structure that has these properties\nconst syntenyTree = ref(new Map<number, Block[]>());\n\n\n// Our gene list keyed by rgdId\n// TODO: Need to prefix this list with species to ensure no collisions across different assemblies\nconst geneList = ref(new Map<number, Gene>());\n// NOTE: Switch to a shallow ref to see the genelist size get out of sync on the child components\n//   despite the inspect button showing the correct Map in the console. This is the classic loss\n//   of reactivity, which we should be okay with since this data will only be used internally\n//   (never for on screen objects that need to stay in sync with this data). Those objects that\n//   need to stay in sync with the data will mostly be created / removed / updated immediately\n//   following a change in viewport position (which we will be reactive to, using the store).\n//   They will need to know about these objects in main -- but this will already be updated\n//   because we will process all of this data AFTER every API call, but BEFORE a viewport change\n//   is committed to the store.\n//\n//   In theory, we could use triggerRef when we are ready too, but I cannot seem to get that to\n//   work the way I expect (only updates the template for Main, not SelectedDataPanel)\n// const geneList = shallowRef(new Map<number, Gene>());\n\n// Our list of variantPositions that have been loaded/generated\nconst variantPositionsList = ref<VariantPositions[]>([]);\n\n// TODO TEMP\n// TODO: temp ignore here, should remove once this method is actively being used\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nconst onInspectPressed = () => {\n  $log.debug('Gene List:', geneList);\n  $log.debug('Synteny Tree:', syntenyTree);\n  // NOTE: I cannot seem to get this to force child updates when using a shallowRef???\n  //triggerRef(geneList);\n\n  $log.debug('Selected Data:', store.state.selectedData);\n\n  // Specific analysis (Mcur1): Compare selectedData after commit to data from this.geneList\n  // SelectedData[]\n  // store.state.selectedData?.forEach((selectedData) => {\n  //   let gene = (selectedData.genomicSection as Gene);\n  //   $log.log('Gene data (selectedData):', gene.symbol, gene.rgdId, gene.chromosome, gene.block);\n  // });\n  //\n  // // this.geneList\n  // geneList.value.forEach((gene) => {\n  //   if (gene.symbol == 'Mcur1')\n  //     $log.log('Gene data (geneList):', gene.symbol, gene.rgdId, gene.chromosome, gene.block);\n  // });\n};\n// TODO endTEMP\n\n/**\n * Main watches this hook for the appropriate time to query the API and construct our\n * memory models representing the Comparative Map Configuration. If Main is getting\n * mounted, it is safe to clear out our old data structures\n * (Lifecycle hook)\n */\nonMounted(initVCMapProcessing);\n\n/**\n * Watch for requested navigation operations (zoom in/out, navigate up/down stream).\n */\nwatch(() => store.state.detailedBasePairRequest, async () => {\n  isLoading.value = true;\n  // Grab blocks and genes with using a threshold of approximately .25 of a pixel\n  if (store.state.detailedBasePairRequest && store.state.chromosome && store.state.species)\n  {\n    $log.debug(`Detailed Base Pair range change request detected (${store.state.detailedBasePairRequest?.start},\n       ${store.state.detailedBasePairRequest?.stop}).`);\n\n    await queryAndProcessSyntenyForBasePairRange(store.state.chromosome, store.state.detailedBasePairRequest.start, store.state.detailedBasePairRequest.stop);\n\n    triggerDetailedPanelProcessing(store.state.chromosome, store.state.detailedBasePairRequest.start, store.state.detailedBasePairRequest.stop);\n    // Data processing done, ready to complete request\n    store.dispatch('setDetailedBasePairRequest', null);\n  }\n  else if (store.state.chromosome == null || store.state.species == null)\n  {\n    $log.error(`DetailedBasePairRequest: Missing data required for querying and processing synteny`, store.state.chromosome, store.state.species);\n  }\n  isLoading.value = false;\n});\n\n/**\n * Start all processing based on the user's configuration.\n * \n * + Query for synteny and genes\n * + Create memory models for our comparative maps\n * + Handle any errors that may come up\n * + Trigger the conversion of our memory models into their renderable representations (handled by SVGViewbox.vue)\n */\nasync function initVCMapProcessing()\n{\n  isLoading.value = true;\n\n  $log.debug('Creating memory models for our Comparative Map view');\n  store.dispatch('setConfigurationLoaded', false);\n\n  // Clear out old structures\n  // TODO: Ensure circular references are not going to cause memory leaks\n  syntenyTree.value = new Map();\n  geneList.value = new Map();\n\n  // Check for required data\n  if (checkForConfigurationErrors())\n  {\n    isLoading.value = false;\n    return;\n  }\n\n  if (!store.state.chromosome || !store.state.species)\n  {\n    // Shouldn't get to this point since these values are checked in `checkForConfigurationErrors()`, just checking for null here to satisfy the type checking\n    isLoading.value = false;\n    return;\n  }\n\n  // Query the Genes API\n\n  const slowAPI = setTimeout(() => {\n    showToast('warn', 'Loading Impact', 'API is taking a while to respond, please be patient', 5000);\n  }, 15000);\n\n  let comparativeSpeciesIds: number[] = [];\n  store.state.comparativeSpecies.map(species => comparativeSpeciesIds.push(species.defaultMapKey));\n  const backboneGenes: Gene[] = await GeneApi.getGenesByRegion(\n      store.state.chromosome.chromosome,\n      0, store.state.chromosome.seqLength,\n      store.state.species.activeMap.key, store.state.species.name,\n      comparativeSpeciesIds);\n\n  // Process response\n  // TODO: Should we add a \"Block\" for the backbone first?\n  backboneGenes.forEach((geneData) => {\n    geneList.value.set(geneData.rgdId, geneData);\n  });\n\n  // Preload off-backbone large blocks and genes\n  let threshold = getThreshold(store.state.chromosome.seqLength);\n  const speciesSyntenyDataArray = await SyntenyApi.getSyntenicRegions({\n    backboneChromosome: store.state.chromosome,\n    start: 0,\n    stop: store.state.chromosome.seqLength,\n    optional: {\n      includeGenes: true,\n      includeOrthologs: true,\n      threshold: threshold,\n    },\n    comparativeSpecies: store.state.comparativeSpecies,\n  });\n\n  if (speciesSyntenyDataArray == undefined)\n  {\n    $log.error('SpeciesSyntenyDataArray is undefined after querying for syntenic regions');\n    isLoading.value = false;\n    clearTimeout(slowAPI);\n    return;\n  }\n\n  if (!proceedAfterError.value && someSyntenyResultsAreMissing(speciesSyntenyDataArray))\n  {\n    isLoading.value = false;\n    clearTimeout(slowAPI);\n    return;\n  }\n\n  clearTimeout(slowAPI);\n  \n  //TODO: Add message for variant impact on processing time\n  const slowProcessing = setTimeout(() => {\n    let message = '';\n    if (store.state.comparativeSpecies.length > 2)\n      message = 'Currently processing data, please be patient. Longer times may be due to the large number of species in the selected region';\n    else\n      message = 'Currently processing data, please be patient. Longer times may be due due to the large number of genes in the selected region';\n\n    showToast('warn', 'Loading Impact', message, 5000);\n  }, 3000);\n\n  processSynteny(speciesSyntenyDataArray, 0, store.state.chromosome.seqLength);\n\n  //\n  // Adjust the selected start and stop based on our configuration mode (load by gene vs load by position)\n  let selectionStart = 0;\n  let selectionStop = store.state.chromosome.seqLength;\n  if (store.getters.isLoadByGene && store.state.gene != null)\n  {\n    // Load By Gene\n    const loadedGene = store.state.gene;\n    const newWindow = adjustSelectionWindow(loadedGene, geneList.value, store);\n\n    selectionStart = newWindow.start;\n    selectionStop = newWindow.stop;\n\n    // Auto-select the gene and its orthologs\n    const { rgdIds, selectedData } = getNewSelectedData(store, loadedGene, geneList.value);\n    $log.debug(`Auto-selecting genes for Load by Gene`, rgdIds);\n    store.dispatch('setSelectedGeneIds', rgdIds);\n    store.dispatch('setSelectedData', selectedData);\n  }\n  else if (store.getters.isLoadByPosition && store.state.startPos != null && store.state.stopPos != null)\n  {\n    //\n    // Load By Position\n    selectionStart = Math.max(0, store.state.startPos);\n    selectionStop = Math.min(store.state.stopPos, store.state.chromosome.seqLength);\n  }\n\n  // If the selection range is different than the entire chromosome, re-query for the detailed panel\n  if (selectionStart !== 0 || selectionStop !== store.state.chromosome.seqLength)\n  {\n    // Query synteny at threshold determined by selected base pair range (for detailed panel)\n    await queryAndProcessSyntenyForBasePairRange(store.state.chromosome, selectionStart, selectionStop);\n  }\n\n  // Kick off the OverviewPanel load\n  store.dispatch('setConfigurationLoaded', true);\n  // Kick off DetailedPanel load\n  triggerDetailedPanelProcessing(store.state.chromosome, selectionStart, selectionStop);\n\n  clearTimeout(slowProcessing);\n  isLoading.value = false;\n}\n\n/**\n * Process a synteny block response (with genes, gaps) from the API.\n * TODO: We might need to control the number of chainLevel >= 2 we add, these are excessive...\n */\nfunction processSynteny(speciesSyntenyDataArray : SpeciesSyntenyData[] | undefined, backboneStart: number, backboneStop: number)\n{\n  // Make sure we have something to do\n  if (!speciesSyntenyDataArray)\n  {\n    $log.debug('Process Synteny called without an array of SpeciesSyntenyData (check API response)');\n    return;\n  }\n  if (!store.state.chromosome)\n  {\n    $log.error('Process Synteny called without a Chromosome on the state');\n    return;\n  }\n\n  let tree: Map<number, Block[]> = syntenyTree.value;\n  let backboneChr = store.state.chromosome; // TODO: This is proxied, not sure why? Also not sure it matters...\n  $log.debug(`Processing ${speciesSyntenyDataArray.length} species of Synteny Data...`);\n\n  //\n  // For each off-backbone species in our response, loop the region data\n  // NOTE: DO NOT use .forEach() loops in this processing. The size of the speciesSyntenyDataArray\n  //   is significant and should not be subject to code that potentially might clone data or create\n  //   extra structures.\n  for (let speciesIdx = 0; speciesIdx < speciesSyntenyDataArray.length; speciesIdx++) {\n    // Check if we need to create a new structure for this mapKey (species)\n    if (!tree.has(speciesSyntenyDataArray[speciesIdx].mapKey)) tree.set(speciesSyntenyDataArray[speciesIdx].mapKey, []);\n    let knownSpeciesBlocks = tree.get(speciesSyntenyDataArray[speciesIdx].mapKey) ?? [];\n\n    // For each region (block), compare to *all* our existing structures\n    // NOTE: If we can afford to do it, might make sense to change our SyntenyApi to build\n    //   our block structure, so we can more quickly identify new data and add to our tree.\n    $log.debug(`  Processing ${speciesSyntenyDataArray[speciesIdx].regionData.length} blocks of Synteny Data...`);\n    for (let blockIdx = 0, len = speciesSyntenyDataArray[speciesIdx].regionData.length; blockIdx < len; blockIdx++) {\n      const blockData = speciesSyntenyDataArray[speciesIdx].regionData[blockIdx];\n      $log.debug(`  Processing block with ${blockData.gaps.length} gaps, and ${blockData.genes.length} genes...`);\n      // NOTE: We cannot process everything...\n      //   Skip any blocks with chainLevel > MAX_CHAINLEVEL, and any\n      //   blocks outside the range [backboneStart, backboneStop].\n      if (blockData.block.chainLevel > MAX_CHAINLEVEL) continue;\n      // TODO: See if we can get Marek to just not even send these!\n      if (blockData.block.backboneStart > backboneStop || blockData.block.backboneStop < backboneStart) continue;\n\n      let targetBlock: Block | null = null;\n\n      let blockSearch = knownSpeciesBlocks.filter((b) => {\n        // NOTE: we consider two blocks the same if the \"chainLevel\", \"backboneStart\", and \"backboneStop\" are identical\n        //   There are potentially situations where start & stop are identical but this duplicated off-backbone\n        //   syntenic region appears in multiple different places on the same backbone.\n        // TODO: In these cases we need to handle our gene references differently (by grabbing from\n        //  our existing dataset instead of using the new objects from the SyntenyApi)\n        return (b.chainLevel == blockData.block.chainLevel &&\n            b.backboneStart == blockData.block.backboneStart && b.backboneStop == blockData.block.backboneStop);\n      });\n\n      let existingBlockGapCountChanged = false;\n      if (blockSearch.length == 0)\n      {\n        // Create a newly discovered block\n        $log.debug(`Found new Synteny block for ${speciesSyntenyDataArray[speciesIdx].speciesName} (chr ${blockData.block.chromosome})`);\n        let newBlock = new Block({\n          backbone: backboneChr,\n          chromosome: new Chromosome({mapKey: blockData.block.mapKey, chromosome: blockData.block.chromosome}),\n          chainLevel: blockData.block.chainLevel,\n          orientation: blockData.block.orientation,\n          backboneStart: blockData.block.backboneStart,\n          backboneStop: blockData.block.backboneStop,\n          start: blockData.block.start,\n          stop: blockData.block.stop,\n        });\n\n        $log.time(\"AddGapsNewBlock\");\n        // Gaps (add ALL)\n        newBlock.addGaps(blockData.gaps, backboneStart, backboneStop);\n        $log.timeEnd(\"AddGapsNewBlock\");\n\n        knownSpeciesBlocks.push(newBlock);\n        targetBlock = newBlock;\n      }\n      else if (blockSearch.length == 1)\n      {\n        // Use an existing block\n        // Keep the reference to this block from our tree\n        targetBlock = blockSearch[0];\n        existingBlockGapCountChanged = (targetBlock.gaps.length !== blockData.gaps.length);\n\n        const timerLabel = `AddGapsExistingBlock(${targetBlock.gaps.length}, ${blockData.gaps.length})`;\n        $log.time(timerLabel);\n        targetBlock?.addGaps(blockData.gaps, backboneStart, backboneStop);\n        $log.timeEnd(timerLabel);\n      }\n      else\n      {\n        // Shouldn't ever happen (TODO: warn the user)\n        $log.error('OH NO! Discovered duplicate blocks in our tree!');\n      }\n\n      if (blockData.block.chainLevel > MAX_CHAINLEVEL_GENES)\n      {\n        // Skip saving any genes that are above our defined max chainlevel for genes\n        $log.log(`Skipping ${blockData.genes.length} genes due to chain level filter`);\n        continue;\n      }\n\n      // Handle genes (we need to inspect all of them even in the case of a new block)\n      $log.time(`ProcessGenesForBlock`);\n      for (let geneIdx = 0, numGenes = blockData.genes.length; geneIdx < numGenes; geneIdx++) {\n        // Use any existing genes if we have already loaded one\n        const geneData = blockData.genes[geneIdx];\n        let gene = geneList.value.get(geneData.rgdId) ?? geneData;\n        // NOTE: It is possible for a gene from a new block to exist on another block\n        //   This situation comes up often when there are small blocks that a representing\n        //   a region of a chromosome that is already part of a larger block we have loaded.\n        //   In that case, we consider want to consider the larger block the \"primary\" block.\n        // TODO: This code is assuming the largest block is loaded first, but that is not\n        //   going to always be the case. However, it should work for most situations and\n        //   is a reasonable initial implementation.\n        if (gene.block === null && targetBlock)\n        {\n          // New gene\n          // TODO: Not the best conditional here. A very large targetBlock that is just barely inside\n          //  the viewport will return \"true\" and cause us to do some more intensive processing on gene\n          //  positions than perhaps we should. See if we can get a bit more precise here...\n          const backboneAlignment = isGenomicDataInViewport(targetBlock, backboneStart, backboneStop)\n            ? processAlignmentsOfGeneInsideOfViewport(gene.start, gene.stop, targetBlock)\n            : processAlignmentsOfGeneOutsideOfViewport(gene.start, gene.stop, targetBlock);\n\n          gene.backboneStart = backboneAlignment.start;\n          gene.backboneStop = backboneAlignment.stop;\n\n          // This gene has no parent block -- assign to target block\n          // $log.log(`Gene ${gene.symbol} without parent block, assigning to block ${targetBlock.chromosome.chromosome} (${targetBlock.start}, ${targetBlock.stop})`);\n          gene.block = targetBlock;\n          // TODO: sort OR use addGene() approach here?\n          targetBlock.genes.push(gene);\n        }\n        else if (gene.block && targetBlock && existingBlockGapCountChanged \n          && isGenomicDataInViewport(targetBlock, backboneStart, backboneStop)) // TODO: See above TODO referring to this conditional\n        {\n          // Existing gene that is in view and the gap count changed\n          const backboneAlignemt = processAlignmentsOfGeneInsideOfViewport(gene.start, gene.stop, targetBlock);\n          gene.backboneStart = backboneAlignemt.start;\n          gene.backboneStop = backboneAlignemt.stop;\n        }\n\n        // Add any new genes to our geneList (cross-referencing our Blocks)\n        // TODO: sort OR use addGene() approach here?\n        if (gene && !geneList.value.get(gene.rgdId)) geneList.value.set(gene.rgdId, gene);\n      }\n      $log.timeEnd(`ProcessGenesForBlock`);\n    }\n  }\n}\n\nasync function queryAndProcessSyntenyForBasePairRange(backboneChromosome: Chromosome, start: number, stop: number)\n{\n  $log.debug(`Querying for specific base pair range: ${start} - ${stop}`);\n  const slowAPI = setTimeout(() => {\n    $log.log('API is taking longer than usual to respond...');\n    showToast('warn', 'Loading Impact', 'API is taking a while to respond, please be patient', 5000);\n  }, 15000);\n\n  let threshold = getThreshold(stop - start);\n  const speciesSyntenyDataArray = await SyntenyApi.getSyntenicRegions({\n    backboneChromosome: backboneChromosome,\n    start: start,\n    stop: stop,\n    optional: {\n      includeGenes: true,\n      includeOrthologs: true,\n      threshold: threshold,\n    },\n    comparativeSpecies: store.state.comparativeSpecies,\n  });\n\n  clearTimeout(slowAPI);\n\n  // Process response\n  processSynteny(speciesSyntenyDataArray, start, stop);\n\n  // If any variant data has been loaded, check for new blocks after syntenyTree has been updated\n  const syntenyTreeKeys = syntenyTree.value.keys();\n  for (let key of syntenyTreeKeys)\n  {\n    const speciesData = syntenyTree.value.get(key);\n    if (speciesData && speciesData.some((block) => block.variantPositions))\n    {\n      // Don't trigger an update when requerying synteny, because variant tracks will get built anyway\n      loadSyntenyVariants([key], false /* don't trigger update */);\n    }\n  }\n}\n\nfunction triggerDetailedPanelProcessing(backboneChromosome: Chromosome, selectionStart: number, selectionStop: number)\n{\n  let selection = store.state.selectedBackboneRegion;\n\n  // This object does not retain its functions if we are getting it off of local storage (e.g. after refreshing the page) due to it being saved as a plain object\n  // We need to recreate the BackboneSelection object so that we can call `setViewportSelection()` on it later...\n  selection = new BackboneSelection(backboneChromosome);\n\n  selection.setViewportSelection(selectionStart, selectionStop);\n  // Trigger the detailed panel to begin its processing\n  store.dispatch('setBackboneSelection', selection);\n}\n\n/**\n * Checks for possible configuration errors and shows a dialog if found.\n * TODO: Make this a bit more robust so that if multiple errors are found, we can show them all\n * \n * @returns {boolean} true if errors are detected\n */\nfunction checkForConfigurationErrors()\n{\n  // Error if backbone chromosome or species is not specified\n  if (store.state.chromosome == null || store.state.species == null)\n  {\n    onError(backboneOverviewError, backboneOverviewError.message, false);\n    return true;\n  }\n\n  // Error if backbone info is invalid length while loading by position\n  if (store.getters.isLoadByPosition && (store.state.startPos == null || store.state.stopPos == null || (store.state.stopPos - store.state.startPos) <= 0))\n  {\n    onError(noRegionLengthError, noRegionLengthError.message, false);\n    return true;\n  }\n\n  // Error if no comparative species\n  if (store.state.comparativeSpecies.length === 0)\n  {\n    onError(missingComparativeSpeciesError, missingComparativeSpeciesError.message, false);\n    return true;\n  }\n\n  return false;\n}\n\nfunction showNoResultsDialog()\n{\n  onError(noSyntenyFoundError, noSyntenyFoundError.message, true, 'No Results');\n}\n\nfunction showPartialResultsDialog(speciesWithMissingSynteny: SpeciesSyntenyData[])\n{\n  const errMessage = `We did not find syntenic regions for the following species: ${speciesWithMissingSynteny.map(s => `${s.speciesName} (${s.mapName})`).join(', ')}`;\n  onError(new Error(errMessage), errMessage, true, 'Missing Results');\n}\n\n/**\n * Checks if synteny was found for all off-backbone species/maps\n * \n * @param speciesSyntenyDataArray\n *   Data returned from Synteny API call\n *   \n * @returns\n *   true if some synteny results are missing (error), false if synteny was returned for all species\n */\nfunction someSyntenyResultsAreMissing(speciesSyntenyDataArray: SpeciesSyntenyData[]): boolean\n{\n  const resultsFound = speciesSyntenyDataArray.some(syntenyData => syntenyData.regionData.length > 0);\n  if (!resultsFound)\n  {\n    showNoResultsDialog();\n    return true;\n  }\n  else if (speciesSyntenyDataArray.some(syntenyData => syntenyData.regionData.length === 0))\n  {\n    // If only some results were found -- notify user about which ones produced no results\n    const speciesWithMissingSyntenyData = speciesSyntenyDataArray.filter(syntenyData => syntenyData.regionData.length === 0);\n    showPartialResultsDialog(speciesWithMissingSyntenyData);\n    return true;\n  }\n\n  return false;\n}\n\nfunction onProceedWithErrors()\n{\n  proceedAfterError.value = true;\n  initVCMapProcessing();\n}\n\nfunction showToast(severity: string, title: string, details: string, duration: number)\n{\n  toast.add({severity: severity, summary: title, detail: details, life: duration });\n}\n\nasync function loadBackboneVariants() {\n  isLoading.value = true;\n  const chromosome = store.state.chromosome;\n  const backboneSpecies = store.state.species;\n  const backboneRegion = store.state.selectedBackboneRegion;\n  const stop = backboneRegion?.viewportSelection?.basePairStop;\n  const speciesMap = store.state.species?.activeMap;\n  if (chromosome && stop && speciesMap && backboneSpecies)\n  {\n    // Check if this variantPosition set has been loaded\n    const matchIdx = variantPositionsList.value.findIndex((positions) => (\n      positions.mapKey === speciesMap.key && positions.blockStart === 0 && positions.blockStop === chromosome.seqLength\n    ));\n    if (matchIdx === -1)\n    {\n      const variantPositions = await buildVariantPositions(\n        chromosome.chromosome,\n        0,\n        chromosome.seqLength,\n        0,\n        chromosome.seqLength,\n        speciesMap.key\n      );\n      if (variantPositions.positions.length > 0)\n      {\n        variantPositionsList.value.push(variantPositions);\n      }\n      else\n      {\n        showToast('warn', 'No Variants Found', 'There were no variants found for the given chromosome', 5000);\n      }\n    }\n  }\n  // isLoading.value = false;\n}\n\nasync function loadSyntenyVariants(mapKeys: number[] | null, triggerUpdate: boolean) {\n  if (!mapKeys) return;\n  // Ensure isUpdatingVariants is false\n  store.dispatch('setIsUpdatingVariants', false);\n  isLoading.value = true;\n  let loadingBackbone = false;\n  let foundSomeVariants = false;\n  let variantPromises: Promise<void>[] = [];\n  variantPromises.push(...mapKeys.map( async (mapKey) => {\n    if (mapKey === store.state.chromosome?.mapKey) {\n      loadingBackbone = true;\n      await loadBackboneVariants();\n      return;\n    } else {\n      let currentBlockSet = syntenyTree.value.get(mapKey);\n      if (currentBlockSet) {\n        const promises = currentBlockSet.map( async (block) => {\n          // If this block already has positions loaded, don't load again\n          if (block.variantPositions)\n          {\n            foundSomeVariants = true; // some variants exist so we don't need to warn the user\n            return;\n          }\n          else if (block.chainLevel === 1)\n          {\n            const variantRes = await buildVariantPositions(\n              block.chromosome.chromosome,\n              block.start,\n              block.stop,\n              block.backboneStart,\n              block.backboneStop,\n              block.chromosome.mapKey\n            );\n            if (variantRes)\n            {\n              if (!foundSomeVariants && variantRes.positions.length > 0)\n              {\n                foundSomeVariants = true;\n              }\n              block.variantPositions = variantRes;\n              // NOTE: adding to variantPositionList is how we tell SVGViewbox to update\n              // the backbone variants, but if we push the responses here SVGViewbox will\n              // update everytime a request completes\n              // So we need a better way to tell SVGViewbox to update\n              // variantPositionsList.value.push(variantRes);\n            }\n            return;\n          }\n        });\n        await Promise.allSettled(promises);\n        return;\n      }\n    }\n  }));\n  await Promise.allSettled(variantPromises);\n  isLoading.value = false;\n  if (!foundSomeVariants && !loadingBackbone)\n  {\n    showToast('warn', 'No Variants Found', 'There were no variants found for the given regions.', 5000);\n  }\n  if (triggerUpdate)\n  {\n    store.dispatch('setIsUpdatingVariants', true);\n  }\n}\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(_Fragment, null, [\n    _createVNode(HeaderPanel, { \"on-load-synteny-variants\": loadSyntenyVariants }),\n    _createElementVNode(\"div\", _hoisted_1, [\n      _createElementVNode(\"div\", _hoisted_2, [\n        _createVNode(SVGViewbox, {\n          geneList: geneList.value,\n          \"synteny-tree\": syntenyTree.value,\n          loading: isLoading.value,\n          \"variant-positions-list\": variantPositionsList.value\n        }, null, 8, [\"geneList\", \"synteny-tree\", \"loading\", \"variant-positions-list\"]),\n        _createVNode(_unref(Toast))\n      ]),\n      _createElementVNode(\"div\", _hoisted_3, [\n        _createVNode(SelectedDataPanel, {\n          \"selected-data\": _unref(store).state.selectedData,\n          \"gene-list\": geneList.value\n        }, null, 8, [\"selected-data\", \"gene-list\"])\n      ])\n    ]),\n    _createVNode(VCMapDialog, {\n      show: _unref(showDialog),\n      \"onUpdate:show\": _cache[0] || (_cache[0] = ($event: any) => (_isRef(showDialog) ? (showDialog).value = $event : null)),\n      header: _unref(dialogHeader),\n      message: _unref(dialogMessage),\n      theme: _unref(dialogTheme),\n      \"show-back-button\": _unref(showDialogBackButton),\n      \"on-confirm-callback\": onProceedWithErrors\n    }, null, 8, [\"show\", \"header\", \"message\", \"theme\", \"show-back-button\"])\n  ], 64))\n}\n}\n\n})","import script from \"./Main.vue?vue&type=script&lang=ts&setup=true\"\nexport * from \"./Main.vue?vue&type=script&lang=ts&setup=true\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { createRouter, createWebHistory, RouteRecordRaw } from 'vue-router';\nimport Main from '../views/Main.vue';\n\nconst routes: Array<RouteRecordRaw> = [\n  {\n    path: '/main',\n    name: 'Main',\n    component: Main\n  },\n  {\n    path: '/',\n    name: 'Configuration',\n    // route level code-splitting\n    // this generates a separate chunk (configuration.[hash].js) for this route\n    // which is lazy-loaded when the route is visited.\n    component: () => import(/* webpackChunkName: \"configuration\" */ '../views/Configuration.vue')\n  }\n];\n\nconst router = createRouter({\n  history: createWebHistory(process.env.BASE_URL),\n  routes\n});\n\nexport default router;\n","import { App, Component, Directive } from \"@vue/runtime-core\";\n\n// Import any components/directives that you want to globally register\nimport PrimeVue from 'primevue/config';\nimport ToastService from 'primevue/toastservice';\nimport Button from 'primevue/button';\nimport Dropdown from 'primevue/dropdown';\nimport InputNumber from 'primevue/inputnumber';\nimport Divider from 'primevue/divider';\nimport Panel from 'primevue/panel';\nimport Tooltip from 'primevue/tooltip';\nimport ProgressBar from 'primevue/progressbar';\nimport ProgressSpinner from 'primevue/progressspinner';\nimport TabView from 'primevue/tabview';\nimport TabPanel from 'primevue/tabpanel';\nimport AutoComplete from 'primevue/autocomplete';\nimport Checkbox from 'primevue/checkbox';\nimport ColorPicker from 'primevue/colorpicker';\nimport Message from 'primevue/message';\nimport InlineMessage from 'primevue/inlinemessage';\nimport Dialog from 'primevue/dialog';\nimport Slider from 'primevue/slider';\nimport Toast from 'primevue/toast';\nimport Tag from 'primevue/tag';\n\n/**\n * Add any plugins/configs that you want to be globally registered:\n */\nconst PLUGINS = [\n  PrimeVue, \n  ToastService,\n];\n\n/**\n * Add any components you want to be globally registered:\n */\nconst COMPONENTS: {[key: string]: Component} = {\n  'Button': Button,\n  'Dropdown': Dropdown,\n  'InputNumber': InputNumber,\n  'Divider': Divider,\n  'Panel': Panel,\n  'ProgressBar': ProgressBar,\n  'ProgressSpinner': ProgressSpinner,\n  'TabView': TabView,\n  'TabPanel': TabPanel,\n  'AutoComplete': AutoComplete,\n  'Checkbox': Checkbox,\n  'ColorPicker': ColorPicker,\n  'Message': Message,\n  'InlineMessage': InlineMessage,\n  'Dialog': Dialog,\n  'Slider': Slider,\n  'Toast': Toast,\n  'Tag': Tag,\n};\n\n/**\n * Add any directives you want to be globally registered:\n */\nconst DIRECTIVES: {[key: string]: Directive} = {\n  'Tooltip': Tooltip\n};\n\n/**\n * This namespace contains methods for helping us register components and directives from third party libraries\n */\nexport namespace ExternalComponentsHandler\n{\n  export function registerAll(app: App<Element>)\n  {\n    PLUGINS.forEach(plugin => {\n      app.use(plugin);\n    });\n\n    for (const name in COMPONENTS)\n    {\n      app.component(name, COMPONENTS[name]);\n    }\n\n    for (const name in DIRECTIVES)\n    {\n      app.directive(name, DIRECTIVES[name]);\n    }\n  }\n\n  export function getPlugins()\n  {\n    return PLUGINS;\n  }\n\n  export function getComponents()\n  {\n    return COMPONENTS;\n  }\n\n  export function getDirectives()\n  {\n    return DIRECTIVES;\n  }\n}","// PrimeVue and PrimeFlex styles (must be imported before any components!)\nimport 'primevue/resources/themes/saga-blue/theme.css';\nimport 'primevue/resources/primevue.min.css';\nimport 'primeicons/primeicons.css';\nimport 'primeflex/primeflex.min.css';\n\nimport { createApp } from 'vue';\nimport App from './App.vue';\nimport router from './router';\nimport store, { key } from './store';\nimport { ExternalComponentsHandler } from './utils/ExternalComponentsHandler';\nimport logger from './logger';\n\nconst app = createApp(App)\n  .use(logger)\n  .use(store, key)\n  .use(router);\n\nExternalComponentsHandler.registerAll(app);\n\napp.mount('#app');\n","/**\n * Colors are based on the UCSC color palette: https://nanx.me/ggsci/reference/pal_ucscgb.html (the 2nd 'pastel' colored one)\n */\n const CHROMOSOME_COLOR_MAP: {[key: string]: string} = {\n  '1': '#ff7e76',\n  '2': '#fec27e',\n  '3': '#fde083',\n  '4': '#91ff87',\n  '5': '#a4c2ff',\n  '6': '#e289ff',\n  '7': '#c2c280',\n  '8': '#c2c2c2',\n  '9': '#ff7de2',\n  '10': '#e47773',\n  '11': '#ffe0e1',\n  '12': '#fcff89',\n  '13': '#e0ff88',\n  '14': '#89b374',\n  '15': '#6666e2',\n  '16': '#c3e0ff',\n  '17': '#91ffff',\n  '18': '#e0ffff',\n  '19': '#c572e2',\n  '20': '#e0c2ff',\n  '21': '#c3a374',\n  '22': '#a3a371',\n  'X': '#a3a3a3',\n  'Y': '#e0e0e0',\n  'MT': '#b2e190',\n  '2A': '#e0e0c2',\n  // Ran out of colors from the UCSC color palette\n  '2B': '#a52a2a'\n};\n\nconst UNMAPPED_CHROMOSOME_COLOR = '#a52a2a'; // brown\n\nexport default class Chromosome\n{\n  mapKey: number = 0;\n  chromosome: string = '';\n  seqLength: number = 0;\n\n  constructor(params: { mapKey: number, chromosome: string; seqLength?: number })\n  {\n    this.mapKey = params.mapKey;\n    this.chromosome = params.chromosome;\n    this.seqLength = params.seqLength || 0;\n  }\n\n  static getColor(chromosome: string)\n  {\n    return CHROMOSOME_COLOR_MAP[chromosome] ?? UNMAPPED_CHROMOSOME_COLOR;\n  }\n}","import Block from \"@/models/Block\";\n\ninterface GeneParams\n{\n  mapKey: number;\n  speciesName?: string;\n  symbol: string;\n  name: string;\n  rgdId: number;\n  chromosome: string;\n  start: number;\n  stop: number;\n  backboneStart?: number;\n  backboneStop?: number;\n  orthologs?: number[];\n  block?: Block;\n}\n\nexport default class Gene\n{\n  mapKey: number;\n  speciesName: string = '';\n  symbol: string = '';\n  name: string = '';\n  rgdId: number = 0;\n  chromosome: string = '';\n  start: number = 0;\n  stop: number = 0;\n  backboneStart: number = 0;\n  backboneStop: number = 0;\n  // RGD IDs -- Note: will only be populated if Gene was received from the Synteny API with the includeOrthologs param\n  // TODO: Switch to \"null\" here to indicate not yet obtained.\n  orthologs: number[] = [];\n  block: Block | null = null;\n  constructor(params: GeneParams)\n  {\n    this.mapKey = params.mapKey;\n    this.speciesName = params.speciesName ?? this.speciesName;\n    this.symbol = params.symbol;\n    this.name = params.name;\n    this.rgdId = params.rgdId;\n    this.chromosome = params.chromosome;\n    this.start = params.start;\n    this.stop = params.stop;\n    this.backboneStart = params.backboneStart ?? this.backboneStart;\n    this.backboneStop = params.backboneStop ?? this.backboneStop;\n    this.orthologs = params.orthologs ?? [];\n    this.block = params.block?? this.block;\n  }\n\n  /**\n   * Operation to create a copy of this object WITHOUT references to its parent Block.\n   * This must be used before the Object is placed on the store to avoid a large /\n   * circular data structure getting pushed to our immutable store.\n   *\n   * When previously set, backboneStart / Stop are copied as well as the list of\n   * Ortholog rgdIds. If they weren't set previously, they will be null on the clone\n   * as well. Block is always set to `null` on the clone.\n   * @return\n   *   A copy of the Gene without reference to its parent Block.\n   */\n  clone(): Gene\n  {\n    const clone = new Gene({\n      mapKey: this.mapKey,\n      speciesName: this.speciesName,\n      symbol: this.symbol,\n      name: this.name,\n      rgdId: this.rgdId,\n      chromosome: this.chromosome,\n      start: this.start,\n      stop: this.stop,\n    });\n    if (this.backboneStart) clone.backboneStart = this.backboneStart;\n    if (this.backboneStop) clone.backboneStop = this.backboneStop;\n    return clone;\n  }\n\n  /**\n   * Returns the size of the Gene in basepairs\n   */\n  public get size()\n  {\n    return Math.abs(this.stop - this.start);\n  }\n}","import Gene from \"@/models/Gene\";\nimport BackboneSection from \"@/models/BackboneSection\";\nimport SyntenySection from \"@/models/SyntenySection\";\nimport { VariantDensity } from \"@/models/DatatrackSection\";\n\n/**\n * TODO: I think the way we use this model is a bit inefficient. Possible refactors:\n *   1. Delete this model entirely and type the selectedData in the store as \"Array<GenomicSectionType>\". Then\n *     in the SelectedDataPanel, we'd need to do conditional statements using \"instanceof\" to determine the data type\n *     and what properties to pass to the GeneInfo component\n *   -or-\n *   2. Change the class definition of this model to SelectedData<T extends GenomicSectionType> and add all properties\n *     needed for the SelectedDataPanel to it. Then when a piece of data is passed into the constructor, extract and\n *     set those properties based on what its type is (probably check using \"instanceof\"?). This would eliminate most of\n *     the conditionals in the SelectedDataPanel component and should clean up the template a bit, making it more readable.\n */\nexport type SelectedDataType = 'trackSection' | 'Gene' | 'backbone' | 'variantDensity';\ntype GenomicSectionType = BackboneSection | SyntenySection | Gene | VariantDensity;\n\n/**\n * Model that represents the Selected Data that will appear when Selected Data Panel\n */\nexport default class SelectedData\n{\n  genomicSection: GenomicSectionType;\n  type: SelectedDataType;\n\n  constructor(section: GenomicSectionType, type: SelectedDataType)\n  {\n    this.genomicSection = section;\n    this.type = type;\n  }\n\n}","import { ActionContext, createStore, Store } from 'vuex';\nimport VuexPersistence from 'vuex-persist';\nimport Species from '@/models/Species';\nimport Chromosome from '@/models/Chromosome';\nimport Gene from '@/models/Gene';\nimport BackboneSelection, { BasePairRange } from '@/models/BackboneSelection';\nimport SelectedData from '@/models/SelectedData';\nimport { InjectionKey } from 'vue';\nimport { createLogger } from 'vuex';\nimport { LoadedGene } from '@/models/DatatrackSection';\nimport { ConfigurationMode } from '@/utils/Types';\n\nexport const key: InjectionKey<Store<VCMapState>> = Symbol();\n\nexport interface VCMapState\n{\n  /* User configuration-related properties */\n  species: Species | null; // backbone species\n  chromosome: Chromosome | null; // backbone chromosome\n  startPos: number | null; // backbone start position\n  stopPos: number | null; // backbone stop position\n  gene: Gene | null; // backbone gene\n  comparativeSpecies: Species[];\n  configMode: ConfigurationMode;\n\n  /* Triggers for VCMap processing/rendering */\n  configurationLoaded: boolean | null;\n  selectedBackboneRegion: BackboneSelection | null;\n  detailedBasePairRequest: BasePairRange | null;\n  detailedBasePairRange: BasePairRange;\n\n  isDetailedPanelUpdating: boolean;\n  isOverviewPanelUpdating: boolean;\n  isUpdatingVariants: boolean;\n\n  selectedGeneIds: number[];\n  selectedData: SelectedData[] | null;\n\n  selectionToastCount: number;\n\n  /* These data structures have the potential to be pretty large */\n  // TODO: I think we can remove this from state\n  loadedGenes: Map<number, LoadedGene> | null;\n}\n\nconst vuexLocal = new VuexPersistence<VCMapState>({\n  storage: window.localStorage\n});\n\nconst actionsToLog = ['setDetailedBasePairRange', 'setDetailedBasePairRequest'];\nconst mutationsToLog = ['detailedBasePairRange'];\n\nconst logger = createLogger({\n  // Filter out frequently occurring actions/mutations (makes the console really noisy for not much benefit)\n  filter: (mutation) => {\n    return mutationsToLog.includes(mutation.type);\n  },\n  actionFilter: (action) => {\n    return actionsToLog.includes(action.type);\n  },\n});\n\nexport default createStore({\n  state: (): VCMapState => ({\n    species: null,\n    chromosome: null,\n    startPos: null,\n    stopPos: null,\n    gene: null,\n    comparativeSpecies: [],\n    configMode: 'gene',\n\n    configurationLoaded: null,\n    selectedBackboneRegion: null,\n    detailedBasePairRequest: { start: 0, stop: 0 } ?? null,\n    detailedBasePairRange: { start: 0, stop: 0 },\n\n    isDetailedPanelUpdating: false,\n    isOverviewPanelUpdating: false,\n    isUpdatingVariants: false,\n\n    selectedGeneIds: [],\n    selectedData: null,\n\n    selectionToastCount: 0,\n\n    /* These data structures have the potential to be pretty large */\n    loadedGenes: null,\n  }),\n\n  mutations: {\n    species (state: VCMapState, species: Species) {\n      state.species = species;\n    },\n    chromosome (state: VCMapState, chromosome: Chromosome) {\n      state.chromosome = chromosome;\n    },\n    startPosition (state: VCMapState, startPos: number) {\n      state.startPos = startPos;\n    },\n    stopPosition (state: VCMapState, stopPos: number) {\n      state.stopPos = stopPos;\n    },\n    gene (state: VCMapState, gene: Gene) {\n      state.gene = gene;\n    },\n    comparativeSpecies (state: VCMapState, speciesArray: Species[]) {\n      state.comparativeSpecies = speciesArray;\n    },\n    loadedGenes (state: VCMapState, loadedGenesMap: Map<number, LoadedGene>) {\n      state.loadedGenes = loadedGenesMap;\n    },\n    configurationLoaded(state: VCMapState, configState: boolean | null) {\n      state.configurationLoaded = configState;\n    },\n    selectedBackboneRegion ( state: VCMapState, selection: BackboneSelection) {\n      state.selectedBackboneRegion = selection;\n    },\n    detailedBasePairRequest(state: VCMapState, range: BasePairRange) {\n      state.detailedBasePairRequest = range;\n    },\n    detailedBasePairRange(state: VCMapState, range: BasePairRange) {\n      state.detailedBasePairRange = range;\n    },\n    configMode(state: VCMapState, mode: ConfigurationMode) {\n      state.configMode = mode;\n    },\n    selectedData(state: VCMapState, selectedData: SelectedData[]) {\n      state.selectedData = selectedData;\n    },\n    selectedGeneIds(state: VCMapState, selectedIds: number[]) {\n      state.selectedGeneIds = selectedIds;\n    },\n    isDetailedPanelUpdating(state: VCMapState, isUpdating: boolean) {\n      state.isDetailedPanelUpdating = isUpdating;\n    },\n    isOverviewPanelUpdating(state: VCMapState, isUpdating: boolean) {\n      state.isOverviewPanelUpdating = isUpdating;\n    },\n    isUpdatingVariants(state: VCMapState, isUpdating: boolean) {\n      state.isUpdatingVariants = isUpdating;\n    },\n    selectionToastCount(state: VCMapState, count: number) {\n      state.selectionToastCount = count;\n    }\n  },\n\n  actions: {\n    setSpecies(context: ActionContext<VCMapState, VCMapState>, species: Species) {\n      context.commit('species', species);\n    },\n    setChromosome(context: ActionContext<VCMapState, VCMapState>, chromosome: Chromosome) {\n      context.commit('chromosome', chromosome);\n    },\n    setStartPosition(context: ActionContext<VCMapState, VCMapState>, startPos: number) {\n      context.commit('startPosition', startPos);\n    },\n    setStopPosition(context: ActionContext<VCMapState, VCMapState>, stopPos: number) {\n      context.commit('stopPosition', stopPos);\n    },\n    setGene(context: ActionContext<VCMapState, VCMapState>, gene: Gene) {\n      context.commit('gene', gene);\n    },\n    setConfigMode(context: ActionContext<VCMapState, VCMapState>, mode: ConfigurationMode) {\n      context.commit('configMode', mode);\n    },\n    setConfigurationLoaded(context: ActionContext<VCMapState, VCMapState>, configState: boolean | null) {\n      context.commit('configurationLoaded', configState);\n    },\n    setSelectedData(context: ActionContext<VCMapState, VCMapState>, selected: SelectedData[]) {\n      context.commit('selectedData', selected);\n    },\n    setSelectedGeneIds(context: ActionContext<VCMapState, VCMapState>, selectedIds: number[]) {\n      context.commit('selectedGeneIds', selectedIds);\n    },\n    setComparativeSpecies(context: ActionContext<VCMapState, VCMapState>, species: Species[]) {\n      context.commit('comparativeSpecies', species);\n    },\n    setLoadedGenes(context: ActionContext<VCMapState, VCMapState>, loadedGenes: Gene[]) {\n      context.commit('loadedGenes', loadedGenes);\n    },\n    setIsDetailedPanelUpdating(context: ActionContext<VCMapState, VCMapState>, isUpdating: boolean) {\n      context.commit('isDetailedPanelUpdating', isUpdating);\n    },\n    setIsOverviewPanelUpdating(context: ActionContext<VCMapState, VCMapState>, isUpdating: boolean) {\n      context.commit('isOverviewPanelUpdating', isUpdating);\n    },\n    setIsUpdatingVariants(context: ActionContext<VCMapState, VCMapState>, isUpdating: boolean) {\n      context.commit('isUpdatingVariants', isUpdating);\n    },\n    clearConfiguration(context: ActionContext<VCMapState, VCMapState>) {\n      context.commit('species', null);\n      context.commit('gene', null);\n      context.commit('chromosome', null);\n      context.commit('startPosition', null);\n      context.commit('stopPosition', null);\n      context.commit('comparativeSpecies', []);\n      context.commit('selectedGeneIds', []);\n      context.commit('loadedGenes', null);\n      context.commit('loadedBlocks', null);\n      context.commit('selectedBackboneRegion', null);\n      context.commit('detailedBasePairRange', { start: 0, stop: 0 });\n      context.commit('configurationLoaded', null);\n      context.commit('selectionToastCount', 0);\n    },\n    clearBackboneSelection(context: ActionContext<VCMapState, VCMapState>) {\n      context.commit('selectedBackboneRegion', null);\n      context.commit('detailedBasePairRange', { start: 0, stop: 0 });\n    },\n    setBackboneSelection(context: ActionContext<VCMapState, VCMapState>, selection: BackboneSelection) {\n      if (selection.viewportSelection == null)\n      {\n        selection.setViewportSelection(0, selection.chromosome.seqLength);\n      }\n      context.commit('startPosition', selection.viewportSelection?.basePairStart ?? 0);\n      context.commit('stopPosition', selection.viewportSelection?.basePairStop ?? selection.chromosome.seqLength);\n      context.commit('selectedBackboneRegion', selection);\n      context.commit('detailedBasePairRange', { start: selection.viewportSelection?.basePairStart, stop: selection.viewportSelection?.basePairStop });\n      // Note: Committing a change to detailedBasePairRange will trigger an update on the Detailed panel\n    },\n    setDetailedBasePairRequest(context: ActionContext<VCMapState, VCMapState>, range: BasePairRange) {\n      // Note: Committing a change to detailedBasePairRange will trigger an update on the Detailed panel\n      context.commit('detailedBasePairRequest', range);\n    },\n    setDetailedBasePairRange(context: ActionContext<VCMapState, VCMapState>, range: BasePairRange) {\n      // Note: Committing a change to detailedBasePairRange will trigger an update on the Detailed panel\n      context.commit('detailedBasePairRange', range);\n    },\n    setBackboneOrthologData(context: ActionContext<VCMapState, VCMapState>, orthologs: any) {\n      context.commit('backboneOrthologs', orthologs);\n    },\n    setSelectionToastCount(context: ActionContext<VCMapState, VCMapState>, count: number) {\n      context.commit('selectionToastCount', count);\n    }\n  },\n\n  getters: {\n    isLoadByGene: (state: VCMapState) => {\n      return state.configMode === 'gene';\n    },\n\n    isLoadByPosition: (state: VCMapState) => {\n      return state.configMode === 'position';\n    },\n  },\n\n  plugins: process.env.NODE_ENV !== 'production'\n    ? [vuexLocal.plugin, logger] // Only use Vuex logger in development\n    : [vuexLocal.plugin]\n});\n","import Gene from '@/models/Gene';\nimport SelectedData from '@/models/SelectedData';\nimport { Store } from \"vuex\";\nimport { VCMapState } from \"@/store\";\nimport { collectAllOrthologIds } from './OrthologHandler';\n\nconst SEARCHED_GENE_WINDOW_FACTOR = 6;\n\n/**\n * Generates selectedData and a list of gene Ids of all orthologs associated with the gene\n */\nexport function getNewSelectedData(store: Store<VCMapState>, gene: Gene, geneList: Map<number, Gene>): { rgdIds: number[], selectedData: SelectedData[] } {\n  const comparativeSpecies = store.state.comparativeSpecies;\n  const compSpeciesNameMap = new Map<Number, string>();\n\n  comparativeSpecies.forEach(species => compSpeciesNameMap.set(species.activeMap.key, species.name));\n\n  const rgdIds: number[] = [];\n  const selectedDataList: SelectedData[] = [];\n\n  const data = geneList.get(gene.rgdId);\n  if (data) {\n    collectAllOrthologIds(data, geneList, rgdIds);\n    \n    if (rgdIds.length > 0)\n    {\n      rgdIds.forEach(id => {\n        const gene = geneList.get(id);\n        if (gene)\n          selectedDataList.push(new SelectedData(gene.clone(), 'Gene'));\n      });\n    }\n  }\n\n  return {\n    rgdIds, \n    selectedData: selectedDataList\n  };\n}\n\nexport function sortGeneList(geneList: Gene[]) {\n  // for combined or hidden gene lists, sort LOC\n  // genes to end of list, otherwise sort alphabetically\n  geneList.sort((geneA, geneB) => {\n    const isGeneALOC = geneA.symbol.startsWith('LOC') || false;\n    const isGeneBLOC = geneB.symbol.startsWith('LOC') || false;\n    if (isGeneALOC && isGeneBLOC) {\n      const geneASymbol = geneA.symbol.toLowerCase() || '';\n      const geneBSymbol = geneB.symbol.toLowerCase() || '';\n      return (geneASymbol < geneBSymbol) ? -1 : (geneASymbol > geneBSymbol) ? 1 : 0;\n    }\n    else if (isGeneALOC) {\n      return 1;\n    }\n    else if (isGeneBLOC) {\n      return -1;\n    }\n    const geneASymbol = geneA.symbol.toLowerCase() || '';\n    const geneBSymbol = geneB.symbol.toLowerCase() || '';\n    return (geneASymbol < geneBSymbol) ? -1 : (geneASymbol > geneBSymbol) ? 1 : 0;\n  });\n}\n\nexport function adjustSelectionWindow(searchedGene: Gene, geneList: Map<number, Gene>, store: Store<VCMapState>)\n{\n  // const loadedGenes = store.state.loadedGenes;\n\n  // New start and stop will be +/- some multiple of the gene's length (currently 2x)\n  const geneBasePairLength = searchedGene.stop - searchedGene.start;\n  // Take the max of new start position, and selected region's original start\n  // to avoid jumping to outside of loaded region\n  const newInnerStart = Math.max(Math.floor(searchedGene.start\n    - SEARCHED_GENE_WINDOW_FACTOR * geneBasePairLength), 0);\n  // Take min of new stop and selected regions original stop\n  const newInnerStop = Math.min(Math.floor(searchedGene.stop\n    + SEARCHED_GENE_WINDOW_FACTOR * geneBasePairLength), store.state.chromosome?.seqLength ?? newInnerStart);\n  //get orthologs for backbone gene, and determine the relative highest and lowest positioned genes to reset the window\n  const reframeGenes: Gene[] = [];\n\n  if (searchedGene.orthologs)\n  {\n    searchedGene.orthologs.forEach((orthologId: number) => {\n      const ortholog = geneList.get(orthologId);\n      if (ortholog)\n      {\n        reframeGenes.push(ortholog);\n      }\n    });\n  }\n\n  if (reframeGenes.length > 0)\n  {  \n    reframeGenes.push(searchedGene);\n    reframeGenes.sort((a, b) => a.backboneStart - b.backboneStart );\n\n    const newStart = Math.max(Math.floor(reframeGenes[0].backboneStart - SEARCHED_GENE_WINDOW_FACTOR * geneBasePairLength), 0);\n    const newStop = Math.min(Math.floor(reframeGenes[reframeGenes.length - 1].backboneStop + SEARCHED_GENE_WINDOW_FACTOR * geneBasePairLength), store.state.chromosome?.seqLength ?? newStart);\n\n    return { start: newStart, stop: newStop };\n  }\n  else\n  {\n    return { start: newInnerStart, stop: newInnerStop };\n  }\n}\n\nexport function sortGeneMatches(searchKey: any, partialMatches: Gene[])\n{ \n  searchKey = searchKey.toLowerCase();\n\n  return partialMatches.sort((a, b) => {\n    const distanceA = levenshteinDistance(searchKey, a.symbol.toLowerCase());\n    const distanceB = levenshteinDistance(searchKey, b.symbol.toLowerCase());\n    return distanceA - distanceB;\n  });\n}\n\nfunction levenshteinDistance(str1: string, str2: string) \n{\n  const matrix = Array(str2.length + 1).fill(null).map(() => Array(str1.length + 1).fill(0));\n\n  for (let i = 0; i <= str1.length; i++) \n  {\n    matrix[0][i] = i;\n  }\n\n  for (let j = 0; j <= str2.length; j++) \n  {\n    matrix[j][0] = j;\n  }\n\n  for (let j = 1; j <= str2.length; j++) \n  {\n    for (let i = 1; i <= str1.length; i++) \n    {\n      if (str2.charAt(j - 1) === str1.charAt(i - 1)) \n      {\n        matrix[j][i] = matrix[j - 1][i - 1];\n      } \n      else \n      {\n        matrix[j][i] = Math.min(\n          matrix[j - 1][i] + 1, // deletion\n          matrix[j][i - 1] + 1, // insertion\n          matrix[j - 1][i - 1] + 1 // substitution\n        );\n      }\n    }\n  }\n\n  return matrix[str2.length][str1.length];\n}\n","export namespace Formatter\n{\n  export function convertBasePairToLabel(bp: number | null)\n  {\n    if (bp == null)\n    {\n      return null;\n    }\n\n    return (bp / 1000000).toFixed(2) + 'Mbp';\n  }\n\n  export function addCommasToBasePair(bp: number | null)\n  {\n    if (bp == null)\n    {\n      return null;\n    }\n\n    return bp.toLocaleString();\n  }\n\n  export function evaluateBPInput(bp: number | null)\n  {\n    if(bp === null) {\n      return null;\n    }\n    return bp;\n  }\n}\n","import { GeneDatatrack } from './DatatrackSection';\nimport Gene from './Gene';\nimport { SVGShape, VCMapSVGElement } from \"./VCMapSVGElement\";\n\ntype OrthologLineParams = {\n  startGene: Gene;\n  endGene: Gene;\n  x1: number;\n  x2: number;\n  y1: number;\n  y2: number;\n  startGeneDatatrack?: GeneDatatrack;\n  endGeneDatatrack?: GeneDatatrack;\n};\n\nexport default class OrthologLine implements VCMapSVGElement\n{\n  posX1: number = 0;\n  posX2: number = 0;\n  posY1: number = 0;\n  posY2: number = 0;\n  height: number = 0;\n  width: number = 0;\n  shape: SVGShape = 'rect';\n  representation: string = '';\n  isHovered: boolean = false;\n  isSelected: boolean = false;\n  elementColor: string = '';\n\n  startGene: Gene;\n  endGene: Gene;\n  startGeneDatatrack: GeneDatatrack | null = null;\n  endGeneDatatrack: GeneDatatrack | null = null;\n\n  chainedOrthologLines: OrthologLine[] = []; // Other ortholog lines that are \"chained\" to this one\n\n  constructor(params: OrthologLineParams)\n  {\n    this.startGene = params.startGene;\n    this.endGene = params.endGene;\n    this.posX1 = params.x1;\n    this.posX2 = params.x2;\n    this.posY1 = params.y1;\n    this.posY2 = params.y2;\n    this.startGeneDatatrack = params.startGeneDatatrack ?? null;\n    this.endGeneDatatrack = params.endGeneDatatrack ?? null;\n\n    // Associate this line with its gene datatracks if possible\n    this.startGeneDatatrack?.lines.push(this);\n    this.endGeneDatatrack?.lines.push(this);\n  }\n}","import logger from \"@/logger\";\nimport BackboneSet from \"@/models/BackboneSet\";\nimport { GeneDatatrack } from \"@/models/DatatrackSection\";\nimport Gene from \"@/models/Gene\";\nimport OrthologLine from \"@/models/OrthologLine\";\nimport SelectedData from \"@/models/SelectedData\";\nimport SyntenyRegionSet from \"@/models/SyntenyRegionSet\";\nimport { calculateDetailedPanelSVGYPositionBasedOnBackboneAlignment, getDetailedPanelXPositionForBackboneDatatracks, getDetailedPanelXPositionForDatatracks, getThreshold } from \"./Shared\";\nimport SVGConstants from \"./SVGConstants\";\n\ntype OrthologPositionInfo = {\n  order: number;\n  startX: number;\n  endX: number;\n};\n\nconst ORTHOLOG_THRESHOLD_MULTIPLIER = 0.5;\n\nexport function createOrthologLines(geneList: Map<number, Gene>, backboneSet: BackboneSet, offBackboneSyntenyRegionSets: SyntenyRegionSet[])\n{ \n  logger.time(`CreateOrthologLines`);\n\n  logger.time(`Ortholog Line Data Prep`);\n  \n  //\n  // Draw ortholog lines for backbone genes that are larger than our defined ortholog line threshold\n  const orthologLineThreshold = getThreshold(backboneSet.backbone.windowStop - backboneSet.backbone.windowStart) * ORTHOLOG_THRESHOLD_MULTIPLIER;\n  const visibleBackboneGenesWithOrthologs = Array.from(geneList.values())\n    .filter(g => g.mapKey === backboneSet.mapKey && g.orthologs.length > 0 && (g.backboneStop - g.backboneStart) >= orthologLineThreshold);\n\n  //\n  // Keep track of species order and gene datatrack positional values by map key:\n  const speciesPositionMap: Map<number, OrthologPositionInfo> = new Map();\n  const backboneGeneStartX = getDetailedPanelXPositionForBackboneDatatracks(backboneSet.backbone.posX2, backboneSet.geneDatatrackSetIndex);\n  speciesPositionMap.set(backboneSet.mapKey, {\n    order: 0,\n    startX: backboneGeneStartX,\n    endX: backboneGeneStartX + SVGConstants.dataTrackWidth,\n  });\n  offBackboneSyntenyRegionSets.forEach(set => {\n    const geneStartX = getDetailedPanelXPositionForDatatracks(set.order, set.geneDatatrackSetIndex);\n    const geneEndX = geneStartX + SVGConstants.dataTrackWidth;\n    speciesPositionMap.set(set.mapKey, {\n      order: set.order,\n      startX: geneStartX,\n      endX: geneEndX,\n    });\n  });\n\n  // Get the \"on-screen\" gene datatracks for the backbone\n  const backboneGeneDatatracks = backboneSet.datatrackSets\n    .filter(datatrackSet => datatrackSet.datatracks[0]?.type === 'gene')\n    .flat()\n    .map(geneSet => (geneSet.datatracks as GeneDatatrack[]))\n    .flat();\n\n  // Create of map of gene RGD ID to GeneDatatrack models (not all genes will have these -- only visible genes in the viewport)\n  const geneDatatrackMap = new Map<number, GeneDatatrack>();\n  backboneGeneDatatracks.forEach(d => {\n    geneDatatrackMap.set(d.gene.rgdId, d);\n  });\n\n  offBackboneSyntenyRegionSets.forEach(set => {\n    for (let regionIdx = 0; regionIdx < set.regions.length; regionIdx++)\n    {\n      const region = set.regions[regionIdx];\n      const regionGeneDatatracks = region.datatrackSets\n        .filter(datatrackSet => datatrackSet.datatracks[0]?.type === 'gene')\n        .map(geneSet => (geneSet.datatracks as GeneDatatrack[]))\n        .flat();\n\n      // Get all genes with datatrack sections (these are visible in the detailed panel)\n      regionGeneDatatracks.forEach(dt => {\n        geneDatatrackMap.set(dt.gene.rgdId, dt);\n      });\n    }\n  });\n  logger.timeEnd(`Ortholog Line Data Prep`);\n\n  logger.time(`Ortholog Line Creation`);\n  //\n  // Loop through backbone genes with orthologs and create lines\n  const orthologLines: OrthologLine[] = [];\n  const orthologChains: Array<Map<number, Gene[]>> = [];\n  visibleBackboneGenesWithOrthologs.forEach(backboneGene => {\n    const orthologs: Gene[] = [];\n    backboneGene.orthologs.forEach(rgdId => {\n      const ortholog = geneList.get(rgdId);\n      if (ortholog)\n        orthologs.push(ortholog);\n    });\n\n    // Place the orthologs in this map according to what \"order\" they appear in\n    const orthologOrderMap: Map<number, Gene[]> = new Map();\n    orthologOrderMap.set(0, [backboneGene]);\n    // Sort orthologs by species set order\n    orthologs.sort((a, b) => {\n      const positionInfoA = speciesPositionMap.get(a.mapKey);\n      const positionInfoB = speciesPositionMap.get(b.mapKey);\n      if (!positionInfoA || !positionInfoB)\n      {\n        return 0;\n      }\n\n      return positionInfoA.order - positionInfoB.order;\n    })\n    .forEach(o => {\n      const order = speciesPositionMap.get(o.mapKey)?.order;\n      \n      if (order == null)\n      {\n        logger.error(`No order was returned from speciesPositionMap for ortholog gene rgdId: ${o.rgdId}`);\n        return;\n      }\n\n      if (!orthologOrderMap.has(order))\n      {\n        orthologOrderMap.set(order, [o]);\n      }\n      else\n      {\n        orthologOrderMap.get(order)?.push(o);\n      }\n    });\n\n    if (orthologOrderMap.size > 1)\n    {\n      orthologChains.push(orthologOrderMap);\n    }\n  });\n\n  const MAX_ORDER = offBackboneSyntenyRegionSets.length;\n  const WINDOW_START = backboneSet.backbone.windowStart;\n  const WINDOW_STOP = backboneSet.backbone.windowStop;\n  orthologChains.forEach(chain => {\n    let prevGenes: Gene[] = [];\n    const chainLines: OrthologLine[] = [];\n    for (let i = 0; i <= MAX_ORDER; i++)\n    {\n      const genes = chain.get(i);\n      if (genes == null)\n      {\n        continue;\n      }\n\n      if (prevGenes.length === 0)\n      {\n        prevGenes.push(...genes);\n        continue;\n      }\n\n      // Create ortholog lines from prevGenes to current genes\n      prevGenes.forEach(prevGene => {\n        genes.forEach(currGene => {\n          if (isOrthologLineInView(prevGene, currGene, WINDOW_START, WINDOW_STOP))\n          {\n            chainLines.push(new OrthologLine({\n              startGene: prevGene.clone(),\n              endGene: currGene.clone(),\n              x1: speciesPositionMap.get(prevGene.mapKey)?.endX ?? 0,\n              x2: speciesPositionMap.get(currGene.mapKey)?.startX ?? 0,\n              y1: calculateDetailedPanelSVGYPositionBasedOnBackboneAlignment(prevGene.backboneStart, prevGene.backboneStop, WINDOW_START, WINDOW_STOP),\n              y2: calculateDetailedPanelSVGYPositionBasedOnBackboneAlignment(currGene.backboneStart, currGene.backboneStop, WINDOW_START, WINDOW_STOP),\n              startGeneDatatrack: geneDatatrackMap.get(prevGene.rgdId),\n              endGeneDatatrack: geneDatatrackMap.get(currGene.rgdId),\n            }));\n          }\n        });\n      });\n\n      prevGenes = genes;\n    }\n\n    // Add associations to all other ortholog lines in the same chain\n    for (let i = 0; i < chainLines.length; i++)\n    {\n      chainLines[i].chainedOrthologLines = chainLines\n        .filter(l => l.startGene.rgdId !== chainLines[i].startGene.rgdId || l.endGene.rgdId !== chainLines[i].endGene.rgdId);\n    }\n    \n    orthologLines.push(...chainLines);\n  });\n  logger.timeEnd(`Ortholog Line Creation`);\n  logger.timeEnd(`CreateOrthologLines`);\n\n  return orthologLines;\n}\n\nexport function isOrthologLineInView(geneA: Gene, geneB: Gene, visibleBackboneStart: number, visibleBackboneStop: number)\n{\n  // Get backbone start/stops of each gene -- if backboneStart or backboneStop is missing, assume it's a backbone gene\n  // and use the regular start/stop of the gene\n  const geneABackboneStart = geneA.backboneStart ?? geneA.start;\n  const geneABackboneStop = geneA.backboneStop ?? geneA.stop;\n  const geneBBackboneStart = geneB.backboneStart ?? geneB.start;\n  const geneBBackboneStop = geneB.backboneStop ?? geneB.stop;\n\n  // Test if any part of either gene is inside of the bp range\n  if (isInBPRange(geneABackboneStart, visibleBackboneStart, visibleBackboneStop)\n    || isInBPRange(geneABackboneStop, visibleBackboneStart, visibleBackboneStop)\n    || isInBPRange(geneBBackboneStart, visibleBackboneStart, visibleBackboneStop)\n    || isInBPRange(geneBBackboneStop, visibleBackboneStart, visibleBackboneStop))\n  {\n    return true;\n  }\n\n  // Test if either gene includes the bp range\n  if ((geneABackboneStart < visibleBackboneStart && geneABackboneStop > visibleBackboneStop)\n    || (geneBBackboneStart < visibleBackboneStart && geneBBackboneStop > visibleBackboneStop))\n  {\n    return true;\n  }\n\n  // Test if both genes are outside of the bp range (ortholog line should cross the viewport)\n  return (geneABackboneStop < visibleBackboneStart && geneBBackboneStart > visibleBackboneStop)\n    || (geneBBackboneStop < visibleBackboneStart && geneABackboneStart > visibleBackboneStop);\n}\n\nfunction isInBPRange(testBP: number, visibleBackboneStart: number, visibleBackboneStop: number)\n{\n  return testBP >= visibleBackboneStart && testBP <= visibleBackboneStop;\n}\n\nexport function getOrthologLineGenes(line: OrthologLine)\n{\n  const genes: Map<number, Gene> = new Map();\n  [line, ...line.chainedOrthologLines].forEach(l => {\n    genes.set(l.startGene.rgdId, l.startGene);\n    genes.set(l.endGene.rgdId, l.endGene);\n  });\n\n  return genes;\n}\n\nexport function getSelectedDataAndGeneIdsFromOrthologLine(line: OrthologLine)\n{\n  const orthologGenesMap = getOrthologLineGenes(line);\n\n  const selectedData = Array.from(orthologGenesMap.values())\n    .map(g => new SelectedData(g, 'Gene'));\n\n  const selectedGeneIds = Array.from(orthologGenesMap.keys());\n\n  return {\n    selectedData,\n    selectedGeneIds,\n  };\n}\n\n\n/**\n * Gets all ortholog RGD Ids for a gene and adds them to the rgdIds array\n */\nexport function collectAllOrthologIds(gene: Gene, geneList: Map<number, Gene>, rgdIds: number[])\n{\n  // Needed for 1st iteration of this function -> add current gene to rgdId list\n  if (!rgdIds.includes(gene.rgdId))\n  {\n    rgdIds.push(gene.rgdId);\n  }\n  \n  gene.orthologs.forEach(orthoId => {\n    if (rgdIds.includes(orthoId))\n    {\n      return;\n    }\n\n    const orthologGene = geneList.get(orthoId);\n    if (orthologGene != null)\n    {\n      rgdIds.push(orthoId);\n      collectAllOrthologIds(orthologGene, geneList, rgdIds);\n    }\n  });\n}","const constants = {\n  overviewPanelWidth: 300,\n  detailsPanelWidth: 500,\n  overviewTitleXPosition: 10,\n  detailsTitleXPosition: 310,\n  panelTitleYPosition: 15,\n  panelTitleHeight: 55,\n  backboneXPosition: 260,\n  viewboxHeight: 440,\n  trackWidth: 20,\n  dataTrackWidth: 10,\n  overviewTrackYPosition: 70,\n  trackLabelYPosition: 25,\n  trackMapLabelYPosition: 35,\n  selectedBackboneXPosition: 320,\n  navigationButtonHeight: 15,\n  overviewTrackPadding: 15,\n  backboneDatatrackXOffset: 10,\n};\n\nexport const PANEL_SVG_START = constants.panelTitleHeight;\nexport const PANEL_SVG_STOP = constants.viewboxHeight - constants.navigationButtonHeight;\nexport const PANEL_HEIGHT = PANEL_SVG_STOP - PANEL_SVG_START;\n\nexport default constants;","/**\n * Shared utility methods that don't necessarily warrant their own file\n */\n\nimport Block, { Gap, GenomicPosition } from \"@/models/Block\";\nimport Gene from \"@/models/Gene\";\nimport SVGConstants, { PANEL_SVG_STOP, PANEL_SVG_START, PANEL_HEIGHT } from \"./SVGConstants\";\nimport { BackboneAlignment } from \"@/models/GenomicSection\";\nimport logger from \"@/logger\";\n\n// Don't render anything smaller than this\nconst SMALLEST_RENDERABLE_SVG_UNIT = 0.2; // 1/5th of an SVG unit\n\n/**\n * Gets threshold based on how many basepairs = 0.25 SVG units\n * \n * @param bpLength\n *   number of basepairs being rendered in the SVG view\n * @returns\n *   threshold (number)\n */\nexport function getThreshold(bpLength: number)\n{\n  return Math.round(bpLength / (PANEL_SVG_STOP - PANEL_SVG_START) * SMALLEST_RENDERABLE_SVG_UNIT);\n}\n\n/**\n * Determines whether or not a Block is in the specified viewport basepair range\n * \n * @param targetBlock\n *   Block or Gap\n * @param backboneStart\n *   start bp of the backbone\n * @param backboneStop\n *   stop bp of the backbone\n * \n * @returns\n *   True if block is partially in the viewport, False if not\n */\nexport function isGenomicDataInViewport(targetBlock: Block | Gap | Gene, backboneStart: number, backboneStop: number)\n{\n  return (targetBlock.backboneStart > backboneStart && targetBlock.backboneStart < backboneStop)\n    || (targetBlock.backboneStop < backboneStop && targetBlock.backboneStop > backboneStart)\n    || (targetBlock.backboneStart < backboneStart && targetBlock.backboneStop > backboneStop);\n}\n\nexport function getDetailedPanelXPositionForDatatracks(order: number, index: number)\n{\n  return getDetailedPanelXPositionForSynteny(order) + SVGConstants.trackWidth\n    + SVGConstants.backboneDatatrackXOffset * (index + 1) + (SVGConstants.backboneDatatrackXOffset * index);\n}\n\nexport function getDetailedPanelXPositionForSynteny(order: number)\n{\n  return (order * 140) + SVGConstants.selectedBackboneXPosition;\n}\n\nexport function getDetailedPanelXPositionForBackboneDatatracks(backboneX2: number, datatrackSetIndex: number)\n{\n  return backboneX2 + (SVGConstants.backboneDatatrackXOffset * (datatrackSetIndex + 1)) + (SVGConstants.backboneDatatrackXOffset * datatrackSetIndex);\n}\n\n/**\n * Calculates and returns the \"middle\" SVG Y coordinate of a gene in the Detailed Panel\n */\nexport function calculateDetailedPanelSVGYPositionBasedOnBackboneAlignment(geneBackboneStart: number, geneBackboneStop: number, visibleBackboneStart: number, visibleBackboneStop: number)\n{\n  const svgToBackboneRatio = (PANEL_HEIGHT) / (visibleBackboneStop - visibleBackboneStart);\n\n  const backboneStartDiff = geneBackboneStart - visibleBackboneStart;\n  const backboneStopDiff = visibleBackboneStop - geneBackboneStop;\n\n  const svgStart = PANEL_SVG_START + (backboneStartDiff * svgToBackboneRatio);\n  const svgStop = PANEL_SVG_STOP - (backboneStopDiff * svgToBackboneRatio);\n\n  return svgStart + ((svgStop - svgStart) / 2);\n}\n\n/**\n * Determines gene backbone alignments while taking into account the gaps of the target block. This is important for\n * properly positioning genes that are in view. This function relies on gaps being sorted in ascending order.\n *\n * @param gene\n * @param targetBlock\n */\nexport function processAlignmentsOfGeneInsideOfViewport(start: number, stop: number, targetBlock: Block): BackboneAlignment\n{\n  // Only use gaps at the same level as the target block\n  // NOTE: This should really always be level 1, since we only process genes that come back on level 1 blocks\n  //   We will need to adjust the implementation to handle overlapping gaps if we start needing to process \n  //   level 2 stuff...\n  const gaps = targetBlock.gaps.filter(g => g.chainLevel === targetBlock.chainLevel);\n  if (gaps.length === 0)\n  {\n    // Process gene alignments for gapless blocks just like how we'd process alignments\n    // that are outside of the viewport\n    return processAlignmentsOfGeneOutsideOfViewport(start, stop, targetBlock);\n  }\n\n  // Find the block/gap where the gene starts, and the block/gap where the gene ends\n  let startingSection: GenomicPosition | undefined;\n  let endingSection: GenomicPosition | undefined;\n  let previousGap: Gap | undefined;\n  for (let i = 0; i < gaps.length; i++)\n  { \n    const gap = gaps[i];\n    if (!startingSection)\n    {\n      // Looking for starting section...\n      if (start < gap.start)\n      {\n        // Starts before this gap\n        // TODO: The logic for determining backboneStart/Stop here can be kind of confusing to wrap your head around. I wonder if\n        //   there is a clearer way to code this. previousGap and gap flip-flop depending on orientation of the block.\n        startingSection = {\n          start: previousGap?.stop ?? targetBlock.start,\n          stop: gap.start,\n          backboneStart: (targetBlock.orientation === '-') ? gap.backboneStop : previousGap?.backboneStop ?? targetBlock.backboneStart,\n          backboneStop: (targetBlock.orientation === '-') ? previousGap?.backboneStart ?? targetBlock.backboneStop : gap.backboneStart,\n        };\n      }\n      else if (start >= gap.start && start <= gap.stop)\n      {\n        // Starts inside of this gap\n        startingSection = {\n          start: gap.start,\n          stop: gap.stop,\n          backboneStart: gap.backboneStart,\n          backboneStop: gap.backboneStop,\n        };\n      }\n    }\n    \n    // NOTE: Not using an else here because the endingSection might be the same as the startingSection.\n    //   Need to evaluate the same gap even if startingSection has just been found.\n    if (startingSection && !endingSection)\n    {\n      // Looking for ending section...\n      if (stop < gap.start)\n      {\n        // Ends before this gap\n        // TODO: The logic for determining backboneStart/Stop here can be kind of confusing to wrap your head around. I wonder if\n        //   there is a clearer way to code this. previousGap and gap flip-flop depending on orientation of the block.\n        endingSection = {\n          start: previousGap?.stop ?? targetBlock.start,\n          stop: gap.start,\n          backboneStart: (targetBlock.orientation === '-') ? gap.backboneStop : previousGap?.backboneStop ?? targetBlock.backboneStart,\n          backboneStop: (targetBlock.orientation === '-') ? previousGap?.backboneStart ?? targetBlock.backboneStop : gap.backboneStart,\n        };\n      }\n      else if (stop >= gap.start && stop <= gap.stop)\n      {\n        // Ends inside of this gap\n        endingSection = {\n          start: gap.start,\n          stop: gap.stop,\n          backboneStart: gap.backboneStart,\n          backboneStop: gap.backboneStop,\n        };\n      }\n    }\n\n    if (i === gaps.length - 1 && targetBlock.stop > gap.stop && (!startingSection || !endingSection))\n    {\n      // If the last gap was just analyzed and no starting/ending section has been found, then\n      // the missing section(s) should be the final \"block\" after the last gap\n      const lastSection = {\n        start: gap.stop,\n        stop: targetBlock.stop,\n        backboneStart: (targetBlock.orientation === '-') ? targetBlock.backboneStart : gap.backboneStop,\n        backboneStop: (targetBlock.orientation === '-') ? gap.backboneStart : targetBlock.backboneStop,\n      };\n\n      if (!startingSection) startingSection = lastSection;\n      if (!endingSection) endingSection = lastSection;\n    }\n\n    previousGap = gap;\n\n    if (startingSection && endingSection)\n    {\n      break;\n    }\n  }\n\n  if (!startingSection || !endingSection)\n  {\n    // Something went wrong...\n    logger.error(`Gene backbone alignment could not be determined based on block with gaps. See debug logs.`);\n    logger.debug(start, stop, targetBlock);\n    // Fallback to processing without accounting for gaps\n    return processAlignmentsOfGeneOutsideOfViewport(start, stop, targetBlock);\n  }\n\n  // Calculate backbone alignments based on starting/ending section blockRatios and orientations\n  const startingSectionRatio = Math.abs(startingSection.backboneStop - startingSection.backboneStart) / Math.abs(startingSection.stop - startingSection.start);\n  const endingSectionRatio = Math.abs(endingSection.backboneStop - endingSection.backboneStart) / Math.abs(endingSection.stop - endingSection.start);\n\n  let backboneStart;\n  let backboneStop;\n  if (targetBlock.orientation === '+')\n  {\n    // Forward oriented block\n    // TODO: Some edge cases might not be handled properly with this simplification\n    backboneStart = Math.floor(startingSection.backboneStart + (start - startingSection.start) * startingSectionRatio);\n    backboneStop = Math.floor(endingSection.backboneStart + (stop - endingSection.start) * endingSectionRatio);\n  }\n  else\n  {\n    // Reverse oriented block\n    // TODO: Some edge cases might not be handled properly with this simplification\n    backboneStart = Math.floor(endingSection.backboneStart + (endingSection.stop - stop) * endingSectionRatio);\n    backboneStop = Math.floor(startingSection.backboneStart + (startingSection.stop - start) * startingSectionRatio);\n  }\n\n  // Ensure genes don't extend beyond the range of our block\n  // NOTE: This is very important for small block sections near break points\n  if (backboneStart < targetBlock.backboneStart) backboneStart = targetBlock.backboneStart;\n  if (backboneStop > targetBlock.backboneStop) backboneStop = targetBlock.backboneStop;\n\n  return { start: backboneStart, stop: backboneStop };\n}\n\n/**\n * Determines gene backbone alignments without taking gaps into account. This should be good enough\n * to approximate the angle of ortholog lines as they go off screen.\n *\n * @param start\n * @param stop\n * @param targetBlock\n */\nexport function processAlignmentsOfGeneOutsideOfViewport(start: number, stop: number, targetBlock: Block): BackboneAlignment\n{\n  // Calculate gene backbone position\n  let backboneStart;\n  let backboneStop;\n  const blockRatio = Math.abs(targetBlock.backboneStop - targetBlock.backboneStart) / Math.abs(targetBlock.stop - targetBlock.start);\n  if (targetBlock.orientation == '+')\n  {\n    // Forward oriented block\n    // TODO: Some edge cases might not be handled properly with this simplification\n    backboneStart = Math.floor(targetBlock.backboneStart + (start - targetBlock.start) * blockRatio);\n    backboneStop = Math.floor(targetBlock.backboneStart + (stop - targetBlock.start) * blockRatio);\n  }\n  else\n  {\n    // Reverse oriented block\n    // TODO: Some edge cases might not be handled properly with this simplification\n    backboneStart = Math.floor(targetBlock.backboneStart + (targetBlock.stop - stop) * blockRatio);\n    backboneStop = Math.floor(targetBlock.backboneStart + (targetBlock.stop - start) * blockRatio);\n  }\n\n  // Ensure genes don't extend beyond the range of our block\n  // NOTE: This is very important for small block sections near break points\n  if (backboneStart < targetBlock.backboneStart) backboneStart = targetBlock.backboneStart;\n  if (backboneStop > targetBlock.backboneStop) backboneStop = targetBlock.backboneStop;\n\n  return { start: backboneStart, stop: backboneStop };\n}\n","export const VERSION = \"0.9.0\";\n","import { defineComponent as _defineComponent } from 'vue'\nimport { unref as _unref, renderSlot as _renderSlot, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, normalizeClass as _normalizeClass, createVNode as _createVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, isRef as _isRef, withCtx as _withCtx, createBlock as _createBlock } from \"vue\"\n\nconst _hoisted_1 = { class: \"grid\" }\nconst _hoisted_2 = {\n  key: 0,\n  class: \"col-6 text-left\"\n}\n\nimport { computed } from 'vue';\nimport { useRouter } from 'vue-router';\n\n/**\n * Can use v-model:show to do 2 way binding\n */\ninterface Props \n{\n  header: string;\n  message?: string;\n  show: boolean;\n  theme?: 'error' | 'normal';\n  showBackButton?: boolean;\n  onConfirmCallback?: () => void;\n}\n\ninterface Emits\n{\n  // eslint-disable-next-line\n  (eventName: 'update:show', value: boolean): void\n}\n\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'VCMapDialog',\n  props: {\n    header: null,\n    message: null,\n    show: { type: Boolean },\n    theme: null,\n    showBackButton: { type: Boolean },\n    onConfirmCallback: null\n  },\n  emits: [\"update:show\"],\n  setup(__props: any, { emit }: { emit: ({\n  // eslint-disable-next-line\n  (eventName: 'update:show', value: boolean): void\n}), expose: any, slots: any, attrs: any }) {\n\nconst props = __props as {\n  header: string;\n  message?: string;\n  show: boolean;\n  theme?: 'error' | 'normal';\n  showBackButton?: boolean;\n  onConfirmCallback?: () => void;\n};\n\n\n\nconst router = useRouter();\n\nconst isActive = computed({\n  get() {\n    return props.show;\n  },\n  set(value: boolean) {\n    emit('update:show', value);\n  }\n});\n\nconst close = () => {\n  emit('update:show', false);\n};\n\nconst goToConfiguration = () => {\n  close();\n  router.push('/');\n};\n\nconst onConfirm = () => {\n  close();\n  if (props.onConfirmCallback)\n  {\n    props.onConfirmCallback();\n  }\n};\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_Button = _resolveComponent(\"Button\")!\n  const _component_Dialog = _resolveComponent(\"Dialog\")!\n\n  return (_openBlock(), _createBlock(_component_Dialog, {\n    header: props.header,\n    visible: _unref(isActive),\n    \"onUpdate:visible\": _cache[0] || (_cache[0] = ($event: any) => (_isRef(isActive) ? (isActive).value = $event : null)),\n    class: \"vcmap-dialog\",\n    breakpoints: {'960px': '75vw', '640px': '100vw'},\n    draggable: false,\n    closable: false,\n    modal: true\n  }, {\n    footer: _withCtx(() => [\n      _renderSlot(_ctx.$slots, \"footer\", {}, () => [\n        _createElementVNode(\"div\", _hoisted_1, [\n          (props.showBackButton)\n            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_2, [\n                _createVNode(_component_Button, {\n                  label: \"Back to Configuration\",\n                  class: _normalizeClass([{'p-button-danger': (props.theme === 'error')}, \"p-button-outlined\"]),\n                  onClick: goToConfiguration\n                }, null, 8, [\"class\"])\n              ]))\n            : _createCommentVNode(\"\", true),\n          _createElementVNode(\"div\", {\n            class: _normalizeClass(props.showBackButton ? 'col-6' : 'col-12')\n          }, [\n            _createVNode(_component_Button, {\n              label: (props.showBackButton) ? 'Ok, proceed anyway' : 'Ok',\n              class: _normalizeClass({'p-button-danger': (props.theme === 'error')}),\n              onClick: onConfirm,\n              autofocus: \"\"\n            }, null, 8, [\"label\", \"class\"])\n          ], 2)\n        ])\n      ])\n    ]),\n    default: _withCtx(() => [\n      _renderSlot(_ctx.$slots, \"content\", {}, () => [\n        _createElementVNode(\"p\", null, _toDisplayString(props.message), 1)\n      ])\n    ]),\n    _: 3\n  }, 8, [\"header\", \"visible\"]))\n}\n}\n\n})","import script from \"./VCMapDialog.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./VCMapDialog.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./VCMapDialog.vue?vue&type=style&index=0&id=75a14a7d&lang=scss\"\n\nconst __exports__ = script;\n\nexport default __exports__","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = (result, chunkIds, fn, priority) => {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar [chunkIds, fn, priority] = deferred[i];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.f = {};\n// This file contains only the entry chunk.\n// The chunk loading function for additional chunks\n__webpack_require__.e = (chunkId) => {\n\treturn Promise.all(Object.keys(__webpack_require__.f).reduce((promises, key) => {\n\t\t__webpack_require__.f[key](chunkId, promises);\n\t\treturn promises;\n\t}, []));\n};","// This function allow to reference async chunks\n__webpack_require__.u = (chunkId) => {\n\t// return url for filenames based on template\n\treturn \"js/\" + \"configuration\" + \".\" + \"dd79cb48\" + \".js\";\n};","// This function allow to reference async chunks\n__webpack_require__.miniCssF = (chunkId) => {\n\t// return url for filenames based on template\n\treturn \"css/\" + \"configuration\" + \".\" + \"cf5c7ccf\" + \".css\";\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","var inProgress = {};\nvar dataWebpackPrefix = \"vcmap-web:\";\n// loadScript function to load a script via script tag\n__webpack_require__.l = (url, done, key, chunkId) => {\n\tif(inProgress[url]) { inProgress[url].push(done); return; }\n\tvar script, needAttach;\n\tif(key !== undefined) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tfor(var i = 0; i < scripts.length; i++) {\n\t\t\tvar s = scripts[i];\n\t\t\tif(s.getAttribute(\"src\") == url || s.getAttribute(\"data-webpack\") == dataWebpackPrefix + key) { script = s; break; }\n\t\t}\n\t}\n\tif(!script) {\n\t\tneedAttach = true;\n\t\tscript = document.createElement('script');\n\n\t\tscript.charset = 'utf-8';\n\t\tscript.timeout = 120;\n\t\tif (__webpack_require__.nc) {\n\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n\t\t}\n\t\tscript.setAttribute(\"data-webpack\", dataWebpackPrefix + key);\n\t\tscript.src = url;\n\t}\n\tinProgress[url] = [done];\n\tvar onScriptComplete = (prev, event) => {\n\t\t// avoid mem leaks in IE.\n\t\tscript.onerror = script.onload = null;\n\t\tclearTimeout(timeout);\n\t\tvar doneFns = inProgress[url];\n\t\tdelete inProgress[url];\n\t\tscript.parentNode && script.parentNode.removeChild(script);\n\t\tdoneFns && doneFns.forEach((fn) => (fn(event)));\n\t\tif(prev) return prev(event);\n\t};\n\tvar timeout = setTimeout(onScriptComplete.bind(null, undefined, { type: 'timeout', target: script }), 120000);\n\tscript.onerror = onScriptComplete.bind(null, script.onerror);\n\tscript.onload = onScriptComplete.bind(null, script.onload);\n\tneedAttach && document.head.appendChild(script);\n};","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.p = \"/vcmap/\";","if (typeof document === \"undefined\") return;\nvar createStylesheet = (chunkId, fullhref, oldTag, resolve, reject) => {\n\tvar linkTag = document.createElement(\"link\");\n\n\tlinkTag.rel = \"stylesheet\";\n\tlinkTag.type = \"text/css\";\n\tvar onLinkComplete = (event) => {\n\t\t// avoid mem leaks.\n\t\tlinkTag.onerror = linkTag.onload = null;\n\t\tif (event.type === 'load') {\n\t\t\tresolve();\n\t\t} else {\n\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n\t\t\tvar realHref = event && event.target && event.target.href || fullhref;\n\t\t\tvar err = new Error(\"Loading CSS chunk \" + chunkId + \" failed.\\n(\" + realHref + \")\");\n\t\t\terr.code = \"CSS_CHUNK_LOAD_FAILED\";\n\t\t\terr.type = errorType;\n\t\t\terr.request = realHref;\n\t\t\tlinkTag.parentNode.removeChild(linkTag)\n\t\t\treject(err);\n\t\t}\n\t}\n\tlinkTag.onerror = linkTag.onload = onLinkComplete;\n\tlinkTag.href = fullhref;\n\n\tif (oldTag) {\n\t\toldTag.parentNode.insertBefore(linkTag, oldTag.nextSibling);\n\t} else {\n\t\tdocument.head.appendChild(linkTag);\n\t}\n\treturn linkTag;\n};\nvar findStylesheet = (href, fullhref) => {\n\tvar existingLinkTags = document.getElementsByTagName(\"link\");\n\tfor(var i = 0; i < existingLinkTags.length; i++) {\n\t\tvar tag = existingLinkTags[i];\n\t\tvar dataHref = tag.getAttribute(\"data-href\") || tag.getAttribute(\"href\");\n\t\tif(tag.rel === \"stylesheet\" && (dataHref === href || dataHref === fullhref)) return tag;\n\t}\n\tvar existingStyleTags = document.getElementsByTagName(\"style\");\n\tfor(var i = 0; i < existingStyleTags.length; i++) {\n\t\tvar tag = existingStyleTags[i];\n\t\tvar dataHref = tag.getAttribute(\"data-href\");\n\t\tif(dataHref === href || dataHref === fullhref) return tag;\n\t}\n};\nvar loadStylesheet = (chunkId) => {\n\treturn new Promise((resolve, reject) => {\n\t\tvar href = __webpack_require__.miniCssF(chunkId);\n\t\tvar fullhref = __webpack_require__.p + href;\n\t\tif(findStylesheet(href, fullhref)) return resolve();\n\t\tcreateStylesheet(chunkId, fullhref, null, resolve, reject);\n\t});\n}\n// object to store loaded CSS chunks\nvar installedCssChunks = {\n\t143: 0\n};\n\n__webpack_require__.f.miniCss = (chunkId, promises) => {\n\tvar cssChunks = {\"639\":1};\n\tif(installedCssChunks[chunkId]) promises.push(installedCssChunks[chunkId]);\n\telse if(installedCssChunks[chunkId] !== 0 && cssChunks[chunkId]) {\n\t\tpromises.push(installedCssChunks[chunkId] = loadStylesheet(chunkId).then(() => {\n\t\t\tinstalledCssChunks[chunkId] = 0;\n\t\t}, (e) => {\n\t\t\tdelete installedCssChunks[chunkId];\n\t\t\tthrow e;\n\t\t}));\n\t}\n};\n\n// no hmr","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t143: 0\n};\n\n__webpack_require__.f.j = (chunkId, promises) => {\n\t\t// JSONP chunk loading for javascript\n\t\tvar installedChunkData = __webpack_require__.o(installedChunks, chunkId) ? installedChunks[chunkId] : undefined;\n\t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n\t\t\t// a Promise means \"currently loading\".\n\t\t\tif(installedChunkData) {\n\t\t\t\tpromises.push(installedChunkData[2]);\n\t\t\t} else {\n\t\t\t\tif(true) { // all chunks have JS\n\t\t\t\t\t// setup Promise in chunk cache\n\t\t\t\t\tvar promise = new Promise((resolve, reject) => (installedChunkData = installedChunks[chunkId] = [resolve, reject]));\n\t\t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n\t\t\t\t\t// start chunk loading\n\t\t\t\t\tvar url = __webpack_require__.p + __webpack_require__.u(chunkId);\n\t\t\t\t\t// create error before stack unwound to get useful stacktrace later\n\t\t\t\t\tvar error = new Error();\n\t\t\t\t\tvar loadingEnded = (event) => {\n\t\t\t\t\t\tif(__webpack_require__.o(installedChunks, chunkId)) {\n\t\t\t\t\t\t\tinstalledChunkData = installedChunks[chunkId];\n\t\t\t\t\t\t\tif(installedChunkData !== 0) installedChunks[chunkId] = undefined;\n\t\t\t\t\t\t\tif(installedChunkData) {\n\t\t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n\t\t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n\t\t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n\t\t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n\t\t\t\t\t\t\t\terror.type = errorType;\n\t\t\t\t\t\t\t\terror.request = realSrc;\n\t\t\t\t\t\t\t\tinstalledChunkData[1](error);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\t__webpack_require__.l(url, loadingEnded, \"chunk-\" + chunkId, chunkId);\n\t\t\t\t} else installedChunks[chunkId] = 0;\n\t\t\t}\n\t\t}\n};\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkvcmap_web\"] = self[\"webpackChunkvcmap_web\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [998], () => (__webpack_require__(6453)))\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["getGeneFromGeneDTO","dto","speciesName","formattedOrthologs","orthologs","orthologIds","Object","values","flat","Gene","mapKey","symbol","geneSymbol","name","geneName","rgdId","geneRgdId","chromosome","chr","start","startPos","stop","stopPos","backboneStart","backboneStop","getOrthologsFromOrthologGeneSetDTO","orthologsByMapKey","forEach","orthologGeneDTO","push","GeneApi","symbolPrefix","httpInstance","res","geneList","data","map","comparativeSpeciesIds","roundedStart","Math","round","roundedStop","startTime","Date","now","toString","logger","compMapKeys","mapKeyString","index","length","key","orthologList","Map","orthologGeneSetDTO","set","gene","API_BASE_URL","config","axiosInstance","Axios","baseURL","LOG_LEVEL","createLogger","enabled","level","time","message","console","timeEnd","_createBlock","_component_router_view","script","__exports__","render","_hoisted_1","_defineComponent","__name","props","syntenySection","setup","__props","_ctx","_cache","height","_openBlock","_createElementBlock","class","x","posX1","width","y","posY1","_toDisplayString","_createCommentVNode","_hoisted_2","_Fragment","isHovered","x1","x2","_unref","SVGConstants","backboneXPosition","y1","y2","isInverted","posY2","gapSection","posX2","_hoisted_3","_hoisted_4","gaplessBlock","LABEL_LINE_LENGTH","_createElementVNode","startLabel","posX","posY","stroke","elementColor","stopLabel","text","getMousePosSVG","svg","event","p","createSVGPoint","clientX","clientY","ctm","getScreenCTM","inverse","matrixTransform","useMouseBasePairPos","mouseYPos","ref","onMounted","document","querySelector","getBasePairPositionFromSVG","svgY","svgStart","svgStop","basePairStart","basePairStop","value","getBasePairPositionFromMouseEvent","mousePos","useSyntenyAndDataInteraction","store","setHoverOnGeneLinesAndDatatrackSections","lines","line","dataPanelSelected","chainedOrthologLines","some","l","state","selectedGeneIds","includes","startGene","endGene","isLineHovered","startGeneDatatrack","endGeneDatatrack","onDatatrackSectionClick","section","type","dispatch","geneIds","shiftKey","newSelectedData","geneLabel","label","undefined","mainGene","otherLabelGenes","genes","filter","g","sortGeneList","SelectedData","clone","geneData","get","orthoIds","orthoData","id","getSelectedDataAndGeneIdsFromOrthologLine","selectedOrthologs","selectedData","ortho","genomicSection","selectedDataArray","onGeneLabelClick","orthologLines","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","showSyntenyOnHover","Boolean","showStartStop","showChromosome","selectOnClick","region","syntenyHoverSvgY","emits","emit","HOVER_HIGHLIGHT_COLOR","SELECTED_HIGHLIGHT_COLOR","SYNTENY_LABEL_SHIFT","useStore","toRefs","basePairPositionLabel","highlightSelections","watch","isRegionHovered","updatePositionLabelFromSVG","level1Blocks","computed","syntenyBlocks","b","chainLevel","level2Blocks","level1Gaps","syntenyGaps","level2Gaps","datatrackSets","showBasePairLine","onMouseEnter","genesAreSelected","selectedDataList","geneSection","onMouseLeave","onSyntenyBlockClick","selectedBackboneRegion","backboneChromosome","backboneAlignment","setViewportSelection","getSectionFill","isSelected","getDatatrackClass","datatrackSet","datatracks","backboneGene","offBackboneGene","backboneGeneDatatrack","offBackboneGeneDatatrack","calculateSectionStartPositionLabel","hiddenHeight","PANEL_SVG_START","basePairPerSVG","labelBasePair","speciesStart","Formatter","calculateSectionStopPositionLabel","PANEL_SVG_STOP","speciesStop","updatePositionLabelFromMouseEvent","blockSection","basePairPos","getBlockFromSVGPosition","i","block","isVisible","OverviewSyntenyLabelsSVG","_renderList","GapSVG","onMouseenter","$event","onMouseleave","onMousemove","onClick","fill","ChromosomeLabelSVG","SyntenyLinesSVG","datatrack","_normalizeClass","opacity","getLabelText","numCombinedGenes","labelText","rgdIds","altGenesForLabel","formatTextForMultiGeneLabel","startsWith","substring","isLabelSelected","combinedLabelGeneIds","numGenes","geneSymbolText","_hoisted_10","overviewBackboneSet","overviewSyntenySets","detailedBackboneSet","detailedSyntenySets","TITLE_ROTATION","rotateString","degree","getSyntenyDatatrackXPos","setOrder","datatrackSetIdx","getDetailedPanelXPositionForDatatracks","xPos","overviewPanelWidth","panelTitleHeight","detailsPanelWidth","overviewTitleXPosition","panelTitleYPosition","selectedBackboneXPosition","syntenySet","titleLabels","addClass","transform","getTrackTypeDisplayName","regions","order","useDialog","$log","useLogger","showDialog","dialogHeader","dialogMessage","showDialogBackButton","dialogTheme","onError","err","userMessage","showBackButton","title","error","useDetailedPanelZoom","startingPoint","inSelectMode","startDetailedSelectionY","stopDetailedSelectionY","getDetailedSelectionStatus","detailedSelectionHandler","isOverviewPanelSelecting","isOverviewPanelUpdating","isDetailedPanelUpdating","selectedRegion","viewportSelection","completeZoomSelection","warn","initZoomSelection","detailedBasePairRange","updateZoomSelection","currentSVGPoint","cancelDetailedSelection","toastCount","selectionToastCount","svgHeight","bpVisibleWindowLength","abs","pixelsPerBpRatio","floor","log","DatatrackSet","this","datatrackSections","concat","splice","SyntenyRegion","params","species","mapName","geneDatatrackLabels","syntenyGap","sort","a","syntenyBlock","datatrackSection","addDatatrackSections","factory","gaps","sortedGaps","isGenomicDataInViewport","windowBasePairRange","gapsLine","createSyntenySection","orientation","lastGapBackboneStop","lastGapSpeciesStop","gap","blockBackboneStart","gapBackboneStart","orientedGapStart","orientedGapStop","blockSyntenicSection","lastGap","finalGap","GenomicSet","Label","GeneLabel","OVERLAP_SIZE","LOC_PREFIX","mergeAndCreateGeneLabels","possibleLabels","geneLabels","curLabel","overlappingGenes","j","potentialOverlappingLabel","labelsOverlap","toLowerCase","size","label1","label2","LEVEL_2_WIDTH_MULTIPLIER","getOverviewPanelXPosition","SyntenyRegionSet","renderType","setRegionXPositionsBasedOnOrder","createTitleLabels","sortBasePairLabels","generateGeneLabels","visibleBackboneStart","visibleBackboneStop","windowStart","windowStop","filteredGenes","r","intermediateLabels","yPos","calculateDetailedPanelSVGYPositionBasedOnBackboneAlignment","speciesLabel","getDetailedPanelXPositionForSynteny","mapLabel","setGaplessSyntenyBlockXPositions","setSyntenyBlockXPositions","setSyntenyGapXPositions","setDatatrackSectionXPositions","sections","blockPosX1","trackWidth","labelPosX","labelPairs","labelPair","GenomicSection","shape","representation","calculateYPositionsBasedOnBackboneAlignment","color","windowSVGStart","windowSVGStop","visibleBackboneBasePairRange","svgLength","bpToSVGRatio","basepairDiff","svgDiff","backboneAlignmentLength","DatatrackSection","GeneDatatrack","VariantDensity","variantCount","maxCount","setSectionColor","blueVal","redVal","redHex","blueHex","SyntenySection","Chromosome","threshold","isGapless","createSyntenySectionLabels","GenomicSectionFactory","VariantPositions","positions","blockStart","blockStop","VariantApi","variantStartPositions","NUM_BINS","MIN_BIN_SIZE","createVariantDatatracks","sequenceStart","sequenceStop","invertedBlock","targetBlock","seqLength","backboneWindowStart","backboneWindowStop","binSize","max","backboneBinSize","numBinsForSection","variantCounts","Array","binStart","binIdx","min","getMaxVariantCount","variantDatatracks","backboneBinStart","backboneBinStop","binStop","getBackboneAlignment","isSectionInView","newVariant","createVariantDensitySection","adjustYPositionsBasedOnVisibleStartAndStop","buildVariantPositions","bpStart","bpStop","getVariants","backboneVariantTrackBuilder","variantPositions","backboneSection","activeMap","counts","processAlignmentsOfGeneInsideOfViewport","processAlignmentsOfGeneOutsideOfViewport","createOverviewSyntenicRegionSets","syntenyData","comparativeSpecies","backboneChr","syntenyRegionSets","blocks","currSpecies","find","compSpecies","processedSyntenicRegions","blockIdx","blockInfo","blockChrStr","gaplessBlockSection","currSyntenicRegion","createSyntenicRegionSets","pos","speciesSyntenyData","syntenyRegionSet","syntenicSectionBuilder","viewportStart","viewportStop","processVariantDensity","regionMaxCount","regionBinSize","blockGaps","blockGenes","blockVariantPositions","splitBlockWithGaps","isBlockInverted","visibleGenes","getThreshold","timerLabel","processedGeneInfo","syntenicDatatrackBuilder","idx","variantIdx","findIndex","track","regionSet","maxVariantCount","variantBinSize","genomicData","processedGenomicData","createStart","pushStart","createTotal","pushTotal","len","genomicElement","performance","geneDatatrackSection","createGeneDatatrackSection","useOverviewPanelSelection","startOverviewSelectionY","stopOverviewSelectionY","getOverviewSelectionStatus","overviewSelectionHandler","isDetailedPanelSelecting","overviewBackbone","completeOverviewSelection","initOverviewSelection","updateOverviewSelection","cancelOverviewSelection","constants","BackboneSection","labels","hasLabels","createLabels","backboneGenes","startBPLabel","stopBPLabel","BackboneSet","backbone","setBackboneGenes","setBackboneXPositions","setDatatrackXPositions","getDetailedPanelXPositionForBackboneDatatracks","unshift","updateGeneLabelXPositions","createBackboneSection","backboneDatatrackBuilder","visibleBPRange","filteredGeneCount","createBackboneSet","backboneMap","SelectedRegion","svgYPoint","BackboneSelection","visibleStart","visibleStop","ceil","overviewHeight","bpOverviewLength","innerSVGYPoint","showDataOnHover","backboneSet","INNER_SELECTION_EXTRA_WIDTH","isDetailed","newVal","deep","getSectionClass","geneDatatrackSetIndex","windowSVGMiddle","convertBasePairToLabel","lineColor","changeHoverStatusOnOrthologLines","changeDatatrackColors","colorHex","_withScopeId","n","_pushScopeId","_popScopeId","minValue","maxValue","minColor","maxColor","_useCssVars","parseFloat","toPrecision","toLocaleString","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","syntenyTree","loading","variantPositionsList","NAV_SHIFT_PERCENT","router","useRouter","toast","useToast","detailedSyntenySvgYPosition","attachToProgressLoader","storeLoadingActionName","func","configurationLoaded","updateOverviewPanel","updateDetailsPanel","backboneSpecies","detailedBackbone","updateBackboneVariants","isUpdatingVariants","updateSyntenyVariants","arePanelsLoading","displayVariantLegend","backboneVariantIdx","hasVariantTracks","setWithVariants","currentlySelectingRegion","debug","overviewUpdateStart","overviewBackboneCreationTime","overviewSyntenyTrackCreationTime","overviewCreateBackboneSelectionTime","logPerformanceReport","detailedUpdateStart","defaultMapKey","timeSyntenyTracks","timeBackboneFilterGenes","timeCreateBackboneDatatracks","timeCreateBackboneSet","timeAdjustVisibleRegion","backboneFilterGenesStart","isBpRangeVisible","backboneDatatracksStart","backboneDatatrackInfo","backboneSetStart","syntenyTracksStart","createOrthologLines","timeDetailedUpdate","timeDetailedUpdateOther","navigateUp","isNavigationUpDisabled","currRange","adjust","navigateDown","isNavigationDownDisabled","onDetailedSyntenyHover","getDetailedPosition","detailedPanel","getElementById","scrollY","window","scrollX","detailedPanelDomPositions","getBoundingClientRect","position","top","String","bottom","right","left","backboneRegion","variantDatatrackInfo","addNewDatatrackSetToStart","addEventListener","beforeEach","to","from","next","response","confirm","keyCode","showToast","severity","details","duration","add","summary","detail","life","totalTimeMillis","detailedTimeReportObject","performanceReport","detailTitle","Details","toFixed","JSON","stringify","_createVNode","Toast","viewBox","viewboxHeight","xmlns","_withModifiers","onContextmenu","OrthologLineSVG","SectionSVG","BackboneSetSVG","onSyntenyHover","GeneLabelSVG","syntenicRegion","ViewboxTitlesSVG","navigationButtonHeight","href","_imports_0","_imports_1","onMousedown","GradientLegend","VCMapDialog","show","_isRef","header","theme","LoadingSpinnerMask","style","_normalizeStyle","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_19","_hoisted_20","_hoisted_21","showEditModal","startPosition","stopPosition","isValidStartStop","maxPosition","backboneLength","openSelectionEditModal","defaultStart","defaultStop","closeModal","saveSelectionChange","_component_Button","_resolveComponent","_component_InputNumber","icon","content","_withCtx","modelValue","useGrouping","addCommasToBasePair","evaluateBPInput","footer","disabled","_","zoomLevel","zoomIntervals","zoomStep","newRange","getZoomStepFromZoomLevel","immediate","isZoomDisabled","onZoomSliderEnd","logZoom","zoom","newZoomLevel","zoomedStart","zoomedStop","currentLength","currentZoomLevel","newRegionLength","lengthDiff","sliderStep","maxZoom","logMinZoom","log10","logMaxZoom","zoomed","exp","zoomOut","zoomInterval","zoomIn","val","LN10","_component_Slider","step","onSlideend","interval","displayedSpeciesRegionLabel","comparativeSpeciesText","Zoom","onConfirmCallback","onLoadSyntenyVariants","onCloseLoadDataTrackModal","dataTrackItems","speciesOptions","prepopulateConfigOptions","isActive","onConfirmLoadDataTrack","selectedMapKeys","item","onAddDataTrack","currLength","close","removeDataTrackItem","loadedSpecies","loadedBackbone","entry","_component_Dropdown","_component_Dialog","visible","draggable","closable","modal","default","options","optionValue","optionLabel","placeholder","alt","src","target","showLoadDataTrackModal","openLoadDataTrackModal","mapKeys","triggerUpdate","closeLoadDataTrackModal","goToConfigurationScreen","_component_Tag","_component_Divider","_component_Panel","_directive_tooltip","_resolveDirective","toggleable","rounded","_createTextVNode","VERSION","icons","_withDirectives","OverviewControls","layout","DetailsControls","LoadDataTrackControls","trackOrientation","SEARCHED_GENE_WINDOW_FACTOR","selectGene","geneLength","newData","getNewSelectedData","goToRgd","rgdUrl","open","searchedGene","geneSuggestions","numberOfResults","d","clearSelectedGenes","searchGene","matches","query","searchKey","sortGeneMatches","searchSVG","newWindow","adjustSelectionWindow","getSuggestionDisplay","_component_AutoComplete","suggestions","onComplete","onItemSelect","field","minLength","dataObject","GeneInfo","Gap","Block","newgaps","origLen","duplicate","added","idx2","len2","compared","getGeneFromDTO","getSpeciesSyntenyDataFromDTO","dtoArray","geneDTO","genesPerRegion","regionData","allGenes","reduce","prevGenes","currentGenes","SyntenyApi","syntenyApiCalls","comparativeSpeciesMaps","s","apiRoute","optionCount","keys","optional","includeGenes","thresholdStart","thresholdEnd","includeOrthologs","Promise","allSettled","syntenyResults","result","status","singleSpeciesSyntenyData","reason","backboneOverviewError","Error","noRegionLengthError","missingComparativeSpeciesError","noSyntenyFoundError","MAX_CHAINLEVEL","MAX_CHAINLEVEL_GENES","isLoading","proceedAfterError","initVCMapProcessing","checkForConfigurationErrors","slowAPI","setTimeout","getSyntenicRegions","speciesSyntenyDataArray","clearTimeout","someSyntenyResultsAreMissing","slowProcessing","processSynteny","selectionStart","selectionStop","getters","isLoadByGene","loadedGene","isLoadByPosition","queryAndProcessSyntenyForBasePairRange","triggerDetailedPanelProcessing","tree","speciesIdx","has","knownSpeciesBlocks","blockData","blockSearch","existingBlockGapCountChanged","newBlock","addGaps","geneIdx","backboneAlignemt","syntenyTreeKeys","speciesData","loadSyntenyVariants","selection","showNoResultsDialog","showPartialResultsDialog","speciesWithMissingSynteny","errMessage","join","resultsFound","speciesWithMissingSyntenyData","onProceedWithErrors","loadBackboneVariants","speciesMap","matchIdx","loadingBackbone","foundSomeVariants","variantPromises","currentBlockSet","promises","variantRes","detailedBasePairRequest","HeaderPanel","SVGViewbox","SelectedDataPanel","routes","path","component","Main","createRouter","history","createWebHistory","process","ExternalComponentsHandler","PLUGINS","PrimeVue","ToastService","COMPONENTS","Button","Dropdown","InputNumber","Divider","Panel","ProgressBar","ProgressSpinner","TabView","TabPanel","AutoComplete","Checkbox","ColorPicker","Message","InlineMessage","Dialog","Slider","Tag","DIRECTIVES","Tooltip","registerAll","app","plugin","use","directive","getPlugins","getComponents","getDirectives","createApp","App","mount","CHROMOSOME_COLOR_MAP","UNMAPPED_CHROMOSOME_COLOR","Symbol","vuexLocal","VuexPersistence","storage","localStorage","actionsToLog","mutationsToLog","mutation","actionFilter","action","createStore","configMode","loadedGenes","mutations","speciesArray","loadedGenesMap","configState","range","mode","selectedIds","isUpdating","count","actions","setSpecies","context","commit","setChromosome","setStartPosition","setStopPosition","setGene","setConfigMode","setConfigurationLoaded","setSelectedData","selected","setSelectedGeneIds","setComparativeSpecies","setLoadedGenes","setIsDetailedPanelUpdating","setIsOverviewPanelUpdating","setIsUpdatingVariants","clearConfiguration","clearBackboneSelection","setBackboneSelection","setDetailedBasePairRequest","setDetailedBasePairRange","setBackboneOrthologData","setSelectionToastCount","plugins","compSpeciesNameMap","collectAllOrthologIds","geneA","geneB","isGeneALOC","isGeneBLOC","geneASymbol","geneBSymbol","geneBasePairLength","newInnerStart","newInnerStop","reframeGenes","orthologId","ortholog","newStart","newStop","partialMatches","distanceA","levenshteinDistance","distanceB","str1","str2","matrix","charAt","bp","OrthologLine","ORTHOLOG_THRESHOLD_MULTIPLIER","offBackboneSyntenyRegionSets","orthologLineThreshold","visibleBackboneGenesWithOrthologs","speciesPositionMap","backboneGeneStartX","startX","endX","geneStartX","geneEndX","backboneGeneDatatracks","geneSet","geneDatatrackMap","regionIdx","regionGeneDatatracks","dt","orthologChains","orthologOrderMap","positionInfoA","positionInfoB","o","MAX_ORDER","WINDOW_START","WINDOW_STOP","chain","chainLines","prevGene","currGene","isOrthologLineInView","geneABackboneStart","geneABackboneStop","geneBBackboneStart","geneBBackboneStop","isInBPRange","testBP","getOrthologLineGenes","orthologGenesMap","orthoId","orthologGene","detailsTitleXPosition","dataTrackWidth","overviewTrackYPosition","trackLabelYPosition","trackMapLabelYPosition","overviewTrackPadding","backboneDatatrackXOffset","PANEL_HEIGHT","SMALLEST_RENDERABLE_SVG_UNIT","bpLength","backboneX2","datatrackSetIndex","geneBackboneStart","geneBackboneStop","svgToBackboneRatio","backboneStartDiff","backboneStopDiff","startingSection","endingSection","previousGap","lastSection","startingSectionRatio","endingSectionRatio","blockRatio","goToConfiguration","onConfirm","breakpoints","_renderSlot","$slots","autofocus","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","module","__webpack_modules__","m","deferred","O","chunkIds","fn","priority","notFulfilled","Infinity","fulfilled","every","getter","__esModule","definition","defineProperty","enumerable","f","e","chunkId","all","u","miniCssF","globalThis","Function","obj","prop","prototype","hasOwnProperty","call","inProgress","dataWebpackPrefix","url","done","needAttach","scripts","getElementsByTagName","getAttribute","createElement","charset","timeout","nc","setAttribute","onScriptComplete","prev","onerror","onload","doneFns","parentNode","removeChild","bind","head","appendChild","toStringTag","createStylesheet","fullhref","oldTag","resolve","reject","linkTag","rel","onLinkComplete","errorType","realHref","code","request","insertBefore","nextSibling","findStylesheet","existingLinkTags","tag","dataHref","existingStyleTags","loadStylesheet","installedCssChunks","miniCss","cssChunks","then","installedChunks","installedChunkData","promise","loadingEnded","realSrc","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","chunkLoadingGlobal","self","__webpack_exports__"],"sourceRoot":""}